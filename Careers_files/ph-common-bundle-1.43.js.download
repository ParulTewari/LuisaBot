define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("index",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.DummyCommon=i}),define("ph-common/ph-common",["exports","./ph-src-attribute/ph-src-attribute","./ph-loader-attribute/ph-loading-image-attribute","./ph-tracking/ph-pa-event","./ph-href-attribute/ph-href-attribute","./ph-page-state-attribute/ph-page-state-attribute","./ph-slider/v1/ph-card-slider","./ph-media-gallery/v1/ph-media-gallery","./ph-video/v1/ph-video","./ph-job-count/v1/ph-job-count","./ph-nav/ph-nav-item","./ph-a11y/ph-a11y-autocomplete-attribute","./ph-a11y/ph-a11y-listbox-attribute","./ph-a11y/ph-a11y-radio-attribute","./ph-scroll/ph-scroll-attribute","./ph-object-fit/ph-object-fit-attribute","./service_request","./common-service","./geo-location-service","./local-storage","./ph-widget","./ph-log","./ph-tracking/ph-tracker","./cookie-manager","./ph-value-converters/search-filter-value-converter","./ph-value-converters/date-format","./ph-value-converters/data-validate-value-converter","./url-manager","./ph-app-model-manager","./ph-job-widget","./ph-video-widget","./ph-modal-dialog-display","./ph-validation/ph-validation-controller","./ph-validation/ph-validate-binding-behavior","./ph-translation/ph-translation-value-converter","./ph-translation/ph-translation-service","./ph-candidate-login-service","./ph-a11y-autocomplete","./ph-a11y/ph-ally-layer-handler"],function(e,t,i,o,n,r,a,s,l,c,p,u,d,f,h,g,y,m,v,b,S,A,w,E,T,C,k,R,O,P,_,I,j,D,L,x,M,N,V){"use strict";function F(e){e.globalResources(["./ph-src-attribute/ph-src-attribute","./ph-href-attribute/ph-href-attribute","./ph-loader-attribute/ph-loading-image-attribute","./ph-tracking/ph-pa-event","./ph-value-converters/search-filter-value-converter","./ph-value-converters/date-format","./ph-value-converters/data-validate-value-converter","./ph-validation/ph-validate-binding-behavior","./ph-translation/ph-translation-value-converter","./ph-page-state-attribute/ph-page-state-attribute","./ph-slider/v1/ph-card-slider","./ph-media-gallery/v1/ph-media-gallery","./ph-video/v1/ph-video","./ph-job-count/v1/ph-job-count","./ph-nav/ph-nav-item","./ph-a11y/ph-a11y-autocomplete-attribute","./ph-a11y/ph-a11y-listbox-attribute","./ph-a11y/ph-a11y-radio-attribute","./ph-scroll/ph-scroll-attribute","./ph-object-fit/ph-object-fit-attribute"])}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ImgSrcAttribute",{enumerable:!0,get:function(){return t.ImgSrcAttribute}}),Object.defineProperty(e,"LoadingImageAttribute",{enumerable:!0,get:function(){return i.LoadingImageAttribute}}),Object.defineProperty(e,"PhenomTrackEvent",{enumerable:!0,get:function(){return o.PhenomTrackEvent}}),Object.defineProperty(e,"AHrefAttribute",{enumerable:!0,get:function(){return n.AHrefAttribute}}),Object.defineProperty(e,"PhPageStateAttribute",{enumerable:!0,get:function(){return r.PhPageStateAttribute}}),Object.defineProperty(e,"CardSliderAttribute",{enumerable:!0,get:function(){return a.CardSliderAttribute}}),Object.defineProperty(e,"MediaGallery",{enumerable:!0,get:function(){return s.MediaGallery}}),Object.defineProperty(e,"VideoAttribute",{enumerable:!0,get:function(){return l.VideoAttribute}}),Object.defineProperty(e,"JobCountAttribute",{enumerable:!0,get:function(){return c.JobCountAttribute}}),Object.defineProperty(e,"PhNavItem",{enumerable:!0,get:function(){return p.PhNavItem}}),Object.defineProperty(e,"A11yAutoCompleteAttribute",{enumerable:!0,get:function(){return u.A11yAutoCompleteAttribute}}),Object.defineProperty(e,"A11yListboxAttribute",{enumerable:!0,get:function(){return d.A11yListboxAttribute}}),Object.defineProperty(e,"A11yRadioAttribute",{enumerable:!0,get:function(){return f.A11yRadioAttribute}}),Object.defineProperty(e,"PhScrollAttribute",{enumerable:!0,get:function(){return h.PhScrollAttribute}}),Object.defineProperty(e,"PhObjectFitAttribute",{enumerable:!0,get:function(){return g.PhObjectFitAttribute}}),Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}})}),Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}})}),Object.keys(v).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}})}),Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})}),Object.keys(S).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}})}),Object.keys(A).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return A[t]}})}),Object.keys(w).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}})}),Object.keys(E).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}})}),Object.keys(T).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return T[t]}})}),Object.keys(C).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return C[t]}})}),Object.keys(k).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return k[t]}})}),Object.keys(R).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return R[t]}})}),Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return O[t]}})}),Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return P[t]}})}),Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return _[t]}})}),Object.keys(I).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return I[t]}})}),Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return j[t]}})}),Object.keys(D).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return D[t]}})}),Object.keys(L).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return L[t]}})}),Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}})}),Object.keys(M).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return M[t]}})}),Object.keys(N).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return N[t]}})}),Object.keys(V).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return V[t]}})}),e.configure=F}),define("ph-common",["ph-common/ph-common"],function(e){return e}),define("ph-common/ph-src-attribute/ph-src-attribute",["exports","aurelia-framework","./../index","./lazy-image-intersection-observer"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ImgSrcAttribute=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.ImgSrcAttribute=function(){function e(t,i,o){n(this,e),this.element=t,this.commonService=i,this.imageIntersectionObserver=o}return e.prototype.attached=function(){if("true"==(this.element.getAttribute("data-ph-lazy")||"")&&"none"==window.getComputedStyle(this.element).display){var e=this.element.previousElementSibling;e&&e.classList&&e.classList.contains("lqip-overlay")&&(e.style.opacity="0")}},e.prototype.valueChanged=function(e,t){var i=this;if(e&&e.trim().length>0){var o=this.commonService.getImageUrl(e),n=this.commonService.getDeviceType(),r=this.commonService.getSiteSettings("imageLoadType")||{};r=r[n]||"progressive";var a=r.layerBgColor,s=this.element.getAttribute("data-ph-lazy");switch(s||"true"===s||(r="default"),this.commonService.isCrawlerUserAgent()&&"true"==s&&(r="default",this.element.classList.remove("ph-lazy"),this.element.style.width=""),r){case"lazy":this.element.setAttribute("data-src",o),this.imageIntersectionObserver.observeImage(this.element),this.imageIntersectionObserver.applyOverlayLayer(this.element,this.commonService,a);break;case"eager":break;case"progressive":this.element.setAttribute("src",o),this.imageIntersectionObserver.applyOverlayLayer(this.element,this.commonService,a),"lazy"!==r&&(this.element.onload=function(){i.imageIntersectionObserver.processImage(i.element)});break;case"default":this.element.setAttribute("src",o)}this.element.removeAttribute&&this.element.removeAttribute("ph-src")}},e}();e.ImgSrcAttribute=l=a([(0,t.customAttribute)("ph-src"),(0,t.autoinject)(),s("design:paramtypes",[Element,i.CommonService,o.ImageIntersectionObserver])],l)}),define("ph-common/index",["exports","./service_request","./common-service","./geo-location-service","./local-storage","./ph-widget","./ph-log","./ph-tracking/ph-tracker","./cookie-manager","./ph-value-converters/search-filter-value-converter","./ph-value-converters/date-format","./url-manager","./ph-app-model-manager"],function(e,t,i,o,n,r,a,s,l,c,p,u,d){"use strict";function f(e){e.globalResources(["./ph-src-attribute/ph-src-attribute","./ph-loader-attribute/ph-loading-image-attribute","./ph-device/hide-on-mobile-attr","./ph-tracking/ph-pa-event","./ph-value-converters/search-filter-value-converter","./ph-value-converters/date-format","./ph-href-attribute/ph-href-attribute"])}Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){"default"!==i&&"__esModule"!==i&&Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}})}),Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})}),Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})}),Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})}),e.configure=f}),define("ph-common/service_request",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.ServiceRequest=function(){function e(i,o,n,r){t(this,e),this.method=i,this.url=o,this.params=n,this.headers=r}return e.prototype.getMethod=function(){return this.method},e.prototype.getUrl=function(){return this.url},e.prototype.getParams=function(){return this.params||{}},e.prototype.getHeaders=function(){return this.headers||{}},e}()}),define("ph-common/common-service",["exports","aurelia-fetch-client","aurelia-framework","aurelia-event-aggregator","./index","./local-storage","./url-manager","./ph-tracking/tracking-manager","./ph-app-model-manager","./local-storage-context-model","./ph-translation/ph-translation-service","./ph-bot-bridge-manager/profile-login-service","./cookie-manager","./ph-captcha/ph-captcha-injector","dropzone","whatwg-fetch"],function(e,t,i,o,n,r,a,s,l,c,p,u,d,f,h){"use strict";function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CommonService=void 0;var y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(h),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},b=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S={DEFAULT:"MMM Do YYYY",SHORT:"D M YY",MEDIUM:"MMM Do YYYY",LONG:"MMMM Do YYYY",FULL:"MMMM Do YYYY H mm",LOCALE_DEFAULT:"L",MMDDYYYY_SLASH:"MM/DD/YYYY"},A=e.CommonService=function(){function e(t,i,o,n,r,a,s,l,c,p,u){var d=this;g(this,e),this.http=t,this.eventAggregator=i,this.localStorage=o,this.urlManager=n,this.trackingManager=r,this.phenomAppManager=a,this.localStorageContext=s,this.profileLoginService=l,this.translationService=c,this.cookieManager=p,this.captchaInjector=u,this.scriptSubScriptions={},this.jobCountReqObj={},this.mergeProfileProgress=!1,this.isjobCount=!0,this.queryCount=0,this.trackWidgetInfo={},this.captchSecuredDDO={},this.elementTagLevelEid={},this.isGdprConsentClosed=!1,this.getPendingCalls=function(){return d.http.activeRequestCount},this.debounce=function(e,t){var i=void 0;return t=t||150,function(o){var n=d;clearTimeout(i),i=setTimeout(function(){return e.apply(n,[o])},t)}},this._loadMessageBundle(),this.phenomAppManager.setPendingCalls(this.getPendingCalls),this.phenomAppManager.setCommonContext(this),this.handlingDropzoneCsrfToken(),this.captchaInjector.injectCaptcha(this),this.captchSecuredDDO=this.getSiteSettings("captchaEnabledDDO")||{}}return e.prototype._getDDOUrl=function(){return this.phenomAppManager.getDDOUrl()},e.prototype._getDDOFromCache=function(e){return this.phenomAppManager.getDDOFromCache(e)},e.prototype._getCommonParams=function(){return this.phenomAppManager.getCommonParams()},e.prototype._loadMessageBundle=function(){var e=this,t=this._getDDOFromCache("siteConfig");if(t&&t.data.bundleVersions){var i=[this.phenomAppManager.getCdnUrl(),this.phenomAppManager.getRefNum(),this.phenomAppManager.getLocale(),"common/bundles","messages-"+this.phenomAppManager.getLocale()+"-"+t.data.bundleVersions.msgBundle+".json"];i=i.join("/");this.http.fetch(i).then(function(e){if(n.logger.debug("Message Bundle ",e),200==e.status)return e.json()}).then(function(t){n.logger.debug("Message Bundle ",t),e.phenomAppManager.setLangBundle(t)})}},e.prototype._loadValidationRules=function(){var e=this,t=this._getDDOFromCache("siteConfig");if(t&&t.data.bundleVersions){var i=[this.phenomAppManager.getCdnUrl(),this.phenomAppManager.getRefNum(),"common/validations","validationRules-"+t.data.bundleVersions.validationRules+".json"];i=i.join("/");this.http.fetch(i).then(function(e){if(200==e.status)return e.json()}).then(function(t){n.logger.debug("Validation Rules ",t),e.phenomAppManager.setValidationRules(t)})}},e.prototype.getErrorChannel=function(e){return e+"-error"},e.prototype.getSuccessChannel=function(e){return e+"-success"},e.prototype.getImageUrl=function(e){var t=this;if(e&&-1!=e.indexOf("://"))return e;var i=["cdnUrl","refNum","locale","deviceType"],o="";return i.forEach(function(e,i){var n=t.phenomAppManager.getParam(e);n&&n.trim().length>0&&(o+=n,"/"!==n[n.length-1]&&(o+="/"))}),o+e},e.prototype.getTemplateUrl=function(e,t){var i=this,o="views/";if(!this.phenomAppManager.hasAbsUrl())return"./"+o+e+"/"+t+"/view.html";o="widgets/"+e+"/"+o;var n=["cdnUrl","refNum","s:"+o,"s:"+t,"locale","deviceType"],r="";return n.forEach(function(e,t){var o=i.phenomAppManager.getParam(e);e&&e.startsWith("s:")&&(o=e.substring(2)),o&&o.trim().length>0&&(r+=o,"/"!==o[o.length-1]&&(r+="/"))}),r+"view.html"},e.prototype.getLoadingImgUrl=function(e){return this.getImageUrl(e)},e.prototype.getCachedDDO=function(e,t){var i=this._getDDOFromCache(e);if(i&&t){var o={};o[e]=i,this.eventAggregator.publish(this.getSuccessChannel(t),{respData:o,ddoKey:e,elementTag:t})}return i},e.prototype.getDDO=function(e,t,i){var o=this;return this.captchSecuredDDO[t]?new Promise(function(n,r){var a=o.captchSecuredDDO[t],s=void 0,l=a.action;if(a.divIdSelector){var c=document.querySelector(a.divIdSelector);if(c){var p=document.createElement("div");s=t+"-captcha-div",p.setAttribute("id",s),c.parentElement.appendChild(p)}}o.captchaInjector.captchaCallback(function(r){i.phCaptchaToken=r,o.getDDOActual(e,t,i).then(function(e){return n(e)})},s,l)}):this.getDDOActual(e,t,i)},e.prototype.getDDOActual=function(e,t,i){var o=this;return new Promise(function(r,a){var s=o._getDDOFromCache(t);if(s){var l={};l[t]=s,o.eventAggregator.publish(o.getSuccessChannel(e),{respData:l,ddoKey:t}),r(l)}else{var c=o._getCommonParams();c.ddoKey=t;for(var p in i)i.hasOwnProperty(p)&&(c[p]=i[p]);var u=new Headers;u.append("Content-Type","application/json");var d=o.getCsrfToken();d&&u.append("X-CSRF-TOKEN",d);var f=new n.ServiceRequest("POST",o._getDDOUrl(),c,u);o.invoke(f,e,t).then(function(e){r(e)})}})},e.prototype.invoke=function(e,t,i){var o=this;if(!e.getMethod())return void n.logger.error("Http Method type is mandatory");if(!e.getUrl())return void n.logger.error("Url is Mandatory");if("GET"==e.getMethod())return this.http.fetch(e.getUrl()).then(function(e){return e.json()});var r=e.getParams().avoidWidgetHideOnFail;return delete e.getParams().avoidWidgetHideOnFail,this.http.fetch(e.getUrl(),{method:"post",body:JSON.stringify(e.getParams()),headers:e.getHeaders(),credentials:"include"}).then(function(e){var n=e.json();return o.eventAggregator.publish(o.getSuccessChannel(t),{successPromise:n,ddoKey:i}),n}).catch(function(e){n.logger.error("Error in WS call ",e),o.eventAggregator.publish(o.getErrorChannel(t),{avoidWidgetHideOnFail:r})})},e.prototype.jobContext=function(e){return this.localStorageContext.jobContext(e)},e.prototype.addJobContext=function(e,t){this.localStorageContext.addJobContext(e,t)},e.prototype.getNextAndPrevJobData=function(e){return this.localStorageContext.getNextAndPrevJobData(e)},e.prototype.setLocalStorageContext=function(e,t){var i=[this.localStorageContext.getRecommStorageKey(),e].join("_");this.localStorage.setItem(i,t)},e.prototype.getLocalStorageContext=function(e){var t=[this.localStorageContext.getRecommStorageKey(),e].join("_");return this.localStorage.getItem(t)},e.prototype.getUrl=function(e,t,i){var o=this.getSiteSettings("isUrlLowerForSeo");"internal"===this.getSiteType()&&"job"===e&&t&&t.visibilityType&&"EXTERNAL"===t.visibilityType.toUpperCase()&&(i?i+="&vt=e":i="vt=e");var n=this.phenomAppManager.getRawUrl(e);if(n){var r=this.urlManager.getUrl(e,t,i,n,o);return r&&-1==r.indexOf("http")&&(r=this.phenomAppManager.getBaseUrl()+r),r}},e.prototype.getRawUrl=function(e){return this.phenomAppManager.getRawUrl(e)},e.prototype.storePageTrackEventData=function(e,t){this.trackingManager.storePageTrackEventData(e,t)},e.prototype.getPageTrackEventData=function(e){return this.trackingManager.getPageTrackEventData(e)},e.prototype.processTrackingEvent=function(e,t,i,o,n){i=i||{};var r=i.isStatic;if(delete i.isStatic,this.trackWidgetInfo&&Object.keys(this.trackWidgetInfo).length&&!r)for(var a in this.trackWidgetInfo)i.hasOwnProperty(a)||(i[a]=this.trackWidgetInfo[a]);var s=new CustomEvent("ph:ex:trackEvents",{bubbles:!0,detail:{eventName:e,payload:i}});document.dispatchEvent(s),this.trackingManager.processTrackingEvent(e,t,i,o,n)},e.prototype.fetchWidget=function(e){if(e){for(var t=e,i=t.getAttribute("as-element"),o=!1;t&&!i&&"BODY"!=t.nodeName;)t=t.parentElement,i=t&&t.getAttribute("as-element");if(i)return o=!t.au,{elem:t,isStatic:o,elemTag:i}}return!1},e.prototype.getWidgetName=function(e,t){if(e&&e.getAttribute&&e.getAttribute("data-widget-name"))return e.getAttribute("data-widget-name");var i=void 0;return e&&e.getAttribute&&e.getAttribute("as-element")&&(i=e.getAttribute("as-element")),(i||t).replace(/^.+?(\-)/,"").replace(/-[^-]+$/,"")},e.prototype.addRecommendationTrackCtx=function(e,t){var i=this.trackingManager.getPageTrackEventData(e);i&&this.localStorageContext.addRecommendationTrackCtx(t,i)},e.prototype.getRecommendedTrackCtx=function(){return this.localStorageContext.getRecommendedTrackCtx()},e.prototype.getRefNum=function(){return this.phenomAppManager.getRefNum()},e.prototype.getCsrfToken=function(){return this.phenomAppManager.getCsrfToken()},e.prototype.getSpecificTrackCtx=function(e,t){return this.localStorageContext.getSpecificTrackCtx(e,t)},e.prototype.setSpecificTrackCtx=function(e,t,i){return this.localStorageContext.setSpecificTrackCtx(e,t,i)},e.prototype.removeSpecificTrackCtx=function(e,t){return this.localStorageContext.removeSpecificTrackCtx(e,t)},e.prototype.removeRecomContentFromLocalStorage=function(){return this.localStorageContext.removeRecomContentFromLocalStorage()},e.prototype.getBaseUrl=function(){return this.phenomAppManager.getBaseUrl()},e.prototype.getBaseDomain=function(){return this.phenomAppManager.getBaseDomain()},e.prototype.getDateFormat=function(e){return S[e]||e},e.prototype.getSessionParam=function(e){return this.phenomAppManager.getSessionParams(e)},e.prototype.getWidgetSettings=function(e){return this.phenomAppManager.getWidgetSettings(e)},e.prototype.useInlineTmpl=function(){return this.phenomAppManager.useInlineTmpl()},e.prototype.getLocale=function(){return this.phenomAppManager.getLocale()},e.prototype.getPageType=function(){return this.phenomAppManager.getPageType()},e.prototype.getPageId=function(){return this.phenomAppManager.getPageId()},e.prototype.getPageName=function(){return this.phenomAppManager.getPageName()},e.prototype.getCountry=function(){return this.phenomAppManager.getCountry()},e.prototype.clearDDO=function(e){this.phenomAppManager.clearDDOFromcache(e)},e.prototype.getLangBundle=function(){return this.phenomAppManager.getLangBundle()},e.prototype.getValidationRules=function(e){return this.phenomAppManager.getValidationRules(e)},e.prototype.setLangBundle=function(e){return this.phenomAppManager.setLangBundle(e)},e.prototype.setValidationRules=function(e){return this.phenomAppManager.setValidationRules(e)},e.prototype.getParam=function(e){return this.phenomAppManager.getParam(e)},e.prototype.setParam=function(e,t){this.phenomAppManager.setParam(e,t)},e.prototype.getSiteType=function(){return this.phenomAppManager.getSiteType()},e.prototype.getSiteSettings=function(e){var t=this._getDDOFromCache("siteConfig");if(t&&t.data)return e?t.data.siteSettings[e]||t.data[e]:t.data.siteSettings},e.prototype.getUserSubType=function(){return this.phenomAppManager.getUserSubType()},e.prototype.getDeviceType=function(){return this.phenomAppManager.getDeviceType()},e.prototype.getDeviceType=function(){return this.phenomAppManager.getDeviceType()},e.prototype.setPageState=function(e){this.phenomAppManager.setPageState(e),this.eventAggregator.publish("pageState",{pageState:e})},e.prototype.getPageState=function(){var e=this.phenomAppManager.getPageState();return this.eventAggregator.publish("pageState",{pageState:e}),e},e.prototype.setPageStateData=function(e){this.phenomAppManager.setPageStateData(e),this.eventAggregator.publish("pageStateData",{})},e.prototype.getPageStateData=function(){return this.phenomAppManager.getPageStateData()},e.prototype.getDdoRespFromStore=function(e){return this.phenomAppManager.getDdoRespFromStore(e)},e.prototype.setDdoRespToStore=function(e,t){this.phenomAppManager.setDdoRespToStore(e,t)},e.prototype.populateJobResults=function(e,t,i){if(e&&e.length){for(var o in e)e[o]&&(e[o].hasOwnProperty("externalApply")&&!e[o].externalApply&&(e[o].applyUrl=this.getBaseUrl()+"apply?jobSeqNo="+e[o].jobSeqNo),e[o].jobUrl=e[o].jobUrl||this.getUrl("job",e[o]),t?(e[o].actionUrl=e[o].jobUrl,e[o].actionEventName=i):(e[o].actionUrl=this.applyUrl(e[o].applyUrl,e[o]),e[o].actionEventName="apply_click"),e[o].eventName=i);return e}},e.prototype.applyUrl=function(e,t){if(e){var i=e;i=-1==e.indexOf("http")?this.getBaseUrl()+i:i;var o=this.cookieManager.get("ext_trk");return t.hasOwnProperty("externalTracking")&&("true"==t.externalTracking||1==t.externalTracking)&&o&&(i+=-1!=i.indexOf("?")?"&":"?",i+=o),i}},e.prototype.isCrawlerUserAgent=function(){var e=window.navigator.userAgent,t=!1,i=this.getSiteSettings("crawlerUserAgents");if(i){t=new RegExp(i,"i").test(e.toLowerCase())}return t},e.prototype.getRootDomain=function(){return this.phenomAppManager.getRootDomain()||this.phenomAppManager.getBaseDomain()},e.prototype.getCdnUrl=function(){return this.phenomAppManager.getCdnUrl()},e.prototype.getTranslations=function(){return this.phenomAppManager.getTranslations()},e.prototype.getSegmentedUserState=function(){return this.phenomAppManager.getSegmentedUserState()},e.prototype.getWidgetAssetsBaseUrl=function(e,t,i,o){return[this.getCdnUrl(),o?this.phenomAppManager.getRefNum():"common","assets/images/widgets",e,t,i].join("/")},e.prototype.getPlatformAssetsBaseUrl=function(){return[this.phenomAppManager.getCdnUrl(),"common/js/vendor/"].join("/")},e.prototype.prepareMultiSearchJobCountObj=function(e,t){var i=void 0;if(e.key&&"queryParams"==e.key){var o="query"+this.queryCount++;i=o,this.jobCountReqObj[e.key]=this.jobCountReqObj[e.key]||{},this.jobCountReqObj[e.key][o]=JSON.parse(e.value)}else e.key&&(i=e.value,this.jobCountReqObj[e.key]=this.jobCountReqObj[e.key]||[],-1==this.jobCountReqObj[e.key].indexOf(e.value)&&this.jobCountReqObj[e.key].push(e.value));i&&t.setAttribute("data-pha-count-idfr",i)},e.prototype.fetchMultiJobCount=function(e,t){var i=this;if((this.isjobCount||t)&&Object.keys(this.jobCountReqObj).length){this.isjobCount=!1;this.jobCountTimeOut=setTimeout(function(){i.getDDO(e,"searchMultiJobCount",i.jobCountReqObj).then(function(t){t&&t.searchMultiJobCount&&t.searchMultiJobCount.data&&(i.eventAggregator.publish("ph:jobCount:set",t.searchMultiJobCount.data.data),Object.keys(i.jobCountReqObj).length&&i.fetchMultiJobCount(e,!0))}),i.jobCountReqObj={},clearTimeout(i.jobCountTimeOut),i.fetchMultiJobCount(e,!0)},250)}},e.prototype.addSubcriptionScript=function(e,t){return-1==Object.keys(this.scriptSubScriptions).indexOf(e)?(this.scriptSubScriptions[e]=[],this.scriptSubScriptions[e].push(t),!0):(this.scriptSubScriptions[e].push(t),!1)},e.prototype.proccessSubscritionScript=function(e){for(var t=0;t<this.scriptSubScriptions[e].length;t++)this.scriptSubScriptions[e][t]();delete this.scriptSubScriptions[e]},e.prototype.getWidgetLangBundle=function(e,t,i,o,n,r){var a=this;return new Promise(function(i,s){var l={},c=[n,e,t,o].join("-"),p=[e,t].join("-"),u=a.phenomAppManager.getTranslations();if(u){l=JSON.parse(JSON.stringify(u.masterData||{}));var d=u[c]||u[p];d?Object.keys(d).forEach(function(e){l[e]=d[e]}):r&&Object.keys(r).forEach(function(e){l[e]||(l[e]=r[e])})}else r&&(l=r);l=a.translationService.replaceSpeChar(l),i(l)})},e.prototype.applyWidgetBundle=function(e,t,i,o,n,r,a,s){var l=this;return this.getWidgetLangBundle(e,t,i,o,a,s).then(function(e){return l.translationService.parseTemplateAndApplyBundle(n,r,e)})},e.prototype.getTranslation=function(e,t,i){return t=t||{},this.translationService.renderLiteral(e,t,i)},e.prototype.getMergeProfileProgress=function(){return!this.mergeProfileProgress&&(this.mergeProfileProgress=!0,!0)},e.prototype.getQueryParam=function(e){var t=location.search;t=t.substr(1);for(var i=t.split("&"),o=0;o<i.length;o++){var n=i[o];if(n=n.split("="),n.length>1&&n[0]==e)return decodeURIComponent(n[1])}},e.prototype.getQueryParams=function(){var e=location.search;return e=e.substr(1)},e.prototype.getUrlObjFromString=function(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}},e.prototype.detectFeature=function(e,t){return this.phenomAppManager.detectFeature(e,t)},e.prototype.focusElement=function(e,t,i){setTimeout(function(){e&&i.querySelector(e)&&i.querySelector(e).focus()},t||0)},e.prototype.smoothScroll=function(e,t,i,o){var n=this,r=e||0,a=void 0,s=void 0;o=parseInt(o),i?t&&r<t&&(a="top"):t&&r>t&&(a="bottom"),s=setTimeout(function(){window.scrollTo(0,r),clearTimeout(s),"top"==a?n.smoothScroll(r+o,t,i,o):"bottom"==a&&n.smoothScroll(r-o,t,i,o)},10)},e.prototype.getNearestSectionElemOffsetTop=function(e,t){return e?"SECTION"==e.nodeName||"BODY"==e.nodeName?"top"==t?e.offsetTop:"bottom"==t?e.offsetTop+e.offsetHeight:e.offsetTop+e.offsetHeight/2:this.getNearestSectionElemOffsetTop(e.parentElement,t):0},e.prototype.handlingDropzoneCsrfToken=function(){var e=this;y&&y.default&&y.default.prototype.on&&y.default.prototype.on("sending",function(t){!t.hasOwnProperty("skipCsrfAdd")&&t.xhr&&e.getCsrfToken()&&t.xhr.setRequestHeader("X-CSRF-TOKEN",e.getCsrfToken())})},e.prototype.applyStylesToElem=function(e,t){e.forEach(function(e){var i=Object.keys(e)[0],o=e[i];t.style[i]=o})},e.prototype.applyFSBlockToPageContainer=function(){if(this.phenomAppManager.getPageName()){var e=this.phenomAppManager.getPageName(),t=this.getSiteSettings("fsBlockConfig");if(t.strictPages&&t.strictPages.indexOf(e)&&document.querySelector('[class="ph-page-container"]')){document.querySelector('[class="ph-page-container"]').classList.add("fs-block")}}},e.prototype.applyFSBlockToElement=function(e,t){var i=this.getSiteSettings("fsBlockConfig");if(i&&(i.widgetTags=i.widgetTags||[],-1==i.widgetTags.indexOf(t)))for(var o=i.trackFSselctors&&i.trackFSselctors[this.elementTag],n=e.querySelectorAll?e.querySelectorAll(".au-target"):[],r=0;r<n.length;r++){var a=n[r];a.classList.contains("fs-block")||this.isFsBlockSkipRequired(o,a)||a.classList.add("fs-block")}},e.prototype.isFsBlockSkipRequired=function(e,t){if(e)for(var i in e){var o=e[i]||[];switch(i){case"class":for(var n=t.classList,r=0;r<n.length;r++)if(o.indexOf(-1!=n[r]))return!0;break;default:var a=t.getAttribute(i)
;return-1!=o.indexOf(a)}}return!1},e.prototype.setIsGdprConsentClosed=function(e){this.isGdprConsentClosed=e},e.prototype.getGdprConsentCloseStatus=function(){return this.isGdprConsentClosed},e}();e.CommonService=A=v([(0,i.autoinject)(),b("design:paramtypes",[t.HttpClient,o.EventAggregator,r.LocalStorageAPI,a.UrlManager,s.TrackingManager,l.PhenomAppManager,c.LocalStorageContext,u.ProfileLoginService,p.TranslationService,d.CookieManager,f.CaptchaInjector])],A)}),define("ph-common/local-storage",["exports","./ph-log"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorageAPI=void 0;var o=void 0,n=void 0;e.LocalStorageAPI=function(){function e(t){i(this,e),this.isLocalStorageAvailable()}return e.prototype.setItem=function(e,i){if(o)try{o.setItem(e,JSON.stringify(i))}catch(e){this.isQuotaExceeded(e)&&t.logger.error("Local Storage full")}},e.prototype.getItem=function(e){if(o){var t=o.getItem(e);return t=JSON.parse(t)}},e.prototype.removeItem=function(e){o&&o.removeItem(e)},e.prototype.setSessionStorageItem=function(e,i){if(n)try{"string"==typeof i?n.setItem(e,i):n.setItem(e,JSON.stringify(i))}catch(e){this.isQuotaExceeded(e)&&t.logger.error("Session Storage full")}},e.prototype.getSessionStorageItem=function(e){if(n){var t=n.getItem(e);try{t=JSON.parse(t)}catch(e){}return t}},e.prototype.removeSessionStorageItem=function(e){n&&n.removeItem(e)},e.prototype.isLocalStorageAvailable=function(){o=!("undefined"==typeof Storage||!window.localStorage)&&window.localStorage,n=!("undefined"==typeof Storage||!window.sessionStorage)&&window.sessionStorage},e.prototype.isQuotaExceeded=function(e){var t=!1;return e&&(e.code?22==e.code?t=!0:1014==e.code&&"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0):-2147024882===e.number&&(t=!0)),t},e}()}),define("ph-common/ph-log",["exports","aurelia-framework"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logger=void 0;e.logger=t.LogManager.getLogger("PhenomHub")}),define("ph-common/url-manager",["exports","aurelia-framework","./ph-app-model-manager","./index"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.UrlManager=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.UrlManager=function(){function e(t){n(this,e),this.phenomAppManager=t,this.pageKeyHandlers={category:this.handleCategoryUrl,job:this.handleJobUrl,"search-results":this.handleSearchResultsUrl,event:this.handleEventUrl},this.getFormattedCategoryName=function(e){return e.replace(/[\$_|`$\-+:,\/#&\[\]@\{\}*%.()?–]/g,"").replace(/ /g,"-").toLowerCase()},this.handleSearchResultsUrl=function(e,t,i,o){return"?keyword="+i}}return e.prototype.getFormattedTitle=function(e){var t;if(e){var t=e.replace(/[\$_|`$\-+:,\/#&\[\]@\{\}*%.()?–]/g,"-").replace(/ /g,"-").replace(/-+/g,"-");"-"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1))}return t||""},e.prototype.handleSpecialKeys=function(e,t,i,o,n,r){if(this.pageKeyHandlers[t])return this.pageKeyHandlers[t].apply(this,[e,i,o,n,r])},e.prototype.handleCategoryUrl=function(e,t,i,o){var n=this.phenomAppManager.getDDOFromCache("siteConfig");if(n&&n.data&&n.data.categoryUrlMap){var r=n.data.categoryUrlMap;if(r[t.internalId])return[r[t.internalId]];o=[];var a="search-results?category="+encodeURIComponent(t[e]||t.name||"");return o.push(a),o}if("key"==e||"category"==e){var s=this.getFormattedCategoryName(t[e]||t.name||"")+"-jobs";return o.push(s),o}},e.prototype.handleJobUrl=function(e,t,i,o,n){if("jobSeqNo"==e)return o.push(t.jobSeqNo||t.id),o;if("title"==e){var r=t.title_raw||t[e]||"";return n&&(r=r.toLowerCase()),o.push(this.getFormattedTitle(r)),o}},e.prototype.handleEventUrl=function(e,t,i,o,n){if("title"==e){var r=t.title||"";return n&&(r=r.toLowerCase()),o.push(this.getFormattedTitle(r)),o}},e.prototype.getUrl=function(e,t,i,n,r){var a=this,s=[],l=n.split("/");if(t){l.forEach(function(l){if(l.startsWith(":")){var c=l.substring(1);t&&t[c]||o.logger.error("Url replaceable param : "+c+" not found for url : "+n);var p=a.handleSpecialKeys(c,e,t,i,s,r);p?s=p:s.push(t[c])}else s.push(l)});var c=s.join("/");return i&&(c+="?"+i),c}},e}();e.UrlManager=l=a([(0,t.autoinject)(),s("design:paramtypes",[i.PhenomAppManager])],l)}),define("ph-common/ph-app-model-manager",["exports","./index"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomAppManager=void 0;var o="phApp",n="csrfToken";e.PhenomAppManager=function(){function e(){if(i(this,e),window&&window[o]){this.phApp=window[o],this.phApp.inline=this.phApp.inline,void 0===this.phApp.inline&&(this.phApp.inline=!0),this.phApp.ddo=this.phApp.ddo||{},this.phApp.pageGroup=this.phApp.pageGroup||{},this.phApp.ddoRealPath=this.phApp.ddoRealPath||{},this.phApp.sessionParams=this.phApp.sessionParams||{},this.phApp.widgetSettings=this.phApp.widgetSettings||{},this.phApp.siteSettings=this.phApp.siteSettings||{},this.phApp.bundle=this.phApp.bundle||{},this.phApp.validationRules=this.phApp.validationRules||{},this.phApp.nonEditableFields=this.phApp.nonEditableFields||[],this.phApp.pageStateData=this.phApp.pageStateData||{},this.phApp.translations=this.phApp.translations||{},this.phApp.store=this.phApp.store||{},this.phApp.experimentData=this.phApp.experimentData||{},this.phApp.featureDetection=this.phApp.featureDetection||{default:[],a11y:["auto-complete","radio"]};var r=document.getElementById(n);this.phApp.csrfToken=r&&r.innerText||"",t.logger.debug("PHAPP ",this.phApp)}}return e.prototype.hasAbsUrl=function(){return this.phApp.absUrl},e.prototype.useInlineTmpl=function(){return this.phApp.inline},e.prototype.getParam=function(e){return this.phApp[e]},e.prototype.setParam=function(e,t){this.phApp[e]=t},e.prototype.getCommonParams=function(){return{lang:this.phApp.locale,deviceType:this.phApp.deviceType,country:this.phApp.country}},e.prototype.getDDOUrl=function(){return this.phApp.widgetApiEndpoint},e.prototype.getDDOFromCache=function(e){return this.phApp.ddo[e]||this.phApp.pageGroup[e]},e.prototype.getDdoRespFromStore=function(e){return this.phApp.store[e]},e.prototype.setDdoRespToStore=function(e,t){this.phApp.store[e]=t},e.prototype.getRawUrl=function(e){return this.phApp.urlMap[e]},e.prototype.getBaseUrl=function(){return this.phApp.baseUrl},e.prototype.getBaseDomain=function(){return this.phApp.baseDomain},e.prototype.getRefNum=function(){return this.phApp.refNum},e.prototype.getDeviceType=function(){return this.phApp.deviceType},e.prototype.getLocale=function(){return this.phApp.locale},e.prototype.getCountry=function(){return this.phApp.country},e.prototype.getTrackingConfig=function(){return this.phApp.trackingConfig},e.prototype.getRecommendedTrackingConfig=function(){return this.phApp.recommendedTrackingConfig},e.prototype.ddoRealPath=function(e){return this.phApp.ddoRealPath[e]},e.prototype.ddoRealData=function(e,t){var i=this.ddoRealPath(e);return i&&(i=i.split("."),i.forEach(function(e){t&&(t=t[e])})),t},e.prototype.getSessionParams=function(e){if(e&&this.phApp.sessionParams&&this.phApp.sessionParams[e])return decodeURIComponent(this.phApp.sessionParams[e])},e.prototype.getWidgetSettings=function(e){return this.phApp.widgetSettings[e]},e.prototype.getSiteSettings=function(e){return this.phApp.siteSettings[e]},e.prototype.getPageType=function(){return this.phApp.pageType},e.prototype.getPageId=function(){return this.phApp.pageId},e.prototype.getPageName=function(){return this.phApp.pageName},e.prototype.clearDDOFromcache=function(e){e&&this.phApp.ddo[e]&&delete this.phApp.ddo[e]},e.prototype.getLangBundle=function(){return this.phApp.bundle},e.prototype.getValidationRules=function(e){return this.phApp.validationRules[e]||{}},e.prototype.getCdnUrl=function(){return this.phApp.cdnUrl},e.prototype.setLangBundle=function(e){this.phApp.bundle=e||{}},e.prototype.setValidationRules=function(e){this.phApp.validationRules=e||{}},e.prototype.getSiteType=function(){return this.phApp.siteType},e.prototype.setPendingCalls=function(e){this.phApp.pendingCalls=e},e.prototype.getUserSubType=function(){if(this.phApp.ddo&&this.phApp.ddo.validateJwtToken&&this.phApp.ddo.validateJwtToken.data&&this.phApp.ddo.validateJwtToken.data.userSubType)return this.phApp.ddo.validateJwtToken.data.userSubType},e.prototype.getExperimentData=function(){return this.phApp.experimentData},e.prototype.setExperimentData=function(e){this.phApp.experimentData=e},e.prototype.setPageState=function(e){this.phApp.pageState=e},e.prototype.getPageState=function(){return this.phApp.pageState},e.prototype.setPageStateData=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this.phApp.pageStateData[t]=e[t])},e.prototype.getPageStateData=function(){return this.phApp.pageStateData},e.prototype.getRootDomain=function(){return this.phApp.rootDomain},e.prototype.getTranslations=function(){return this.phApp.translations},e.prototype.setCommonContext=function(e){this.phApp.phb=e},e.prototype.getCommonContext=function(){return this.phApp.phb},e.prototype.setEnabledFeature=function(e,t){t=t||"default",this.phApp.featureDetection[t]=this.phApp.featureDetection[t]||[],this.phApp.featureDetection[t].push(e)},e.prototype.detectFeature=function(e,t){return t=t||"default",-1!=this.phApp.featureDetection[t].indexOf(e)},e.prototype.getCsrfToken=function(){return this.phApp.csrfToken},e.prototype.getSegmentedUserState=function(){return this.phApp.pxSegmentState},e}()}),define("ph-common/ph-tracking/tracking-manager",["exports","aurelia-framework","./../index","./../ph-app-model-manager"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TrackingManager=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.TrackingManager=function(){function e(t){n(this,e),this.phenomAppManager=t,this.pageTrackingCommonData={},this.pageTrackingData={},this.trackingConfig={},this.trackingConfig=this.phenomAppManager.getTrackingConfig(),this.pageTrackingCommonData={trait2:this.phenomAppManager.getRefNum(),trait65:this.phenomAppManager.getDeviceType(),trait76:this.phenomAppManager.getPageType()||this.phenomAppManager.getPageName(),trait79:this.phenomAppManager.getLocale(),trait253:this.phenomAppManager.getPageName(),trait258:this.phenomAppManager.getSiteType(),trait263:this.phenomAppManager.getUserSubType()};var i=this.phenomAppManager.getExperimentData();i&&(this.pageTrackingCommonData.experiment=i),this.phenomtrack=window.phenomevent}return e.prototype.storePageTrackEventData=function(e,t){e&&(this.pageTrackingData[e]=t)},e.prototype.getPageTrackEventData=function(e){return this.pageTrackingData[e]},e.prototype.processTrackingEvent=function(e,t,o,n,r){var a=this;n=n||{};var s=this.getPageTrackEventData(t)||r,l={};for(var c in this.pageTrackingCommonData)this.pageTrackingCommonData.hasOwnProperty(c)&&(l[c]=this.pageTrackingCommonData[c]);var p=this.trackingConfig[e];this.trackingConfig.ddoDataPath;if(p)for(var u in p)if(p.hasOwnProperty(u))if("related"!=u&&s)l[u]=s[p[u]];else{var d=p[u];d&&d.ddo&&d.ddo.forEach(function(e){var t=a.phenomAppManager.getDDOFromCache(e.name);if(t){t=a.phenomAppManager.ddoRealData(e.name,t);var i=e.data;if(i)for(var o in i)i.hasOwnProperty(o)&&(l[o]=t[i[o]])}})}if(o)for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f]);for(var c in this.pageTrackingCommonData)this.pageTrackingCommonData.hasOwnProperty(c)&&(l[c]=this.pageTrackingCommonData[c]);i.logger.debug("processTrackingEvent ",l),this.track(e,l)},e.prototype.track=function(e,t){this.phenomtrack&&this.phenomtrack.track(e,t)},e}();e.TrackingManager=l=a([(0,t.autoinject)(),s("design:paramtypes",[o.PhenomAppManager])],l)}),define("ph-common/local-storage-context-model",["exports","aurelia-framework","./local-storage","./ph-app-model-manager","./cookie-manager"],function(e,t,i,o,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorageContext=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},l=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=e.LocalStorageContext=function(){function e(t,i,o){var n=this;r(this,e),this.localStorageAPI=t,this.phenomAppManager=i,this.cookieManager=o,this.recommendationTrackingConfig=this.phenomAppManager.getRecommendedTrackingConfig(),this.contexts={},this.loadJobContext(),window&&(window.addEventListener("beforeunload",function(e){n.supportsonBeforeUnload=!0,n.handleWindowUnload(e)}),window.addEventListener("unload",function(e){n.supportsonBeforeUnload||n.handleWindowUnload(e)}))}return e.prototype.handleWindowUnload=function(e){var t=[this.getRecommStorageKey(),"jobContext"].join("_"),i=[this.getRecommStorageKey(),this.activeContextRef].join("_"),o=[],n=this.contexts[this.activeContextRef];n&&n.forEach(function(e){var t={jobSeqNo:e.jobSeqNo,jobId:e.jobId,title:e.title};e.visibilityType&&(t.visibilityType=e.visibilityType),o.push(t)}),this.localStorageAPI.setItem(t,this.activeContextRef),this.localStorageAPI.setItem(i,o)},e.prototype.loadJobContext=function(){var e=[this.getRecommStorageKey(),"jobContext"].join("_");this.activeContextRef=this.localStorageAPI.getItem(e);var t=[this.getRecommStorageKey(),this.activeContextRef].join("_");this.contexts[this.activeContextRef]=this.localStorageAPI.getItem(t)},e.prototype.jobContext=function(e){if(!e)return this.activeContextRef;this.contexts[e]&&(this.activeContextRef=e)},e.prototype.addJobContext=function(e,t){this.contexts[e]=t},e.prototype.getJobContext=function(e){return this.contexts[e]},e.prototype.getNextAndPrevJobData=function(e){var t={},i=this.contexts[this.activeContextRef],o=-1;if(i)for(var n=0;n<i.length;n++){var r=i[n];if(r.jobSeqNo==e){o=n;break}}if(-1!=o){var a=o-1,s=o+1;return a>=0&&(t.prevJob=i[a]),s<i.length&&(t.nextJob=i[s]),t}},e.prototype.equals=function(e,t,i){var o=!0;return i.forEach(function(i){e[i]!=t[i]&&(o=!1)}),o},e.prototype.addRecommendationTrackCtx=function(e,t){var i=this;if(this.getTrackingCookieStatus()){var o=this.recommendationTrackingConfig[e];o&&(Array.isArray(o)||(o=[o]),o.forEach(function(e){var o=[i.getRecommStorageKey(),e.storageKey].join("_");if(e.storageKey){var n=!1,r=i.localStorageAPI.getItem(o);if(r?r.forEach(function(o){i.equals(o,t,e.ddoKeysToStore)&&(n=!0)}):(i.localStorageAPI.setItem(o,[]),r=i.localStorageAPI.getItem(o)),!n){var a={};e.ddoKeysToStore.forEach(function(e){t[e]&&(a[e]=t[e],a.timeStamp=(new Date).toUTCString())}),r.unshift(a),i.localStorageAPI.setItem(o,r)}}}))}},e.prototype.getRecommendedTrackCtx=function(){var e=this,t={};for(var i in this.recommendationTrackingConfig)if(this.recommendationTrackingConfig.hasOwnProperty(i))if(Array.isArray(this.recommendationTrackingConfig[i]))this.recommendationTrackingConfig[i].forEach(function(i){var o=[e.getRecommStorageKey(),i.storageKey].join("_");t[i.storageKey]=e.localStorageAPI.getItem(o)});else{var o=[this.getRecommStorageKey(),this.recommendationTrackingConfig[i].storageKey].join("_");t[this.recommendationTrackingConfig[i].storageKey]=this.localStorageAPI.getItem(o)}return t},e.prototype.getSpecificTrackCtx=function(e,t){var i=[this.getRecommStorageKey(),e].join("_"),o=void 0;return t?this.localStorageAPI.getSessionStorageItem(i)&&(o=this.localStorageAPI.getSessionStorageItem(i)):this.localStorageAPI.getItem(i)&&(o=this.localStorageAPI.getItem(i)),o},e.prototype.setSpecificTrackCtx=function(e,t,i){if(this.getTrackingCookieStatus()){var o=[this.getRecommStorageKey(),e].join("_");i?this.localStorageAPI.setSessionStorageItem(o,t):this.localStorageAPI.setItem(o,t)}},e.prototype.removeSpecificTrackCtx=function(e,t){var i=[this.getRecommStorageKey(),e].join("_");t?this.localStorageAPI.removeSessionStorageItem(i):this.localStorageAPI.removeItem(i)},e.prototype.getRecommStorageKey=function(){var e=this,t=void 0,i=this.phenomAppManager.getDDOFromCache("siteConfig");if(i&&i.data.siteSettings.recommendationStoargeKeys){var o=i.data.siteSettings.recommendationStoargeKeys,n=[];o.forEach(function(i,o){n.push(e.phenomAppManager.getParam(i)),t=n.join("_")})}else t=[this.phenomAppManager.getCountry(),this.phenomAppManager.getLocale()].join("_");return t},e.prototype.removeRecomContentFromLocalStorage=function(){var e=this;this.getRecommStorageKey();Object.keys(this.getRecommendedTrackCtx()).forEach(function(t,i){e.removeSpecificTrackCtx(t)})},e.prototype.getTrackingCookieStatus=function(){var e=this.cookieManager.get("PHPPPE_GCC");return!e||"d"!=e},e}();e.LocalStorageContext=c=s([(0,t.autoinject)(),l("design:paramtypes",[i.LocalStorageAPI,o.PhenomAppManager,n.CookieManager])],c)}),define("ph-common/cookie-manager",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.CookieManager=function(){function e(){t(this,e)}return e.prototype.get=function(e){var t=this.all();return t&&t[e]?t[e]:null},e.prototype.set=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.encode(e)+"="+this.encode(t);if(null===t&&(i.expiry=-1),i.expiry>=0&&!i.expires){var n=new Date;n.setHours(n.getHours()+i.expiry),i.expires=n}i.path&&(o+="; path="+i.path),i.domain&&(o+="; domain="+i.domain),i.expires&&(o+="; expires="+i.expires.toUTCString()),i.secure&&(o+="; secure"),document.cookie=o},e.prototype.delete=function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.prototype.all=function(){return this.parse(document.cookie)},e.prototype.parse=function(e){var t={},i=e.split(/ *; */),o=void 0;if(""===i[0])return t;for(var n=0;n<i.length;++n)o=i[n].split("="),t[this.decode(o[0])]=this.decode(o[1]);return t},e.prototype.encode=function(e){try{return encodeURIComponent(e)}catch(e){return null}},e.prototype.decode=function(e){try{return decodeURIComponent(e)}catch(e){return null}},e}()}),define("ph-common/ph-translation/ph-translation-service",["exports","aurelia-framework"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationService=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},r=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=[{key:/&lt;/g,value:"<"},{key:/&gt;/g,value:">"},{key:/&amp;/g,value:"&"},{key:/&copy;/g,value:"©"},{key:/&reg;/g,value:"®"},{key:/&ldquo;/g,value:"“"},{key:/&rdquo;/g,value:"”"},{key:/&lsquo;/g,value:"‘"},{key:/&rsquo;/g,value:"’"}],s=e.TranslationService=function(){function e(){i(this,e)}return e.prototype.renderLiteral=function(e,t,i){var o=/\{\{\s*(.*?)\s*\}\}/g,n=/\[\[\s*(.*?)\s*\]\]/g;return e&&"string"==typeof e?(e=e.replace(o,function(e,i){return t[i]||""}),i&&(e=encodeURIComponent(e)),e.replace(n,function(e,t){if(!t)return t})):e},e.prototype.replaceSpeChar=function(e){var t=!1,i=e;if(e&&"object"==(void 0===e?"undefined":o(e))&&Object.keys(e).length)try{e=JSON.stringify(e),t=!0}catch(o){e=i,t=!1}if(e&&"string"==typeof e&&a.forEach(function(t){e=e.replace(t.key,t.value)}),t&&e)try{e=JSON.parse(e)}catch(t){e=i}return e},e.prototype.parseTemplateAndApplyBundle=function(e,t,i){var o=this;return new Promise(function(n,r){if(t){for(var a=t.querySelectorAll("[tkeys]"),s=0;s<a.length;s++)for(var l=a[s],c=l.attributes,p=0;p<c.length;p++){var u=c[p].name,d=c[p].value;if(u.startsWith("tkey")){var f=o.renderLiteral(i[d],e);f&&(u.length>"tkey".length?(u=u.replace("tkey-",""),l.setAttribute(u,f)):l.innerHTML=f)}}n(t.innerHTML)}else r({})})},e}();e.TranslationService=s=n([(0,t.autoinject)(),r("design:paramtypes",[])],s)}),define("ph-common/ph-bot-bridge-manager/profile-login-service",["exports","aurelia-framework","./../ph-app-model-manager","aurelia-event-aggregator","./ph-integration-service","./bot-interface-data"],function(e,t,i,o,n,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileLoginService=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},c=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p="ph:bot:loginStatus",u=e.ProfileLoginService=function(){function e(t,i,o){var n=this;a(this,e),this.phenomAppManager=t,this.eventAggregator=i,this.phIntegrationService=o,this.providerConfig={},this.ddoKeyResponses={},this.ddoKeyLoginResponse={},this.ddoKeyLoginList=["validateJwtToken","validateToken"],this.ddoKeyLogoutList=["jwtLogout","removeProfile"];var r=[];r=r.concat(this.ddoKeyLoginList,this.ddoKeyLogoutList);for(var s=0;s<r.length;s++)!function(e){n.eventAggregator.subscribe(r[e],function(t){var i=!1,o=void 0,a={};if(t){if(-1!=n.ddoKeyLoginList.indexOf(r[e]))i=!0,n.ddoKeyLoginResponse[t.ddoKey]=t.respData&&t.respData[t.ddoKey],o=n.checkUserStatus(t.ddoKey,n.ddoKeyLoginResponse[t.ddoKey]),a.status=o;else if(-1!=n.ddoKeyLogoutList.indexOf(r[e])){i=!0;var s=t.respData&&t.respData[t.ddoKey]&&t.respData[t.ddoKey];s.hasOwnProperty("data")?s.data?a.status=!1:a.status=!0:i=!1}else n.ddoKeyResponses[t.ddoKey]=t.respData&&t.respData[t.ddoKey];if(i){var l=new CustomEvent(p,{bubbles:!0,detail:a});document.dispatchEvent(l)}}})}(s)}return e.prototype.bootstrap=function(e){this.providerConfig=e},e.prototype.loginUrl=function(e){this.providerConfig=this.getSiteSettings("oauth")[e];var t=this.providerConfig.loginUrl,i={rurl:encodeURIComponent(window.location.href),mergeProfile:!0,protocol:window.location.protocol,page:window.location.pathname},o={response_type:this.providerConfig.response_type,client_id:this.providerConfig.clientId,redirect_uri:encodeURIComponent(this.getRootDomain()+this.providerConfig.redirectUri),scope:this.providerConfig.scope,state:encodeURIComponent(JSON.stringify(i))},n=[];for(var r in o)o.hasOwnProperty(r)&&n.push(r+"="+o[r]);n="?"+n.join("&"),t+=n,window.location.href=t},e.prototype.getSiteSettings=function(e){var t=this.phenomAppManager.getDDOFromCache("siteConfig");if(t&&t.data)return e?t.data.siteSettings[e]||t.data[e]:t.data.siteSettings},e.prototype.getRootDomain=function(){return this.phenomAppManager.getRootDomain()||this.phenomAppManager.getBaseDomain()},e.prototype.loginStatus=function(e){var t=this;return new Promise(function(i,o){var n=t.phenomAppManager.getCommonContext(),r=n.getSiteSettings("botConfig"),a=r&&r.loginDDoKey||"validateJwtToken";t.makeDDORequest(a,{}).then(function(o){var n=t.checkUserStatus(a,o);i(n),e&&e(n)})})},e.prototype.checkUserStatus=function(e,t){return!!(t&&t.data&&t.data.loginStatus)&&t.data.loginStatus},e.prototype.fetchFyfSteps=function(e){var t=this;return new Promise(function(i,o){t.makeDDORequest("fyfConfig",{}).then(function(t){var o={};t&&t.data&&Array.isArray(t.data)?o.steps=t.data||[]:t&&t.data&&t.data.steps&&!Array.isArray(t.data)&&(o=t.data||[]);var n={stepType:"authorise",skip:"loggedIn"},r={stepType:"contactInfo",skip:"loggedIn"};o.steps&&o.steps.unshift(n),o.steps&&o.steps.push(r),i(o),e&&e(o)})})},e.prototype.makeFyfProfile=function(e,t,i){var o=e;return o.flowType="find_your_fit",o.editType="mergeProfile",this.makeDDORequest(t,o)},e.prototype.saveProfile=function(e,t){var i=this;return new Promise(function(o,n){i.makeDDORequest("validateJwtToken",{}).then(function(n){var r=i.checkUserStatus("validateJwtToken",n),a="uploadCvMergeFlow";r&&(a="ciProfileUpdate"),i.makeFyfProfile(e,a,t).then(function(e){o(e),t&&t(e)})})})},e.prototype.fetchCategories=function(e){var t=this;return new Promise(function(i,o){t.fetchFyfSteps().then(function(o){t.getCategories(o).then(function(t){i(t),e&&e(t)})})})},e.prototype.fetchProfileData=function(e){return this.fetchRequest("mergedProfileV2",{},e)},e.prototype.fetchTitles=function(e,t){return this.fetchRequest("fyfTitles",e,t)},e.prototype.fetchSkillSuggestions=function(e,t){return this.fetchRequest("fyfSkillSuggestions",e,t)},e.prototype.fetchSkills=function(e,t){return this.fetchRequest("fyfSkills",e,t)},e.prototype.fetchLocations=function(e,t){return this.fetchRequest("fyfLocations",e,t)},e.prototype.fetchWorkExperience=function(e,t){return new Promise(function(e,i){e(r.BotInterfaceData.WORK_EXPERIENCE),t&&t(r.BotInterfaceData.WORK_EXPERIENCE)})},e.prototype.fetchProfileRecomJobs=function(e,t){return this.fetchRequest("profileRecommendations",e,t)},e.prototype.getCategories=function(e){var t=this;return this.makeDDORequest("categories",{}).then(function(i){if(i&&i.data&&i.data.category)return t.getCategoryMasterData(i.data.category,e)})},e.prototype.getCategoryMasterData=function(e,t){var i=this;return this.makeDDORequest("categoryMasterDataV2",{}).then(function(o){return o=o.data||{},i.mergeMasterCatWithSearchCat(o,e,t)})},e.prototype.mergeMasterCatWithSearchCat=function(e,t,i){var o=[],n=[],r=[],a=[],s="default";if(i&&i.steps&&i.steps.length){var l=i.steps.findIndex(function(e){return"categories"==e.stepType});s=i.steps[l].orderType||s}if("default"==s?(o=t,n=e.categories||[]):"custom"==s&&(o=e.categories||[],n=t),o.length){var c=void 0,p=void 0,u=void 0,d=void 0,f=void 0;for(p=0;p<o.length;p++)r.push(o[p].internalId);for(u=0;u<n.length;u++)a.push(n[u].internalId);for(d=0;d<r.length;d++)if(o[d].isRemoveEle=!0,-1!=(c=a.indexOf(r[d]))){o[d].isRemoveEle=!1,f=n[c];for(var h in f)(void 0==o[d][h]&&f.hasOwnProperty(h)||f.hasOwnProperty(h)&&!o[d].hasOwnProperty(h))&&(o[d][h]=f[h])}o.length&&o.forEach(function(e){e.key||(e.key=e.category)})}return o||[]},e.prototype.fetchRequest=function(e,t,i){var o=this;return new Promise(function(n,r){o.ddoKeyResponses&&o.ddoKeyResponses[e]?(n(o.ddoKeyResponses[e]),i&&i(o.ddoKeyResponses[e])):o.makeDDORequest(e,t).then(function(e){n(e),i&&i(e)})})},e.prototype.makeDDORequest=function(e,t){return this.phenomAppManager.getCommonContext().getDDO("",e,t).then(function(t){return t[e]})},e}();e.ProfileLoginService=u=l([(0,t.autoinject)(),c("design:paramtypes",[i.PhenomAppManager,o.EventAggregator,n.PhIntegrationService])],u)}),define("ph-common/ph-bot-bridge-manager/ph-integration-service",["exports","aurelia-framework","./../ph-app-model-manager","aurelia-event-aggregator"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhIntegrationService=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l="ph:isUserLogin",c="ph:isUserLogout",p="validateJwtToken",u="validateToken",d="jwtLogout",f="mergedProfileV2",h="3PCIDToken",g=e.PhIntegrationService=function(){function e(t,i){var o=this;n(this,e),this.phenomAppManager=t,this.eventAggregator=i,this.userData={},this.isUserLoggedIn=function(){return o.makeDDORequest(p,{}).then(function(e){return status=o.checkUserStatus(e),status})},this.getProfileData=function(){var e=["firstName","lastName","email","phone","talentCommunity"],t={};return o.makeDDORequest(f,{}).then(function(i){if(i)return e.forEach(function(e){var o=i[e];o&&("talentCommunity"==e&&o.registered?(t[e]={},t[e].registered=!0):t[e]=o)}),t})},this.getChatBotUniqueId=function(){var e=void 0;return o.makeDDORequest(h,{}).then(function(t){if(t)return e=t})};var r=[p,u,d],a=[d],s=[];s=s.concat(r,a),s.forEach(function(e){o.eventAggregator.subscribe(e,function(t){t&&t.respData&&t.respData[t.ddoKey]&&t.respData[t.ddoKey].data&&(-1!=r.indexOf(e)?(status=o.checkUserStatus(t.respData[t.ddoKey]),o.eventsForLoginStatus(l,status)):-1!=a.indexOf(e)&&o.eventsForLoginStatus(c,t.respData[t.ddoKey].data))})}),window&&(window.phi={},window.phi.isLoggedIn=this.isUserLoggedIn,window.phi.fetchUserData=this.getProfileData,window.phi.fetchPCID=this.getChatBotUniqueId)}return e.prototype.eventsForLoginStatus=function(e,t){var i={},o=void 0;i.status=t,o=new CustomEvent(e,{bubbles:!0,detail:i}),document.dispatchEvent(o)},e.prototype.makeDDORequest=function(e,t){return this.phenomAppManager.getCommonContext().getDDO("",e,t).then(function(t){
return t[e]})},e.prototype.checkUserStatus=function(e){return!!(e&&e.data&&e.data.loginStatus)&&e.data.loginStatus},e}();e.PhIntegrationService=g=a([(0,t.autoinject)(),s("design:paramtypes",[i.PhenomAppManager,o.EventAggregator])],g)}),define("ph-common/ph-bot-bridge-manager/bot-interface-data",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),(e.BotInterfaceData=function e(){t(this,e)}).WORK_EXPERIENCE={results:[{displayName:"0-3",min:0,max:3},{displayName:"4-8",min:4,max:8},{displayName:"9-14",min:9,max:14},{displayName:"15+",min:15,max:100}]}}),define("ph-common/ph-captcha/ph-captcha-injector",["exports","aurelia-framework","./../ph-app-model-manager"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CaptchaInjector=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s={useCaptcha:!1,scriptSrc:"https://www.google.com/recaptcha/api.js?render=explicit&hl={{locale}}",siteKey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",divId:"ph-custom-captcha"},l=e.CaptchaInjector=function(){function e(t){var i=this;o(this,e),this.phenomAppManager=t,this.captchaCallback=function(e,t,o){if(!window.grecaptcha)return void e("");t||(t="ph-custom-captcha"),o||(o="submit");var n=i.renderCaptcha(e,t);document.getElementById(t).setAttribute("data-captcha-widgetId",n),window.grecaptcha.execute(n,{action:o})}}return e.prototype.injectCaptcha=function(e){window&&(null==window.phc&&(window.phc={}),window.phc.captchaCallback=this.captchaCallback);var t=e.getSiteSettings("captchaConfig"),i=e.getSiteSettings("captchaConfigTenant");s=this.mergeConfig(s,t),s=this.mergeConfig(s,i),s.scriptSrc=s.scriptSrc.replace("{{locale}}",this.phenomAppManager.getLocale()),s&&1==s.useCaptcha&&this.addPageToScript(s.scriptSrc,"captcha-script-id")},e.prototype.addPageToScript=function(e,t){var i=void 0;try{i=null!=document.querySelector("#"+t)}catch(e){console.warn(e)}if(!i){var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("async",""),o.setAttribute("src",e),o.setAttribute("id",t),document.body.appendChild(o)}},e.prototype.mergeConfig=function(e,t){if(!t)return e||{};var i=Object.keys(t);return t&&i.length&&i.forEach(function(i){e[i]=t[i]}),e},e.prototype.renderCaptcha=function(e,t){window.grecaptcha||e("");var i=document.getElementById(t);if(!i){var o=document.createElement("div");o.setAttribute("id",t),document.body.appendChild(o),i=document.getElementById(t)}i&&i.style&&(i.style.zIndex="100");var n=i.getAttribute("data-captcha-widgetId");return n?(window.grecaptcha.reset(n),n):window.grecaptcha.render(t,{sitekey:s.siteKey,size:"invisible",callback:e})},e}();e.CaptchaInjector=l=r([(0,t.autoinject)(),a("design:paramtypes",[i.PhenomAppManager])],l)}),define("ph-common/geo-location-service",["exports","aurelia-framework","aurelia-event-aggregator"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoLocationService=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s={"errors.location.unsupportedBrowser":"Browser does not support location services","errors.location.permissionDenied":"You have rejected access to your location","errors.location.positionUnavailable":"Unable to determine your location"},l=e.GeoLocationService=function(){function e(t){var i=this;o(this,e),this.eventAggregator=t,this.eventAggregator.subscribe("GeoLocation",function(e){i.geoLocationData=e,i.askForLocation(e)})}return e.prototype.askForLocation=function(e){return this.geoLocationData&&this.eventAggregator.publish("GeoLocationDetails",this.geoLocationData),this.geoLocationData},e.prototype.getGeoLocation=function(){var e={enableHighAccuracy:!0,maximumAge:0},t=this;return new Promise(function(i,o){function n(e){t.geoLocationData=e,i(e)}function r(e){o(e.message)}t.geoLocationData&&i(t.geoLocationData),window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(n,r,e):o(s["errors.location.unsupportedBrowser"])})},e}();e.GeoLocationService=l=r([(0,t.autoinject)(),a("design:paramtypes",[i.EventAggregator])],l)}),define("ph-common/ph-widget",["exports","aurelia-framework","aurelia-dependency-injection","aurelia-event-aggregator","./index","./ph-modal-dialog","./ph-fyf-event-tracker","./ph-a11y/ph-ally-layer-handler","./ph-im-validation-rules"],function(e,t,i,o,n,r,a,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomWidget=void 0;var u=c(r),d=c(a),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h={recomJobsBrowsingHistory:"jobRecommendations",browserRecomContent:"jobRecommendations",recomJobsLinkedinProfile:"jobRecommendations",getLinkedInProfileRecom:"jobRecommendations",profileRecomContent:"jobRecommendations",refineSearchIM:"refineSearch"},g={"ph-facets-v1":["ph-search-results-v1","ph-search-results-v2"]};e.PhenomWidget=function(){function e(t,r,a){var c=this;p(this,e),this.element=t,this.commonService=r,this.elementTag=a,this.view="default",this.template="",this.showLoader=!0,this.wdgt={},this.configuredDDOKeys=[],this.currSlideData=[],this.currSlide=0,this.entriesPerSlide=6,this.widgetBundle={},this.ddoRespToStoreList=["jobDetail","validateJwtToken"],this.childWidgetGroupData={childWidgetData:{},childWidgetDataArr:[],childSubscriptions:{},childSubscriptionsCount:0,timeoutPromise:void 0},this.handleChildData=function(e,t,i){c.childWidgetGroupData.childWidgetData[t.id]={tag:t.tag,status:e,count:t.dataCountFn?t.dataCountFn():0,data:t.dataFn?t.dataFn():[]},c.childWidgetGroupData.childWidgetDataArr.push(c.childWidgetGroupData.childWidgetData[t.id]),c.childWidgetGroupData.childWidgetDataArr.sort(function(e,t){return t.count-e.count}),c.childWidgetGroupData.childSubscriptionsCount<=0&&c.childWidgetGroupData.resolve&&(clearTimeout(c.childWidgetGroupData.timeoutPromise),c.childWidgetGroupData.resolve({data:c.childWidgetGroupData.childWidgetDataArr,obj:c.childWidgetGroupData.childSubscriptions}))},this.tagName=a,this.slotContent=this.element.innerHTML,this.eventAggregator=i.Container.instance.get(o.EventAggregator);var u=this.eventAggregator;if(this.allyLayerHandler=i.Container.instance.get(s.AllyLayerHandler),this.instanceId=this.element.getAttribute("instance-id"),this.widgetUniqueId=[a,this.instanceId].join("-"),"internal"==this.commonService.getParam("siteType")){var d=i.Container.instance.get(l.ImValidationRules);this.imValidationRulesPromise=d.validationRulesPromise}u.subscribe(this.commonService.getErrorChannel(this.elementTag),function(e){e.avoidWidgetHideOnFail||c.onError(e)}),u.subscribe(this.commonService.getSuccessChannel(this.elementTag),function(e){var t=e.successPromise,i=e.ddoKey;c.configuredDDOKeys.push(i),t?t.then(function(t){c.fetchEventResponse(t,i,e.elementTag),c.blogPageContentFix(i)}):e.respData&&c.fetchEventResponse(e.respData,i,e.elementTag)});i.Container.instance.get(n.PhenomTracker)}return e.prototype.fetchEventResponse=function(e,t,i){var o=this;this.eventAggregator.publish(t,{respData:e,ddoKey:t}),setTimeout(function(){o.addJobContext()},200),-1!=this.ddoRespToStoreList.indexOf(t)&&this.commonService.setDdoRespToStore(t,e[t]);var n=e&&(e[t]||e[h[t]]);n&&n.eid&&(this.eid=n&&n.eid,g[i]&&(this.commonService.elementTagLevelEid[i]=this.eid,g[i].forEach(function(e){o.commonService.elementTagLevelEid[e]=o.eid})))},e.prototype.openDialogPopup=function(e,t,i,o,n,r,a){u.default.OpenDialogList.length>0&&!n&&u.default.closeCurrentDialog();var s=void 0;if("string"==typeof e?s=this.element.querySelector("."+e):"object"===(void 0===e?"undefined":f(e))&&(s=e),i){new u.default.Dialog(s,t,i,r,a)}else{new u.default.Dialog(s,t)}},e.prototype.closeDialogPopup=function(e){u.default.closeCurrentDialog()},e.prototype.focusElement=function(e,t,i){var o=i||this.element;this.commonService.focusElement(e,t,o)},e.prototype.focusFormError=function(){this.focusElement(".error.sr-only:not(.aurelia-hide)",50)},e.prototype.raiseEvent=function(e,t){e&&e.trim().length>0&&t&&this.eventAggregator.publish(e,t)},e.prototype.subscribeToEvent=function(e,t){e&&e.trim().length>0&&t&&this.eventAggregator.subscribe(e,t)},e.prototype.raiseDataFetchEvent=function(e){var t=(this.instanceId,[this.widgetUniqueId,"fetch-data"].join(":"));this.raiseEvent(t,e||{})},e.prototype.groupByChildrenData=function(e){var t=this;return e=e||2e3,new Promise(function(i,o){t.childWidgetGroupData.resolve=i,t.childWidgetGroupData.reject=o,t.childWidgetGroupData.timeoutPromise=setTimeout(function(){i({data:t.childWidgetGroupData.childWidgetDataArr,obj:t.childWidgetGroupData.childSubscriptions})},e);var n=t.element.querySelectorAll("section.ph-widget div[as-element]");if(n&&n.length)for(var r=0;r<n.length;r++){var a=n[r],s=a.getAttribute("data-widget")||"",l=[s,a.getAttribute("instance-id")||""].join("-"),c=void 0,p=void 0,u=void 0;a.au&&a.au.controller&&a.au.controller.viewModel&&(c=a.au.controller.viewModel.getDataCount,p=a.au.controller.viewModel.getData,u=a.au.controller.viewModel.isLocalDataSourceFn),u&&u()||function(){t.childWidgetGroupData.childSubscriptions[l]={tag:s,id:l,dataCountFn:c,dataFn:p},t.childWidgetGroupData.childSubscriptionsCount++;var e=[l,"fetch-data"].join(":");t.subscribeToEvent(e,function(i){var o=e.substring(0,e.lastIndexOf(":")),n=t.childWidgetGroupData.childSubscriptions[o];n&&(t.childWidgetGroupData.childSubscriptionsCount--,t.handleChildData("success",n,i))})}()}})},e.prototype.getElement=function(){return this.element},e.prototype.onError=function(e){this.hideContainer()},e.prototype.hideContainer=function(){this.element.style.display="none"},e.prototype.showContainer=function(){this.element.style.display="block"},e.prototype.hideLoader=function(){this.showLoader=!1},e.prototype.unhideLoader=function(){this.showLoader=!0},e.prototype.populateTrackingConfig=function(e){this.trackingCfg=e},e.prototype.getTemplateUrl=function(){if(!this.commonService.useInlineTmpl())return void(this.tmplUrl=this.commonService.getTemplateUrl(this.elementTag,this.view));var e=document.getElementById(this.elementTag+"-"+this.view);if(e&&(this.template=e.innerHTML,this.slotContent&&this.slotContent.trim().length)){var i=document.createElement("div");i.innerHTML=this.slotContent;var o=document.createElement("div");o.innerHTML=this.template,o.querySelector("ph-slot")&&i.querySelector("au-content")&&(o.querySelector("ph-slot").innerHTML=i.querySelector("au-content").innerHTML,this.template=o.innerHTML)}this.template&&0!=this.template.trim().length||window.pht&&(this.template=window.pht[this.elementTag+"-"+this.view],!this.template&&this.element&&this.element.attributes&&this.element.attributes["data-tmpl-type"]&&"inline"==this.element.attributes["data-tmpl-type"].value&&(this.template=this.element.innerHTML)),(!this.template||this.template.trim&&0==this.template.trim().length)&&(this.getCardHtml&&(this.template=this.getCardHtml()),this.getNestedHtml&&(this.template=this.getNestedHtml())),this.template&&-1==this.template.trim().indexOf("<template")&&(this.template="<template>"+this.template+"</template>"),(!this.template||this.template.trim&&0==this.template.trim().length)&&(this.template="<template></template>"),-1==this.template.trim().indexOf("<template")&&(this.template="<template>"+this.template+"</template>"),this.tmplUrl=new t.InlineViewStrategy(""+this.template)},e.prototype.tmplChanged=function(e,t){this.view=e},e.prototype.subscribeToTrackingEvents=function(e){e&&e.addEventListener("click",function(e){e.phTarget||(e.phTarget=e.currentTarget)})},e.prototype.handleTrackEvents=function(e){var t=e.phTarget,i=void 0,o=void 0;if(this.eid=this.fetchEid(),!o&&e&&e.target){for(var r=e.target,a=r.getAttribute("as-element");r&&!a;)r=r.parentElement,a=r&&r.getAttribute("as-element");o=a,i=this.fetchWidgetInfo(r,o),this.commonService.trackWidgetInfo=i}if(t&&t.getAttribute){var s=t.getAttribute("data-ph-tevent-name")||t.getAttribute("ph-tevent");o=t.getAttribute("ph-tag")||o;var l=o==this.tagName;if(s&&l){var c=t.getAttribute("ph-tref");n.logger.debug("Found an event to be tracked ... ",t,s,c);var p={},u={};p.params=i.params||{},this.eid&&(u.eid=this.eid);for(var d=t.attributes,f=0;f<d.length;f++){var h=d[f];if(h.name.startsWith("data-ph-tevent-attr-")){var g=h.name;g=g.replace("data-ph-tevent-attr-",""),p[g]=h.value}}var y=this.commonService.getPageTrackEventData(c)||{};if(y&&y.jobSeqNo&&p.params.widgetId){var m=this.commonService.localStorageContext.getJobContext(p.params.widgetId);if(m&&m.length){var v=m.findIndex(function(e){return e.jobSeqNo==y.jobSeqNo});-1!=v&&(p.params.position=v+1,p.params.title=m[v].title)}if(-1!=p.params.widgetId.indexOf("ph-search-results")){this.searchParams&&this.searchParams.from>0?p.params.page=Math.ceil(this.searchParams.from/this.pageSize)+1:p.params.page=1,this.searchParams&&(p.params.sortBy=this.searchParams.sortBy,p.params.subsearch=this.searchParams.subsearch);var b=this.pageSize*(p.params.page-1)+(p.params.position||0);p.params.searchPosition=b,this.searchKeyword&&(p.params.keyword=this.searchKeyword)}if("job"==this.commonService.phenomAppManager.getPageName()){var S=this.commonService.getDdoRespFromStore("jobDetail");S&&S.data&&S.data.job&&(p.params.parentTitle=S.data.job.title)}}this.commonService.processTrackingEvent(s,c,p,u)}}},e.prototype.getView=function(e){var t=e||this.element;return t&&t.getAttribute("original-view")?t.getAttribute("original-view"):this.view},e.prototype.getWidgetName=function(e){return this.commonService.getWidgetName(e,this.elementTag)},e.prototype.handleRecommendationTrackCtx=function(e){var t=e.phTarget;if(t&&t.getAttribute){var i=t.getAttribute("ph-click-ctx");if(i){var o=t.getAttribute("ph-tref");this.commonService.addRecommendationTrackCtx(o,i)}}},e.prototype.attached=function(){var e=this;if(this.populateWidgetBundle(),this.getTemplateUrl(),this.element.hasAttributes&&this.element.hasAttributes())for(var t=this.element.attributes,i=0;i<t.length;i++)this.wdgt[t[i].name]=t[i].value;this.element.addEventListener("click",function(t){e.handleTrackEvents(t),e.handleRecommendationTrackCtx(t),e.elementTag&&e.commonService.jobContext(e.elementTag)}),this.wdgt["per-slide"]&&(this.entriesPerSlide=this.wdgt["per-slide"]),this.applyHotfix()},e.prototype.getUrl=function(e,t,i,o,n){var r=this.getUrlQueryString(e,t,i,o,n);return n=n||this.commonService.getUrl(t,i,r)},e.prototype.getUrlQueryString=function(e,t,i,o,n){e&&e.setAttribute&&e.setAttribute("ph-click-ctx",t),e&&e.getAttribute&&e.getAttribute("ph-tevent")&&(this.subscribeToTrackingEvents(e),e.setAttribute("ph-tref",(new Date).getTime()+(65536*(1+Math.random())|0).toString(16).substring(0)),e.setAttribute("ph-tag",this.tagName),this.commonService.storePageTrackEventData(e.getAttribute("ph-tref"),i));var r=void 0;if(o)try{var a="";o=o.trim();var s="&"+o,l=/&[a-zA-Z0-9\s]+\=/g,c=s.match(l);if(c){for(var p=s.split(l),u=0;u<c.length;u++){var d=c[u];d&&p[u+1]&&(a+=d+encodeURIComponent(p[u+1]))}a=a.replace("&","")}r=a}catch(e){console.warn("ph-widget:getUrl:"+e)}return r},e.prototype.getSearchKeyword=function(){var e=location.search;e=e.substr(1);for(var t=e.split("&"),i=0;i<t.length;i++){var o=t[i];if(o=o.split("="),o.length>1&&-1!=["keywords","q"].indexOf(o[0]))return decodeURIComponent(o[1])}},e.prototype.getQueryParam=function(e){return this.commonService.getQueryParam(e)},e.prototype.getQueryParams=function(){return this.commonService.getQueryParams()},e.prototype.getQueryParamsMap=function(){var e={},t=location.search;t=t.substr(1);for(var i=t.split("&"),o=0;o<i.length;o++){var n=i[o];n=n.split("="),n.length>1&&(e[n[0]]=n[1])}return e},e.prototype.getDateFormat=function(e){var t=this.commonService.getSiteSettings("l10n");return t&&t.dateFormat?t.dateFormat:this.commonService.getDateFormat(e)},e.prototype.getContextData=function(){},e.prototype.getSlideData=function(){var e=this.getContextData();if(e){var t=0,i=0;e.length<=this.entriesPerSlide?this.totalSlides=1:e.length%this.entriesPerSlide==0?this.totalSlides=parseInt(e.length/this.entriesPerSlide):this.totalSlides=parseInt(e.length/this.entriesPerSlide)+1,this.currSlide>=0&&this.currSlide<this.totalSlides&&(t=this.currSlide*this.entriesPerSlide,i=e.length%this.entriesPerSlide!=0&&this.currSlide==this.totalSlides-1?this.currSlide*this.entriesPerSlide+e.length%this.entriesPerSlide:(this.currSlide+1)*this.entriesPerSlide,this.currSlideData=e.slice(t,i))}},e.prototype.goToSlide=function(e){e>this.currSlide?this.addLeftAnimationClasses():e<this.currSlide&&this.addRightAnimationClasses(),this.currSlide=e,this.getSlideData()},e.prototype.goToNextSlide=function(){this.currSlide<this.totalSlides&&(this.currSlide=this.currSlide+1,this.goToSlide(this.currSlide))},e.prototype.goToPrevSlide=function(){this.currSlide>0&&(this.currSlide=this.currSlide-1,this.goToSlide(this.currSlide))},e.prototype.cleanupAnimationClasses=function(){this.element.classList&&(this.element.classList.remove("animated"),this.element.classList.remove("slideInLeft"),this.element.classList.remove("slideInRight"))},e.prototype.addLeftAnimationClasses=function(){this.cleanupAnimationClasses(),this.element.classList&&(this.element.classList.add("animated"),this.element.classList.add("slideInLeft"))},e.prototype.addRightAnimationClasses=function(){this.cleanupAnimationClasses(),this.element.classList&&(this.element.classList.add("animated"),this.element.classList.add("slideInRight"))},e.prototype.getWidgetAssetsBaseUrl=function(e){var t=this.element.getAttribute("theme")||"default";return this.commonService.getWidgetAssetsBaseUrl(this.elementTag,this.view,t,e)},e.prototype.loadScript=function(e,t,i,o,n,r){var a=this,s=this.commonService.getSiteSettings("mapBoxGlScript")||"mapbox-gl-v1.js";if(e&&e.length){-1!=e.indexOf("mapbox-gl-v1.js")?e=e.replace("mapbox-gl-v1.js",s):-1!=e.indexOf("mapbox-gl.js")&&(e=e.replace("mapbox-gl.js",s));var l=!1;if(i.forEach(function(e){window[e]&&(l=!0)}),l)return void t();if(this.commonService.addSubcriptionScript(e,t)){var c=document.createElement("script");c.type="text/javascript",c.async=!o,c.defer=!n,c.src=e,t&&(c.onload=function(){i.forEach(function(e){window[e]&&(l=!0),l||(require&&require.defined?require.defined(e)&&(l=!0):i.forEach(function(e){window[e]=e}))}),setTimeout(function(){a.commonService.proccessSubscritionScript(e)},100)});var p=r||document.getElementsByTagName("script")[0];p.parentNode.insertBefore(c,p)}}},e.prototype.getLocalWidgetBundle=function(){return null},e.prototype.applyWidgetBundleToTmpl=function(e,t,i){i=this.getLocalWidgetBundle();var o=this.element.querySelector("#"+e),n=void 0;o||(o=this.element.querySelector("."+e)),n=o.cloneNode(!0);var r=this.element.getAttribute("theme")||"default",a=this.element.getAttribute("original-view")||"default",s=this.element.getAttribute("instance-id")||"",l=this.commonService.getPageId();return this.commonService.applyWidgetBundle(this.elementTag,a,r,s,t,n,l,i)},e.prototype.populateWidgetBundle=function(){var e=this,t=this.element.getAttribute("theme")||"default",i=this.element.getAttribute("original-view")||"default",o=this.element.getAttribute("instance-id")||"",n=this.commonService.getPageId();this.commonService.getWidgetLangBundle(this.elementTag,i,t,o,n,this.getLocalWidgetBundle()).then(function(t){e.widgetBundle=t})},e.prototype.addJobContext=function(){n.logger.warn("called no-op implementation of addJobContext.If the widget holds jobs data, provide an implementation")},e.prototype.trackWidgetClick=function(e,t,i){var o=this.fetchWidgetInfo();i&&(o.params.parentWidgetName=i),this.commonService.processTrackingEvent(e,void 0,o,{},t)},e.prototype.fetchWidgetInfo=function(e,t){var i={};return i.params={widgetId:t||this.elementTag,widgetview:this.getView(e),widgetName:this.getWidgetName(e)},this.fetchEid()&&(i.params.eid=this.eid),i},e.prototype.fetchEid=function(){return this.eid=this.eid||this.commonService.elementTagLevelEid[this.elementTag]},e.prototype.isVisibleAction=function(e,t){return-1!==e.findIndex(function(e){return e===t})},e.prototype.getTranslation=function(e,t){return this.commonService.getTranslation(e,t)},e.prototype.hasFeature=function(e,t){return this.commonService.detectFeature(e,t)},e.prototype.applyHotfix=function(){-1==this.elementTag.indexOf("find-your-fit-container")&&-1==this.elementTag.indexOf("find-your-fit")||this.trackingLocally||(this.fyfTracker=new d.default(this))},e.prototype.blogPageContentFix=function(e){var t=this;-1!==["getAllArticlesMetaData","getSimilarArticles"].indexOf(e)&&setTimeout(function(){for(var e=t.element.querySelectorAll(".article-name, .article-description"),i=["break-word","break-all"],o=0;o<e.length;o++){var n=t.fetchCompoundStyle("wordBreak",e[o]);-1===i.indexOf(n)&&(t.setInilineStyle("wordBreak",e[o],"break-word"),"break-word"!==t.fetchCompoundStyle("wordBreak",e[o])&&t.setInilineStyle("wordBreak",e[o],"break-all"))}},250)},e.prototype.fetchCompoundStyle=function(e,t){if(e&&t)return window.getComputedStyle&&window.getComputedStyle(t)[e]},e.prototype.setInilineStyle=function(e,t,i){e&&t&&t.style&&(t.style[e]=i)},e.prototype.checkAndEliminateDuplicateEventSubs=function(){var e=this;(this.commonService.getSiteSettings("uniqueEventSubsList")||[]).forEach(function(t){if(e.eventAggregator.eventLookup&&e.eventAggregator.eventLookup.hasOwnProperty(t)){for(var i=e.eventAggregator.eventLookup[t],o=!1,n=[],r=0;r<i.length;r++){o=!1;for(var a=(i[r]||"").toString(),s=r+1;s<i.length;s++)if(a==(i[s]||"").toString()){o=!0;break}o||n.push(i[r])}e.eventAggregator.eventLookup[t]=n}})},e.prototype.detached=function(){(-1!==this.elementTag.indexOf("find-your-fit-container")||-1!=this.elementTag.indexOf("find-your-fit")&&this.fyfTracker)&&(this.fyfTracker.detached(),this.fyfTracker.fyfWidgetRef={},this.fyfTracker.skippedSuggestionsTrackObj={},this.fyfTracker=void 0),this.checkAndEliminateDuplicateEventSubs()},e}()}),define("ph-common/ph-modal-dialog",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=i||{};i.KeyCode={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},i.Utils=i.Utils||{},i.overflowValue="",i.Utils.matches=function(e,t){return Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var i=e.parentNode.querySelectorAll(t),o=i.length;--o>=0&&i.item(o)!==this;);return o>-1}),e.matches(t)},i.Utils.remove=function(e){return e.remove&&"function"==typeof e.remove?e.remove():!(!e.parentNode||!e.parentNode.removeChild||"function"!=typeof e.parentNode.removeChild)&&e.parentNode.removeChild(e)},i.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!=e.rel;case"INPUT":return"hidden"!=e.type&&"file"!=e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},i.Utils.getAncestorBySelector=function(e,t){if(!i.Utils.matches(e,t+" "+e.tagName))return null;for(var o=e,n=null;null===n;)i.Utils.matches(o.parentNode,t)?n=o.parentNode:o=o.parentNode;return n},i.Utils.hasClass=function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},i.Utils.addClass=function(e,t){i.Utils.hasClass(e,t)||(e.className+=" "+t)},i.Utils.removeClass=function(e,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ").trim()};var i=i||{};i.Utils=i.Utils||{},function(){i.Utils.IgnoreUtilFocusChanges=!1,i.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var o=e.childNodes[t];if(i.Utils.attemptFocus(o)||i.Utils.focusFirstDescendant(o))return!0}return!1},i.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var o=e.childNodes[t];if(i.Utils.attemptFocus(o)||i.Utils.focusLastDescendant(o))return!0}return!1},i.Utils.attemptFocus=function(e){if(!i.Utils.isFocusable(e))return!1;i.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return i.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},i.OpenDialogList=i.OpenDialogList||new Array(0),i.getCurrentDialog=function(){if(i.OpenDialogList&&i.OpenDialogList.length)return i.OpenDialogList[i.OpenDialogList.length-1]},i.closeCurrentDialog=function(){var e=i.getCurrentDialog();return!!e&&(e.close(),!0)},i.handleEscape=function(e){(e.which||e.keyCode)===i.KeyCode.ESC&&i.closeCurrentDialog()&&(document.body.style.overflow=i.overflowValue,e.stopPropagation())},i.backdropClickHandler=function(e){var t=e.currentTarget&&e.currentTarget.querySelector(".default_dialog"),o=document.querySelector("body");t&&t.contains(e.target)||!document.contains(e.target)||(i.closeCurrentDialog(),o&&o.classList&&o.classList.contains("modal-open")&&o.classList.remove("modal-open"))},i.Dialog=function(e,o,n,r,a){var s=this;this.dialogNode=e,this.dialogNode&&"dialog"!==this.dialogNode.getAttribute("role")&&(this.dialogNode.setAttribute("role","dialog"),console.error("Dialog() requires a DOM element with ARIA role of dialog.")),this.dialogNode&&this.dialogNode.classList.contains("hidden")&&this.dialogNode.classList.remove("hidden"),this.dialogNode&&!this.dialogNode.getAttribute("aria-modal")&&this.dialogNode.setAttribute("aria-modal",!0);if(this.dialogNode&&this.dialogNode.parentNode&&this.dialogNode.parentNode.classList.contains("popup-modal-backdrop")?this.backdropNode=this.dialogNode.parentNode:(this.backdropNode=document.createElement("div"),this.backdropNode.className="popup-modal-backdrop",this.dialogNode&&this.dialogNode.parentNode&&this.dialogNode.parentNode.insertBefore(this.backdropNode,this.dialogNode),this.dialogNode&&this.backdropNode.appendChild(this.dialogNode)),this.backdropNode.classList.add("active"),"string"==typeof o)this.focusAfterClosed=document.getElementById(o);else{if("object"!==(void 0===o?"undefined":t(o)))throw new Error("the focusAfterClosed parameter is required for the aria.Dialog constructor.");this.focusAfterClosed=o}"string"==typeof n?this.focusFirst=document.getElementById(n):"object"===(void 0===n?"undefined":t(n))?this.focusFirst=n:this.focusFirst=null;var l=document.createElement("div");this.preNode=this.dialogNode.parentNode.insertBefore(l,this.dialogNode),this.preNode.tabIndex=0;var c=document.createElement("div");this.postNode=this.dialogNode.parentNode.insertBefore(c,this.dialogNode.nextSibling),this.postNode.tabIndex=0,i.OpenDialogList.length>0&&i.getCurrentDialog().removeListeners(),this.addListeners(),i.OpenDialogList.push(this),r||this.clearDialog(),this.dialogNode.classList.add("default_dialog"),this.focusFirst?setTimeout(function(){s.focusFirst.focus()},100):i.Utils.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,i.overflowValue=document.body.style.overflow,document.body.style.overflow="hidden",this.backdropNode.addEventListener("click",i.backdropClickHandler),!a&&document.addEventListener("keyup",i.handleEscape)},i.Dialog.prototype.clearDialog=function(e){Array.prototype.map.call(this.dialogNode.querySelectorAll("input"),function(e){e.value=""})},i.Dialog.prototype.close=function(){i.OpenDialogList.pop(),this.removeListeners(),i.Utils.remove(this.preNode),i.Utils.remove(this.postNode),this.dialogNode.classList.add("hidden"),this.backdropNode.classList.remove("active"),this.backdropNode.removeEventListener("click",i.backdropClickHandler),this.focusAfterClosed&&this.focusAfterClosed.focus(),document.body.style.overflow=i.overflowValue,i.OpenDialogList.length>0?i.getCurrentDialog().addListeners():document.removeEventListener("keyup",i.handleEscape)},i.Dialog.prototype.replace=function(e,t,o){i.getCurrentDialog();i.OpenDialogList.pop(),this.removeListeners(),i.Utils.remove(this.preNode),i.Utils.remove(this.postNode),this.dialogNode.classList.add("hidden"),this.backdropNode.classList.remove("active");var n=t||this.focusAfterClosed;new i.Dialog(e,n,o)},i.Dialog.prototype.addListeners=function(){document.addEventListener("focus",this.trapFocus,!0)},i.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",this.trapFocus,!0)},i.Dialog.prototype.trapFocus=function(e){if(!i.Utils.IgnoreUtilFocusChanges){var t=i.getCurrentDialog();t.dialogNode.contains(e.target)?t.lastFocus=e.target:(i.Utils.focusFirstDescendant(t.dialogNode),t.lastFocus==document.activeElement&&i.Utils.focusLastDescendant(t.dialogNode),t.lastFocus=document.activeElement)}},window.openDialog=function(e,t,o){new i.Dialog(e,t,o)},window.closeDialog=function(e){var t=i.getCurrentDialog();t.dialogNode.contains(e)&&t.close()},window.replaceDialog=function(e,t,o){var n=i.getCurrentDialog();n.dialogNode.contains(document.activeElement)&&n.replace(e,t,o)}}(),e.default=i}),define("ph-common/ph-fyf-event-tracker",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(i){t(this,e),this.skippedSuggestionsTrackObj={},this.fyfWidgetRef=i,this.init(),this.trackSelectedFieldValues(),this.trackHandleFyfActions(),this.trackNavigationClicks()}return e.prototype.detached=function(){this.init()},e.prototype.init=function(){this.fyfWidgetRef.hdlFyfActions&&(this.fyfWidgetRef.handleFyfActions=this.fyfWidgetRef.hdlFyfActions),this.fyfWidgetRef.clPup&&(this.fyfWidgetRef.closePopup=this.fyfWidgetRef.clPup),this.fyfWidgetRef.ldStp&&(this.fyfWidgetRef.loadStep=this.fyfWidgetRef.ldStp),this.fyfWidgetRef.hndlStpProcess&&(this.fyfWidgetRef.handleStepProcess=this.fyfWidgetRef.hndlStpProcess),this.fyfWidgetRef.setFldVal&&(this.fyfWidgetRef.setFieldValue=this.fyfWidgetRef.setFldVal),this.fyfWidgetRef.slctSuggestions&&(this.fyfWidgetRef.selectSuggestions=this.fyfWidgetRef.slctSuggestions),
this.fyfWidgetRef.rmvSlctdData&&(this.fyfWidgetRef.removeSelectedData=this.fyfWidgetRef.rmvSlctdData)},e.prototype.trackSelectedFieldValues=function(){var e=this;this.fyfWidgetRef.setFieldValue&&(this.fyfWidgetRef.setFldVal=this.fyfWidgetRef.setFieldValue,this.fyfWidgetRef.setFieldValue=function(t,i){e.fyfWidgetRef.setFldVal(t,i);var o=void 0,n=void 0,r=void 0,a=!1;switch(t){case"skills":if(-1==i){r=e.fyfWidgetRef.stepData.skills;for(var s=r,l=Array.isArray(s),c=0,s=l?s:s[Symbol.iterator]();;){var p;if(l){if(c>=s.length)break;p=s[c++]}else{if(c=s.next(),c.done)break;p=c.value}p.skill.toLowerCase()!==e.fyfWidgetRef.fyfStepConfig.skills.value.toLowerCase()||a||(o=e.fyfWidgetRef.fyfStepConfig.skills.value,a=!0)}if(!a){var u=!1,d=!1;e.skippedSuggestionsTrackObj&&e.skippedSuggestionsTrackObj.selected_values&&e.skippedSuggestionsTrackObj.selected_values.length&&(e.skippedSuggestionsTrackObj.selected_values=e.skippedSuggestionsTrackObj.selected_values.map(function(e){return e.toLowerCase()}),-1!=e.skippedSuggestionsTrackObj.selected_values.indexOf(e.fyfWidgetRef.fyfStepConfig.skills.value.toLowerCase())&&(u=!0)),e.fyfWidgetRef.fyfStepConfig.profileData.skills&&e.fyfWidgetRef.fyfStepConfig.profileData.skills.length&&(e.fyfWidgetRef.fyfStepConfig.profileData.skills=e.fyfWidgetRef.fyfStepConfig.profileData.skills.map(function(e){return e.toLowerCase()}),-1!=e.fyfWidgetRef.fyfStepConfig.profileData.skills.indexOf(e.fyfWidgetRef.fyfStepConfig.skills.value.toLowerCase)&&(d=!0)),u||d||(o=e.fyfWidgetRef.fyfStepConfig.skills.value)}}else i>=0&&e.fyfWidgetRef.stepData.skills[i]&&(o=e.fyfWidgetRef.stepData.skills[i].skill,a=!0);o&&e.setTrackingObj(o,a,t);break;case"locations":break;case"recentTitles":if(-1==i){n=e.fyfWidgetRef.stepData.recentTitles;for(var f=n,h=Array.isArray(f),g=0,f=h?f:f[Symbol.iterator]();;){var y;if(h){if(g>=f.length)break;y=f[g++]}else{if(g=f.next(),g.done)break;y=g.value}y.title.toLowerCase()!==e.fyfWidgetRef.fyfStepConfig.recentTitle.value.toLowerCase()||a||(o=e.fyfWidgetRef.fyfStepConfig.recentTitle.value,a=!0)}a||(o=e.fyfWidgetRef.fyfStepConfig.recentTitle.value)}else i>=0&&e.fyfWidgetRef.stepData.recentTitles[i]?(o=e.fyfWidgetRef.stepData.recentTitles[i].title,a=!0):i>=0&&!e.fyfWidgetRef.stepData.recentTitles.length&&(o=e.fyfWidgetRef.fyfStepConfig.recentTitle.value,a=!0);o&&e.setTrackingObj(o,a,t)}}),this.fyfWidgetRef.selectSuggestions&&(this.fyfWidgetRef.slctSuggestions=this.fyfWidgetRef.selectSuggestions,this.fyfWidgetRef.selectSuggestions=function(t,i){e.fyfWidgetRef.slctSuggestions(t,i);var o=t;e.skippedSuggestionsTrackObj.stepName="skills",e.skippedSuggestionsTrackObj.hasOwnProperty("selected_values")?e.skippedSuggestionsTrackObj.selected_values.push(o):(e.skippedSuggestionsTrackObj.selected_values=[],e.skippedSuggestionsTrackObj.selected_values.push(o))}),this.fyfWidgetRef.removeSelectedData&&(this.fyfWidgetRef.rmvSlctdData=this.fyfWidgetRef.removeSelectedData,this.fyfWidgetRef.removeSelectedData=function(t){if(e.fyfWidgetRef.rmvSlctdData(t),e.skippedSuggestionsTrackObj.selected_values&&e.skippedSuggestionsTrackObj.selected_values.length){var i=e.skippedSuggestionsTrackObj.selected_values.findIndex(function(i){return i==e.fyfWidgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=i&&e.skippedSuggestionsTrackObj.selected_values.splice(i,1)}if(e.skippedSuggestionsTrackObj.typed_values&&e.skippedSuggestionsTrackObj.typed_values.length){var o=e.skippedSuggestionsTrackObj.typed_values.findIndex(function(i){return i==e.fyfWidgetRef.fyfStepConfig.skills.selectedSkill[t]});-1!=o&&e.skippedSuggestionsTrackObj.typed_values.splice(o,1)}})},e.prototype.setTrackingObj=function(e,t,i){if("recentTitles"==i){this.skippedSuggestionsTrackObj.stepName=i;var o=t?"selected_values":"typed_values",n=t?"typed_values":"selected_values";this.skippedSuggestionsTrackObj[o]=[e],this.skippedSuggestionsTrackObj[n]=[]}else{this.skippedSuggestionsTrackObj.stepName=i;var r=void 0;r=t?"selected_values":"typed_values",this.skippedSuggestionsTrackObj.hasOwnProperty(r)?this.skippedSuggestionsTrackObj[r].push(e):(this.skippedSuggestionsTrackObj[r]=[],this.skippedSuggestionsTrackObj[r].push(e))}},e.prototype.trackHandleFyfActions=function(){var e=this;this.fyfWidgetRef.handleFyfActions&&(this.fyfWidgetRef.hdlFyfActions=this.fyfWidgetRef.handleFyfActions,this.fyfWidgetRef.handleFyfActions=function(t,i){var o=e.fyfWidgetRef.fyfStepConfig.stepType;if("recentTitle"==o&&!e.fyfWidgetRef.fyfStepConfig.recentTitle.value.length&&e.fyfWidgetRef.fyfStepConfig.recentTitle.selectedTitle.length&&(t="",i="false"),"recentTitle"==o)if(t)if(e.fyfWidgetRef.fyfStepConfig.recentTitle.value.length&&e.fyfWidgetRef.fyfStepConfig.recentTitle.value!=e.fyfWidgetRef.fyfStepConfig.profileData.recentTitle&&!e.skippedSuggestionsTrackObj.selected_values||e.skippedSuggestionsTrackObj.selected_values&&e.skippedSuggestionsTrackObj.selected_values.length&&e.skippedSuggestionsTrackObj.selected_values[0]!=e.fyfWidgetRef.fyfStepConfig.recentTitle.value){var n=void 0,r=!1;n=e.fyfWidgetRef.stepData.recentTitles;for(var a=n,s=Array.isArray(a),l=0,a=s?a:a[Symbol.iterator]();;){var c;if(s){if(l>=a.length)break;c=a[l++]}else{if(l=a.next(),l.done)break;c=l.value}var p=c;e.fyfWidgetRef.fyfStepConfig["typed_"+o]=e.fyfWidgetRef.fyfStepConfig["typed_"+o]||"",p.title.toLowerCase()===e.fyfWidgetRef.fyfStepConfig["typed_"+o].toLowerCase()&&(r=!0)}var u=r?"selected_values":"typed_values";e.skippedSuggestionsTrackObj={stepName:o},e.skippedSuggestionsTrackObj[u]=[e.fyfWidgetRef.fyfStepConfig["typed_"+o]]}else e.fyfWidgetRef.fyfStepConfig["typed_"+o]||(e.skippedSuggestionsTrackObj={stepName:o});else e.skippedSuggestionsTrackObj={stepName:o};else if((t||e.fyfWidgetRef.fyfStepConfig.skills&&e.fyfWidgetRef.fyfStepConfig.skills.value)&&"skills"==o&&e.fyfWidgetRef.fyfStepConfig[o]&&e.fyfWidgetRef.fyfStepConfig[o].selectedSkill&&-1==e.fyfWidgetRef.fyfStepConfig[o].selectedSkill.indexOf(t)){var d=e.fyfWidgetRef.fyfStepConfig.skills.value;if(d){var f=e.fyfWidgetRef.fyfStepConfig.skills.selectedSkill.findIndex(function(e){return e.toLowerCase()==d.toLowerCase()}),h=-1;if(e.fyfWidgetRef.stepData&&e.fyfWidgetRef.stepData.skills&&e.fyfWidgetRef.stepData.skills.length&&(h=e.fyfWidgetRef.stepData.skills.findIndex(function(e){return e.skill.toLowerCase()==d.toLowerCase()})),-1==f){e.fyfWidgetRef.fyfStepConfig.skills.selectedSkill.push(d),t=e.fyfWidgetRef.fyfStepConfig.skills.selectedSkill;var g=h>=0?"selected_values":"typed_values";e.skippedSuggestionsTrackObj&&Object.keys(e.skippedSuggestionsTrackObj).length?e.skippedSuggestionsTrackObj[g]?e.skippedSuggestionsTrackObj[g].push(d):e.skippedSuggestionsTrackObj[g]=[d]:(e.skippedSuggestionsTrackObj={stepName:o},e.skippedSuggestionsTrackObj[g]=[d])}else e.skippedSuggestionsTrackObj&&Object.keys(e.skippedSuggestionsTrackObj).length?e.skippedSuggestionsTrackObj.selected_values?e.skippedSuggestionsTrackObj.selected_values.push(d):e.skippedSuggestionsTrackObj.selected_values=[d]:e.skippedSuggestionsTrackObj={stepName:o,selected_values:[d]}}}t&&e.skippedSuggestionsTrackObj&&Object.keys(e.skippedSuggestionsTrackObj).length&&e.raisingSuggestionsTrackingEvent(o),e.fyfWidgetRef.hdlFyfActions(t,i)})},e.prototype.raisingSuggestionsTrackingEvent=function(e){var t=this,i=JSON.parse(JSON.stringify(this.skippedSuggestionsTrackObj));i.typed_values&&i.typed_values.length&&(i.typed_values=i.typed_values.filter(function(e){return null!=e}),i.typed_values=Array.from(new Set(i.typed_values)),"skills"==e&&i.typed_values.forEach(function(e,o){t.fyfWidgetRef.fyfStepConfig.profileData.skills&&-1!=t.fyfWidgetRef.fyfStepConfig.profileData.skills.indexOf(e)&&i.typed_values.splice(o,1)})),i.typed_values&&!i.typed_values.length&&delete i.typed_values,i.selected_values&&i.selected_values.length&&"skills"==e&&i.selected_values.forEach(function(e,o){t.fyfWidgetRef.fyfStepConfig.profileData.skills&&-1!=t.fyfWidgetRef.fyfStepConfig.profileData.skills.indexOf(e)&&i.selected_values.splice(o,1)}),i.selected_values&&!i.selected_values.length&&delete i.selected_values,(i.typed_values&&i.typed_values.length||i.selected_values&&i.selected_values.length)&&this.fyfWidgetRef.trackWidgetClick("suggestions",i),this.skippedSuggestionsTrackObj={}},e.prototype.trackNavigationClicks=function(){var e=this;this.fyfWidgetRef.closePopup&&(this.fyfWidgetRef.clPup=this.fyfWidgetRef.closePopup,this.fyfWidgetRef.closePopup=function(t){"uploadResume"==e.fyfWidgetRef.currentStep&&e.fyfWidgetRef.trackWidgetClick("fyf_options_closed",{}),"find_your_fit"==t&&e.fyfWidgetRef.trackWidgetClick("fyf_options_closed",{}),e.fyfWidgetRef.clPup()}),this.fyfWidgetRef.handleStepProcess&&(this.fyfWidgetRef.hndlStpProcess=this.fyfWidgetRef.handleStepProcess,this.fyfWidgetRef.handleStepProcess=function(){e.fyfWidgetRef.isLastStep=!1,e.fyfWidgetRef.hndlStpProcess()}),this.fyfWidgetRef.loadStep&&(this.fyfWidgetRef.ldStp=this.fyfWidgetRef.loadStep,this.fyfWidgetRef.loadStep=function(){if(e.fyfWidgetRef.ldStp(),!e.fyfWidgetRef.isLastStep){var t=e.fyfWidgetRef.fyfStepConfig.stepType;e.fyfWidgetRef.trackWidgetClick("fyf_step_loaded",{step:t})}})},e}();e.default=i}),define("ph-common/ph-a11y/ph-ally-layer-handler",["exports","aurelia-framework","./../common-service","./../ph-app-model-manager","./../cookie-manager"],function(e,t,i,o,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AllyLayerHandler=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},l=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=[{color:"#000000"},{display:"block"},{height:"0"},{"text-align":"center"},{position:"relative"},{overflow:"hidden"},{"text-decoration":"underline"}],p=[{height:"auto"},{overflow:"auto"},{padding:"8px 0"},{margin:"0px auto"},{border:"2px dashed #000"},{width:"98%"}],u=[{height:"0"},{overflow:"hidden"},{padding:"0"},{margin:"0"},{border:"none"},{width:"100%"}],d=e.AllyLayerHandler=function(){function e(t,i,o){r(this,e),this.commonService=t,this.phenomAppManager=i,this.cookieManager=o,this.handleAccessibility()}return e.prototype.handleAccessibility=function(){var e=this.commonService.getSiteSettings("ally"),t=this.commonService.getSiteSettings("allyTenant")||{};if(e){var i=this.commonService.getCdnUrl(),o=this.mergeAllyConfig(e,t),n=document.querySelector("#accessibilityScript"),r=(this.isAllyUserAgent(o.userAgent),this.commonService.getQueryParam("p_v")),a=this.cookieManager.get("PHPPPE_phapc"),s=(o&&o.layerEnabled,!1);if(a&&o)try{a=JSON.parse(a),s=!0,o.allyScript=a.allyScript,o.allyTenantScript=a.allyTenantScript}catch(e){}if(r){s=!0;var l=r.split(","),c=o.allyScript.replace(".js","");if(c=c.substring(0,c.lastIndexOf("-")),c=[c,"-v",l[0],".js"].join(""),o.allyScript=c,l.length>1){var p=o.allyTenantScript.replace(".js","");p=p.substring(0,p.lastIndexOf("-")),p=[p,"-v",l[0],".js"].join(""),o.allyTenantScript=p}}if((o&&o.layerEnabled||s)&&o.cdnUrl&&!n&&(this.addPageToScript(i,o.cdnUrl,"ally"),o&&o.allyScript&&this.addPageToScript(i,o.allyScript,"allyLayer"),o&&o.allyTenantScript)){var u=this.phenomAppManager.getRefNum(),d=i+"/"+u;this.addPageToScript(d,o.allyTenantScript,"allyLayer2")}var f=o&&o.allySkipToContent;f&&f.isEnabled&&this.addSkipToContentToPage(f);var h=this.phenomAppManager.getDeviceType(),g=o&&o.allySkipToSearchResults||{},y=g.devices||["desktop"];g&&g.isEnabled&&-1!==y.indexOf(h)&&this.addSkipToSearchResults(g)}},e.prototype.isAllyUserAgent=function(e){var t=window.navigator.userAgent,i=!1;if(e){i=new RegExp(e,"i").test(t.toLowerCase())}return i},e.prototype.mergeAllyConfig=function(e,t){var i=Object.keys(t);return t&&i.length&&i.forEach(function(i){e[i]=t[i]}),e},e.prototype.addPageToScript=function(e,t,i){var o=-1==t.indexOf("http")?e+t:t,n=void 0;try{n=document.querySelector("#"+i)}catch(e){console.warn(e)}if(!n){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("async",""),r.setAttribute("src",o),r.setAttribute("id",i),document.body.appendChild(r)}},e.prototype.addSkipToContentToPage=function(e){var t=this;e.selectors=e.selectors||"#skip-content, #skipToMainContent";var i=document.querySelectorAll(e.selectors),o=document.querySelector(".ph-page"),n=document.querySelector(".ph-header");if(o&&n&&!i.length){var r=this.getTranslationsWidgetBundle(),a=document.createElement("div"),s=document.createElement("a"),l=r.skipToContent||"Skip to main content",d=r.skipToContentAriaLabel||l,f=r.skipToContentFocusAriaLabel||"",h=[{href:"#skipToMainContent"},{id:"skip-content"},{class:"skip-content"},{target:"_self"},{role:"link"},{"aria-label":d}];a.setAttribute("class","skip-nav-area"),this.addAttributesToElem(s,h),this.commonService.applyStylesToElem(c,s),s.style["z-index"]=9999,s.innerHTML=l,a.appendChild(s),n.firstElementChild.parentElement.insertBefore(a,n.firstElementChild),s.addEventListener("focus",function(e){t.commonService.applyStylesToElem(p,s),s.classList.add("skip-content-focus")}),s.addEventListener("focusout",function(e){t.commonService.applyStylesToElem(u,s),s.classList.remove("skip-content-focus")});var g=this.addFocusableElem(f);o.firstElementChild.parentElement.insertBefore(g,o.firstElementChild)}},e.prototype.addFocusableElem=function(e){var t=document.createElement("div"),i=document.createElement("a");return t.setAttribute("id","skipTobody"),t.setAttribute("class","skip-to-body"),t.style.width="1px",t.style.height="0px",t.style.overflow="hidden",i.setAttribute("id","skipToMainContent"),i.setAttribute("class","skipToMainContent"),i.setAttribute("aria-label",e),i.innerHTML="-",t.appendChild(i),t},e.prototype.addSkipToSearchResults=function(e){var t=this;e.selectors=e.selectors||"#skip-facets";var i=document.querySelectorAll(e.selectors),o=document.querySelector('[data-widget="ph-facets-v1"]'),n=document.querySelector('[data-widget^="ph-search-results-v"]');if(!i.length&&o&&n){var r=this.getTranslationsWidgetBundle(),a=document.createElement("div"),s=document.createElement("a"),l=r.skipToSearchResults||"Skip to Search Results",d=r.skipToSearchResultsAriaLabel||l,f=[{href:"#skipToSearchResultsContent"},{id:"skip-facets"},{class:"skip-facets"},{target:"_self"},{role:"link"},{"aria-label":d}];a.setAttribute("class","skip-facets-area"),this.addAttributesToElem(s,f),this.commonService.applyStylesToElem(c,s),s.style["z-index"]=1,s.innerHTML=l,a.appendChild(s),o.parentElement.insertBefore(a,o),s.addEventListener("focus",function(e){t.commonService.applyStylesToElem(p,s),s.classList.add("skip-facets-focus")}),s.addEventListener("focusout",function(e){t.commonService.applyStylesToElem(u,s),s.classList.remove("skip-facets-focus")}),n.parentElement&&n.parentElement.setAttribute("id","skipToSearchResultsContent")}},e.prototype.addAttributesToElem=function(e,t){t.forEach(function(t){var i=Object.keys(t)[0],o=t[i];e.setAttribute(i,o)})},e.prototype.getTranslationsWidgetBundle=function(){var e=this.phenomAppManager.getTranslations(),t=void 0;return e&&(t=JSON.parse(JSON.stringify(e.masterData||{}))),t},e}();e.AllyLayerHandler=d=s([(0,t.autoinject)(),l("design:paramtypes",[i.CommonService,o.PhenomAppManager,n.CookieManager])],d)}),define("ph-common/ph-im-validation-rules",["exports","aurelia-framework","./common-service"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ImValidationRules=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s="validationRules",l="getIMConfigurations",c=e.ImValidationRules=function(){function e(t){o(this,e),this.commonService=t;var i=this.commonService.getParam("siteType"),n=this.commonService.getParam(s);"internal"==i&&n&&!Object.keys(n).length&&(this.validationRulesPromise=this.getImValidationRules("",l))}return e.prototype.getImValidationRules=function(e,t){var i=this;return this.commonService.getDDO(e,t,{}).then(function(e){if(e[t]&&e[t].data&&e[t].data.imTenant&&e[t].data.validationsConfig){var o=e[t].data.validationsConfig,n=i.stringToRegex(o.validations);i.commonService.setParam(s,n)}},function(e){console.info(e),new Error(e)})},e.prototype.stringToRegex=function(e){return Object.keys(e).forEach(function(t){Object.keys(e[t]).forEach(function(i){Object.keys(e[t][i]).forEach(function(o){if(o&&"format"==o&&e[t][i][o].pattern){var n=e[t][i][o].pattern;e[t][i][o].pattern=new RegExp(n,"i")}})})}),e},e}();e.ImValidationRules=c=r([(0,t.autoinject)(),a("design:paramtypes",[i.CommonService])],c)}),define("ph-common/ph-tracking/ph-tracker",["exports","aurelia-framework"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomTracker=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,i,n){var r,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},r=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=e.PhenomTracker=function(){function e(){i(this,e),this.listeners={},this.init()}return e.prototype.init=function(){document.addEventListener("click",function(e){e.target.getAttribute})},e.prototype.registerListerner=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.track=function(e,t){if(window&&window.phenomtrack){window.phenomtrack.track(e,t)}},e}();e.PhenomTracker=a=n([(0,t.autoinject)(),r("design:paramtypes",[])],a)}),define("ph-common/ph-value-converters/search-filter-value-converter",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.SearchFilterValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e,t,i,o){if(e&&e.length&&t&&t.trim().length>0){return e.filter(function(n){var r="string"==typeof n,a=n;return r||i?(!r&&i&&(a=n[i]||""),a=a.toLowerCase(),o?a.startsWith(t.toLowerCase()):-1!=a.indexOf(t.toLowerCase())):e})}return e},e}()}),define("ph-common/ph-value-converters/date-format",["exports","aurelia-framework","./../common-service","./../index","moment-timezone","moment"],function(e,t,i,o,n,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DateFormatValueConverter=void 0;var l=a(n),c=a(r),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=e.DateFormatValueConverter=function(){function e(t){s(this,e),this.commonService=t}return e.prototype.toView=function(e,t,i){var o=this.commonService.getLocale()||"en_us";return o=o.replace("_","-"),c.updateLocale(o,{}),c.locale()||(o=o.split("-")[0],c.updateLocale(o,{})),c.locale()||c.updateLocale("en",{}),l.default?i?l.utc(e).tz(i).format(t):l.utc(e).format(t):l(e).format(t)},e.prototype.fetchUserZone=function(){try{return l.tz.guess(!0)}catch(e){o.logger.debug("fetchUserZone",e)}return""},e.prototype.fetchUserTimeZone=function(e){try{return e=e||this.fetchUserZone(),l.tz(e).format("z")}catch(e){o.logger.debug("",e)}return""},e}();e.DateFormatValueConverter=f=u([(0,t.autoinject)(),d("design:paramtypes",[i.CommonService])],f)}),define("ph-common/ph-src-attribute/lazy-image-intersection-observer",["exports","./lazy-image-polyfill"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ImageIntersectionObserver=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(t);e.ImageIntersectionObserver=function(){function e(){var t=this;i(this,e),this.processImage=function(e){e.style.width="",e.style.opacity="";var t=e.previousElementSibling;t&&t.parentElement&&t.parentElement.removeChild(t),e.classList.add("ph-lazy-animation"),e.classList.remove("ph-lazy")},this.ibo=o,this.lazyImageObserver=new IntersectionObserver(function(e,i){e.forEach(function(e){if(e.isIntersecting){var i=e.target;i.dataset?i.src=i.dataset&&i.dataset.src:i.src=i.getAttribute("data-src"),i.onload=function(){t.processImage(i)},i.style.opacity="0",t.lazyImageObserver.unobserve(i)}})})}return e.prototype.applyOverlayLayer=function(e,t,i){if(e&&e.parentElement){i=i||"#e5e5e5";var o=document.createElement("div");o.setAttribute("class","lqip-overlay");var n=(e.offsetWidth||e.style.width.replace("px",""))+"px",r=(e.offsetHeight||e.style.height.replace("px",""))+"px",a=(e.offsetTop||0)+"px",s=(e.offsetLeft||0)+"px";r&&"px"!=r&&parseInt(r)||(r="100%");var l=[{position:"absolute"},{"background-color":i},{"z-index":"1"},{width:n},{height:r},{top:a},{"max-width":"100%"},{left:s},{display:"inline-block"}];t.applyStylesToElem(l,o),e.parentElement.insertBefore(o,e)}},e.prototype.observeImage=function(e){this.lazyImageObserver.observe(e)},e.prototype.unobserveImage=function(e){this.lazyImageObserver.unobserve(e)},e}()}),define("ph-common/ph-src-attribute/lazy-image-polyfill",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.default=function(){function e(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||c(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,o=this.intersectionRect,n=o.width*o.height;this.intersectionRatio=i?Number((n/i).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=n(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function o(){return window.performance&&performance.now&&performance.now()}function n(e,t){var i=null;return function(){i||(i=setTimeout(function(){e(),i=null},t))}}function r(e,t,i,o){"function"==typeof e.addEventListener?e.addEventListener(t,i,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function a(e,t,i,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function s(e,t){var i=Math.max(e.top,t.top),o=Math.min(e.bottom,t.bottom),n=Math.max(e.left,t.left),r=Math.min(e.right,t.right),a=r-n,s=o-i;return a>=0&&s>=0&&{top:i,bottom:o,left:n,right:r,width:a,height:s}}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):c()}function c(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function p(e,t){for(var i=t;i;){if(i==e)return!0;i=u(i)}return!1}function u(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}if("object"===("undefined"==typeof window?"undefined":t(window))){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return void("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var d=window.document,f=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},i.prototype._parseRootMargin=function(e){var t=e||"0px",i=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(d,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(d,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(window,"resize",this._checkForIntersections,!0),a(d,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),i=t?this._getRootRect():c();this._observationTargets.forEach(function(n){var r=n.element,a=l(r),s=this._rootContainsTarget(r),c=n.entry,p=t&&s&&this._computeTargetAndRootIntersection(r,i),u=n.entry=new e({time:o(),target:r,boundingClientRect:a,rootBounds:i,intersectionRect:p});c?t&&s?this._hasCrossedThreshold(c,u)&&this._queuedEntries.push(u):c&&c.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=window.getComputedStyle(e).display){for(var i=l(e),o=i,n=u(e),r=!1;!r;){var a=null,c=1==n.nodeType?window.getComputedStyle(n):{};if("none"==c.display)return;if(n==this.root||n==d?(r=!0,a=t):n!=d.body&&n!=d.documentElement&&"visible"!=c.overflow&&(a=l(n)),a&&!(o=s(a,o)))break;n=u(n)}return o}},i.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var t=d.documentElement,i=d.body;e={top:0,left:0,right:t.clientWidth||i.clientWidth,width:t.clientWidth||i.clientWidth,bottom:t.clientHeight||i.clientHeight,height:t.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100}),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},i.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==o)for(var n=0;n<this.thresholds.length;n++){var r=this.thresholds[n];if(r==i||r==o||r<i!=r<o)return!0}},i.prototype._rootIsInDom=function(){return!this.root||p(d,this.root)},i.prototype._rootContainsTarget=function(e){return p(this.root||d,e)},i.prototype._registerInstance=function(){f.indexOf(this)<0&&f.push(this)},i.prototype._unregisterInstance=function(){var e=f.indexOf(this);-1!=e&&f.splice(e,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=e}}()}),define("ph-common/ph-loader-attribute/ph-loading-image-attribute",["exports","aurelia-framework","./../index","./../ph-app-model-manager"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingImageAttribute=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){
if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.LoadingImageAttribute=function(){function e(t,i,o){n(this,e),this.phenomAppManager=o,this.loaderImg="assets/images/loader.gif",this.noImage=!1,this.element=t,this.commonService=i}return e.prototype.showLoaderChanged=function(e,t){if("boolean"==typeof e&&e){if(!this.noImage){var i=document.createElement("div");i.className="ph-loading";var o=document.createElement("img");o.setAttribute("src",this.commonService.getLoadingImgUrl(this.loaderImg));var n=this.phenomAppManager.getTranslations(),r=void 0;n&&(r=JSON.parse(JSON.stringify(n.masterData||{})));var a=r.loaderAltText||"loading";o.setAttribute("alt",a),i.appendChild(o),this.element.appendChild(i)}}else if(!this.noImage){var s=this.element.querySelector(".ph-loading");s&&s.parentElement.removeChild(s)}},e.prototype.loaderImgChanged=function(e,t){this.loaderImg=e},e}();a([t.bindable,s("design:type",Boolean)],l.prototype,"showLoader",void 0),a([t.bindable,s("design:type",String)],l.prototype,"loaderImg",void 0),a([t.bindable,s("design:type",Boolean)],l.prototype,"noImage",void 0),e.LoadingImageAttribute=l=a([(0,t.customAttribute)("ph-loading-img"),(0,t.autoinject)(),s("design:paramtypes",[Element,i.CommonService,o.PhenomAppManager])],l)}),define("ph-common/ph-tracking/ph-pa-event",["exports","aurelia-framework","aurelia-event-aggregator","./../index","./../common-service"],function(e,t,i,o,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomTrackEvent=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},l=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c="ph-tevent",p="data-ph-tevent-name",u="data-ph-tevent-attr-",d="secure-url-click",f="validateJwtToken",h=e.PhenomTrackEvent=function(){function e(t,i,n){var a=this;r(this,e),this.element=t,this.eventAggregator=i,this.commonService=n,o.logger.debug("PHTEvent::",this.element),t.addEventListener("click",function(e){e.target;if(e.phTarget||(e.phTarget=e.currentTarget),a.widgetData=a.fetchWidget(e),t&&t.getAttribute&&(!a.widgetData||a.widgetData.isStatic)){for(var i=t.getAttribute(p)||t.getAttribute(c),o={},n=t.attributes,r=u,s=void 0,l=0;l<n.length;l++){var h=n[l];if(h.name.startsWith(r)){var g=h.name;g=g.replace(r,""),o[g]=h.value}}"static_content_click"===i&&!o.trait75&&t.getAttribute("title")&&(o.trait75=t.getAttribute("title"),o.trait13||(o.trait13="")),s=a.fetchStaticWidgetMetaInfo(e),Object.keys(s).length&&(o.params=s),o.isStatic=!0,a.commonService.processTrackingEvent(i,void 0,o,{})}var y=a.commonService.getSiteSettings("securePages");if(t&&"A"==t.nodeName&&y&&y.length){var m=t.getAttribute("href"),v=a.commonService.getBaseUrl(),b=void 0,S=void 0,A=void 0;m&&m.length&&(A=a.commonService.getUrlObjFromString(m)||"",S=m.replace(v,""),S=S.replace(A.search,"")),m&&-1!=y.indexOf(S)&&((b=a.commonService.getDdoRespFromStore(f))&&b.data&&b.data.loginStatus||(a.eventAggregator.publish(d,{redirectUri:m}),e.preventDefault(),e.stopPropagation()))}})}return e.prototype.fetchWidget=function(e){return this.commonService.fetchWidget(e&&e.target)},e.prototype.fetchStaticWidgetMetaInfo=function(e){if(e&&e.target){var t=void 0,i={};return this.widgetData.elemTag&&(t=this.commonService.getWidgetName(this.widgetData.elem,this.widgetData.elemTag),i={widgetId:this.widgetData.elemTag,widgetview:this.widgetData.elem.getAttribute("original-view")||"",widgetName:t}),i}},e}();e.PhenomTrackEvent=h=s([(0,t.customAttribute)("ph-tevent"),(0,t.autoinject)(),l("design:paramtypes",[Element,i.EventAggregator,n.CommonService])],h)}),define("ph-common/ph-href-attribute/ph-href-attribute",["exports","aurelia-framework","./../index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AHrefAttribute=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=e.AHrefAttribute=function(){function e(t,i){o(this,e),this.element=t,this.commonService=i}return e.prototype.valueChanged=function(e,t){var i=(this.element.getAttribute("ph-nav-item-type"),this.commonService.getSiteSettings("navItems")),o=i&&i.navMenuItems,n=i&&i.navMenuItemsData;if(e&&e.trim().length>0){var r=void 0,a=void 0;a=this.element.getAttribute("href"),this.element.getAttribute("key-href")&&a&&a.length&&(e=a),r=e.startsWith("/")||e.startsWith("javascript:void(0)")||e.startsWith("mailto:")?e:-1==e.indexOf("//")?this.commonService.getBaseUrl()+e:e,r=this.checkIsNavItemConfiguredLink(e,o,n,r),this.element.href=r,this.element.removeAttribute&&(this.element.setAttribute("data-ph-href",this.element.getAttribute("ph-href")),this.element.removeAttribute("ph-href"))}},e.prototype.checkIsNavItemConfiguredLink=function(e,t,i,o){if(t&&t.length&&i)for(var n=0;n<t.length;n++)if(-1!=e.indexOf(t[n])||-1!=t[n].indexOf(e)){var r=this.fetchNavItem(this.element),a=r&&r.getAttribute("ph-nav-item-type"),s=a&&i&&i[a];return a&&s&&s.url&&(o=s.url),o}return o},e.prototype.fetchNavItem=function(e){if(e){for(var t=e,i=t.getAttribute("ph-nav-item-type");t&&!i&&"BODY"!=t.nodeName;)t=t.parentElement,i=t&&t.getAttribute&&t.getAttribute("ph-nav-item-type");if(i)return t}return!1},e}();e.AHrefAttribute=s=r([(0,t.customAttribute)("ph-href"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],s)}),define("ph-common/ph-page-state-attribute/ph-page-state-attribute",["exports","aurelia-framework","aurelia-event-aggregator","./../index"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhPageStateAttribute=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.PhPageStateAttribute=function(){function e(t,i,o){n(this,e),this.element=t,this.commonService=i,this.eventAggregator=o}return e.prototype.valueChanged=function(e,t){var i=this;this.showOnState=e,this.eventAggregator.subscribe("pageState",function(e){i.checkAndRemoveElement(e.pageState)}),this.commonService.getPageState()},e.prototype.checkAndRemoveElement=function(e){e&&e!==this.showOnState?this.element.parentElement.removeChild(this.element):e&&this.element.classList.remove("hide")},e}();e.PhPageStateAttribute=l=a([(0,t.customAttribute)("ph-page-state"),(0,t.autoinject)(),s("design:paramtypes",[Element,o.CommonService,i.EventAggregator])],l)}),define("ph-common/ph-slider/v1/ph-card-slider",["exports","aurelia-framework","aurelia-event-aggregator","./../../app-constants","./../../ph-widget-attr","./../../index"],function(e,t,i,o,n,r){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.CardSliderAttribute=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},d=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f="ph-card-slider-v1",h=["/common/js/vendor/jquery.min.js","/common/js/vendor/jquery-migrate.min.js","/common/js/vendor/slick-v3.min.js"],g=e.CardSliderAttribute=function(e){function t(i,n,r,c){s(this,t);var p=l(this,e.call(this,i,r,f));p.element=i,p.eventAggregator=n,p.commonService=r,p.templatingEngine=c,p.containerClass=o.AppConstants.CLASS_SLIDER_CONTAINER,p.loadOnEvent=!1,p.sliderOptions={},p.slickInited=!1,p.currentSlide=1,p.slickOverrideFun=function(){var e="button";p.phslideCustomPaging&&(e=$(p.phslideCustomPaging)[0].nodeName.toLowerCase()),Slick.prototype.buildDots=function(){var t,i,o=this;if(!0===o.options.dots&&o.slideCount>o.options.slidesToShow){for(o.$slider.addClass("slick-dotted"),i="li"==e?$("<ul />").addClass(o.options.dotsClass):$("<div />").addClass(o.options.dotsClass),t=0;t<=o.getDotCount();t+=1)i.append(o.options.customPaging.call(this,o,t));o.$dots=i.appendTo(o.options.appendDots),o.$dots.find(e).first().addClass("slick-active")}},Slick.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){$(t).attr("data-slick-index",e).data("originalStyling",$(t).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?a('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="assertive" aria-atomic="true" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),(!0===e.options.centerMode||!0===e.options.swipeToSlide)&&(e.options.slidesToScroll=1),$("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},Slick.prototype.initADA=function(){var e=this,t=(Math.ceil(e.slideCount/e.options.slidesToShow),e.getNavigableIndexes().filter(function(t){return t>=0&&t<e.slideCount}));e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==e.$dots&&e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(i){var o=t.indexOf(i);if($(this).attr({role:"tabpanel",id:"slick-slide"+e.instanceUid+i,tabindex:-1}),-1!==o){var n="slick-slide-control"+e.instanceUid+o;$("#"+n).length&&$(this).attr({"aria-describedby":n})}});for(var i=e.currentSlide,o=i+e.options.slidesToShow;i<o;i++)e.options.focusOnChange||e.options.dotNavArrows?e.$slides.eq(i).attr({tabindex:"0"}):e.$slides.eq(i).removeAttr("tabindex");e.activateADA()},Slick.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},Slick.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode?t.changeSlide({data:{message:!0===t.options.rtl?"next":"previous"}}):39===e.keyCode&&t.changeSlide({data:{message:!0===t.options.rtl?"previous":"next"}}))},Slick.prototype.updateDots=function(){this.$dots},Slick.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&($(e,t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&t.slideCount>t.options.slidesToShow&&$(e,t.$dots).on("mouseenter.slick",$.proxy(t.interrupt,t,!0)).on("mouseleave.slick",$.proxy(t.interrupt,t,!1)).on("focus.slick",$.proxy(t.interrupt,t,!0)).on("blur.slick",$.proxy(t.interrupt,t,!1))},Slick.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&($(e,t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",$.proxy(t.interrupt,t,!0)).off("mouseleave.slick",$.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),$(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&$(t.$slideTrack).children().off("click.slick",t.selectHandler),$(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),$(window).off("resize.slick.slick-"+t.instanceUid,t.resize),$("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),$(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},Slick.prototype.changeSlide=function(t,i){var o,n,r,a=this,s=$(t.currentTarget);switch(s.is("a")&&t.preventDefault(),s.is(e)||(s=s.closest(e)),r=a.slideCount%a.options.slidesToScroll!=0,o=r?0:(a.slideCount-a.currentSlide)%a.options.slidesToScroll,t.data.message){case"previous":n=0===o?a.options.slidesToScroll:a.options.slidesToShow-o,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide-n,!1,i);break;case"next":n=0===o?a.options.slidesToScroll:o,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide+n,!1,i);break;case"index":var l=0===t.data.index?0:t.data.index||s.index()*a.options.slidesToScroll;a.slideHandler(a.checkNavigable(l),!1,i),s.children().trigger("focus");break;default:return}}},p.isScriptAvailable=function(e,t){var i=!1;return window?(e&&window[o.AppConstants.JQUERY]&&(window[o.AppConstants.JQUERY][t]?i=!0:window[o.AppConstants.JQUERY]()[t]&&(i=!0)),window[t]&&(i=!0)):require&&require.defined&&require.defined(t)&&(i=!0),i};var u=p.element.parentElement.querySelector(".ph-a11y-readable-content");return u&&u.parentNode.removeChild(u),p.parseBindableAttributes(),-1!=p.element.className.indexOf(p.containerClass)?p.totalSlidesCount=p.element.children.length:p.totalSlidesCount=p.element.querySelector("."+p.containerClass).children.length,p.element.classList.contains("ph-slide-loader")||p.element.classList.add("ph-slide-loader"),p.loadDependencies().then(function(){p.loadOnEvent?(p.subscribeToEvent(o.AppConstants.EVENT_LOAD_POPUP_SLIDER,function(e){if(e&&e.targetId==p.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID)){var t=e.itemIdx||0;p.sliderOptions.initialSlide=t,p.slickOverrideFun(),p.initSlick()}}),p.subscribeToEvent(o.AppConstants.EVENT_UNLOAD_POPUP_SLIDER,function(e){e&&e.targetId==p.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID)&&p.slickElem.slick("slickPause")})):(p.slickOverrideFun(),p.initSlick())}),p}return c(t,e),t.prototype.attached=function(){var e=document.querySelector("html");"rtl"==(this.element.getAttribute("dir")||e.getAttribute("dir"))&&(this.sliderOptions.rtl=!0)},t.prototype.videoPause=function(e,t,i){var n=e.querySelector("["+t+"]");if(n){i&&n.classList&&!n.classList.contains("hide")&&n.classList.add("hide");var r=n.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);this.eventAggregator.publish(o.AppConstants.EVENT_PAUSE_VIDEO,{targetId:r})}},t.prototype.detached=function(){this.eventSubs.forEach(function(e){e.dispose()})},t.prototype.initSlick=function(){var e=this;$=jQuery.noConflict(),this.slickElem||(this.slickElem=$(this.element.parentElement.querySelector(this.getContainerSelector())),this.slickElem.on("init",function(t,i){if(e.slickInited=!0,e.sliderOptions.ariaText&&e.sliderOptions.ariaText.length>0){var o=e.sliderOptions.ariaText?e.sliderOptions.ariaText:"";e.element.setAttribute("aria-label",o+e.currentSlide+"  of "+e.totalSlidesCount)}if(e.element.querySelector('[ph-slide-num="1"]')&&e.addDynamicAccessiblityEle(e.element.querySelector('[ph-slide-num="1"]')),e.toCheckSliderWidth(),e.slickOverrideAccessbility(),setTimeout(function(){$(e.slickElem).resize()},150),e.attchSliderTrackingEvents(),e.addSlickPlayPauseEvents(),e.element.hasAttribute("dotsInsideNav")&&i.$dots&&i.$nextArrow&&i.$prevArrow){var n=void 0,r=void 0,a=void 0,s=void 0,l=void 0,c=void 0;n=getComputedStyle(i.$dots[0].querySelector("button")),r=parseInt(n.width)+parseInt(n.marginRight)+parseInt(n.marginLeft),a=parseInt(getComputedStyle(i.$prevArrow[0]).width),s=i.$slides.length*r,l=s%2==0?s/2:(s+1)/2,c=l+r+a+"px",i.$nextArrow[0].style.transform="translate("+c+",100%)",i.$prevArrow[0].style.transform="translate(-"+c+",100%)"}for(var p=0;p<i.$slideTrack.find(".slick-cloned").length;p++)for(var u=i.$slideTrack.find(".slick-cloned")[p].querySelectorAll("img"),d=0;d<u.length;d++){var f=u[d].getAttribute("src"),h=u[d].getAttribute("data-src");h&&f!=h&&(u[d].setAttribute("src",h),u[d].previousElementSibling&&u[d].previousElementSibling.classList.contains("lqip-overlay")&&u[d].parentElement.removeChild(u[d].previousElementSibling))}}),this.slickElem.on("reInit",function(){e.slickInited=!0}),this.slickElem.on("beforeChange",function(t,i,n,r){if(e.checkVideoAsset(o.AppConstants.EVENT_PAUSE_VIDEO),e.sliderOptions.hasOwnProperty("dots")&&e.sliderOptions.dots){var a=" .slick-dots",s=void 0;if(e.sliderOptions.appendDots?(e.sliderOptions.appendDots&&(a=e.sliderOptions.appendDots+" .slick-dots"),s=e.element.querySelector(a),e.element.querySelector(e.sliderOptions.appendDots)):(a=" .slick-dots",s=e.element.querySelector(a),e.element.querySelector(e.sliderOptions.appendDots)),s.children.length>0){var l="button";if(e.phslideCustomPaging&&(l=$(e.phslideCustomPaging)[0].nodeName.toLowerCase()),$(s).find(l).removeClass("slick-active").end(),r||0==r){var c=$(s).find(l)[r/i.options.slidesToScroll];$(c).addClass("slick-active"),e.sliderOptions.dotNavArrows&&$(c).focus()}}}for(var p=0;p<i.$slideTrack.find(".slick-active").length;p++){var u=i.$slideTrack.find(".slick-active")[p];e.videoPause(u,"ph-video-v1",!0)}}),this.slickElem.on("afterChange",function(t,i,n,r){if(e.currentSlide=n+1,e.sliderOptions.ariaText&&e.sliderOptions.ariaText.length>0){var a=e.sliderOptions.ariaText?e.sliderOptions.ariaText:"";e.element.setAttribute("aria-label",a+e.currentSlide+"  of "+e.totalSlidesCount)}if(i){var s=i.$slideTrack&&i.$slideTrack.find(".slick-slide");if(s&&s.length)for(var l=0;l<s.length;l++){var c=s[l].querySelector("img");-1==s[l].className.indexOf("slick-active")?c&&c.setAttribute("aria-hidden",!0):c&&c.setAttribute("aria-hidden",!1)}for(var p=[],u=void 0,d=void 0,f=i.$slider&&i.$slider[0]&&i.$slider[0].getAttribute("phslide-number-slides-to-scroll")?i.$slider[0].getAttribute("phslide-number-slides-to-scroll"):i.$slideTrack.find(".slick-active").length,h=i.$slider&&i.$slider[0]&&i.$slider[0].getAttribute("phslide-number-slides-to-show")?i.$slider[0].getAttribute("phslide-number-slides-to-show"):i.$slideTrack.find(".slick-active").length,l=0;l<i.$slideTrack.find(".slick-slide").length;l++)if(-1!=i.$slideTrack.find(".slick-slide")[l].className.indexOf("slick-active")){i.$slideTrack.find(".slick-slide")[l].hasAttribute("tabindex")&&i.$slideTrack.find(".slick-slide")[l].removeAttribute("tabindex");for(var g=0;g<$(i.$slideTrack.find(".slick-slide")[l]).find("a, input, button, select").length;g++)$(i.$slideTrack.find(".slick-slide")[l]).find("a, input, button, select")[g].setAttribute("tabindex","0")}else{i.$slideTrack.find(".slick-slide")[l].hasAttribute("tabindex")&&i.$slideTrack.find(".slick-slide")[l].removeAttribute("tabindex");for(var y=0;y<$(i.$slideTrack.find(".slick-slide")[l]).find("a, input, button, select").length;y++)$(i.$slideTrack.find(".slick-slide")[l]).find("a, input, button, select")[y].setAttribute("tabindex","-1")}for(var m=0;m<i.$slideTrack.find(".slick-active").length;m++)if(m>=h-f&&h)for(var v=i.$slideTrack.find(".slick-active")[m],b=0;b<v.querySelectorAll(".ph-a11y-aria-live").length;b++)p.push(v.querySelectorAll(".ph-a11y-aria-live")[b]);i.$slides[n];if(e.element.parentElement&&!e.element.parentElement.querySelector(".ph-a11y-readable-content")){u=document.createElement("div");var S=e.element.classList.contains("ph-static-slider")?e.element:e.element.querySelector(".ph-static-slider");if(S){if("true"==S.getAttribute("pha-phslide-autoplay")){u.setAttribute("class","ph-a11y-readable-content hide");for(var A=e.element.querySelectorAll(".ph-static-slider .image"),l=0;l<A.length;l++)A[l].removeAttribute("aria-live")}else u.setAttribute("class","ph-a11y-readable-content sr-only")}else u.setAttribute("class","ph-a11y-readable-content sr-only");u.setAttribute("aria-live","assertive"),u.setAttribute("aria-atomic",!0),e.element.parentElement.appendChild(u)}if(d=e.element.parentElement.querySelector(".ph-a11y-readable-content"),d&&d.hasAttribute("aria-live")&&(d.removeAttribute("aria-live"),d.removeAttribute("aria-atomic")),!$(d)[0].querySelector("[role='presentation']")){var w=document.createElement("div");w.setAttribute("role","presentation"),d.appendChild(w)}$(d)[0]&&$(d)[0].querySelector("[role='presentation']")&&($(d)[0].querySelector("[role='presentation']").removeAttribute("aria-hidden"),$(d)[0].querySelector("[role='presentation']").hasAttribute("aria-live")||($(d)[0].querySelector("[role='presentation']").setAttribute("aria-live","assertive"),$(d)[0].querySelector("[role='presentation']").setAttribute("aria-atomic",!0))),e.checkVideoAsset(o.AppConstants.EVENT_START_VIDEO);for(var E=0;E<i.$slideTrack.find(".slick-active").length;E++){var T=i.$slideTrack.find(".slick-active")[E],C=T.querySelector("[ph-video-v1]");C&&C.classList&&C.classList.contains("hide")&&C.classList.remove("hide")}if(!e.pageLoad&&!e.element.classList.contains("ph-gallery-container")){var k=e.element.parentElement.querySelector(".ph-a11y-readable-content");return void(k&&(k.parentNode.removeChild(k),e.pageLoad=!0))}var R="";if(p&&p.length){R="";for(var O=0;O<p.length;O++)if(p[O]){var P=p[O].innerText;P=P.replace(/\n/g," "),P=P.replace(/\r/g," "),R=R+" "+P}}setTimeout(function(){var t=Math.floor(n/i.options.slidesToShow)+1;t>e.totalSlidesCount&&(t=1),$(d)[0].querySelector("[role='presentation']").innerText=" slide "+t+"  of "+Math.ceil(e.totalSlidesCount/i.options.slidesToShow)+" "+R},50),clearTimeout(e.toAccessAttrTimeout),e.toAccessAttrTimeout=setTimeout(function(){$(d)[0].querySelector("[role='presentation']")&&$(d)[0].querySelector("[role='presentation']").setAttribute("aria-hidden",!0)},200)}e.slickOverrideAccessbility()})),this.slickInited?(this.slickElem.slick("unslick"),this.slickElem.slick(this.sliderOptions),this.slickElem.slick("slickGoTo",this.sliderOptions.initialSlide||0)):(this.slickElem.removeClass(o.AppConstants.CLASS_HIDE).slick(this.sliderOptions),this.slickElem.slick("slickGoTo",this.sliderOptions.initialSlide||0)),this.slickElem[0].querySelector(".slick-list").removeAttribute("aria-atomic"),this.slickElem[0].querySelector(".slick-list").removeAttribute("aria-live")},t.prototype.checkVideoAsset=function(e){var t=$(this.slickElem).find(".slick-active");if(t&&t.length){var i=t?t[0].getAttribute(o.AppConstants.ATTR_WIDGET_REF):void 0;if(t&&i){var n=t[0].querySelector("["+i+"]");if(n){var r=n.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);this.eventAggregator.publish(e,{targetId:r})}}}},t.prototype.addDynamicAccessiblityEle=function(e){var t=e.querySelectorAll(".ph-a11y-aria-live"),i=void 0,o=void 0;if(this.element.parentElement&&!this.element.parentElement.querySelector(".ph-a11y-readable-content")&&(i=document.createElement("div"),i.setAttribute("class","ph-a11y-readable-content sr-only"),this.element.parentElement.appendChild(i)),o=this.element.parentElement.querySelector(".ph-a11y-readable-content"),o.innerHTML="",o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic",!0),this.element.hasAttribute("pha-phslide-fade")){if("true"==this.element.getAttribute("pha-phslide-fade")&&!this.pageLoad){this.pageLoad=!0;var n=this.element.parentElement.querySelector(".ph-a11y-readable-content");return void(n&&n.parentNode.removeChild(n))}}if(!this.pageLoad&&!this.element.classList.contains("ph-gallery-container")){var r=this.element.parentElement.querySelector(".ph-a11y-readable-content");return void(r&&r.parentNode.removeChild(r))}if(t&&t.length){for(var a="",s=0;s<t.length;s++)t[s]&&(a+=t[s].innerText);o.innerHTML='<div role="presentation"> slide '+this.currentSlide+"  of "+this.totalSlidesCount+a+"</div>"}$(o)[0]&&$(o)[0].querySelector("[role='presentation']")&&$(o)[0].querySelector("[role='presentation']").removeAttribute("aria-hidden"),setTimeout(function(){$(o)[0]&&$(o)[0].querySelector("[role='presentation']")},2500);for(var l=this.element.querySelector(".slick-track"),c=0;c<$(l).find(".slick-slide").length;c++)if(-1!=$(l).find(".slick-slide")[c].className.indexOf("slick-active")){$(l).find(".slick-slide")[c].setAttribute("tabindex","0");for(var p=0;p<$($(l).find(".slick-slide")[c]).find("a, input, button, select").length;p++)$($(l).find(".slick-slide")[c]).find("a, input, button, select")[p].setAttribute("tabindex","0")}else{$(l).find(".slick-slide")[c].setAttribute("tabindex","-1");for(var u=0;u<$($(l).find(".slick-slide")[c]).find("a, input, button, select").length;u++)$($(l).find(".slick-slide")[c]).find("a, input, button, select")[u].setAttribute("tabindex","-1")}},t.prototype.toCheckSliderWidth=function(){var e=this;clearTimeout(this.toLoadTimeout),this.toLoadTimeout=setTimeout(function(){$&&$(e.element).find(".slick-track").length>0?("0px"==e.element.querySelectorAll(".slick-track")[0].style.width?($(e.element).trigger("resize"),e.goToActiveSlideChanged(e.sliderOptions.initialSlide||0),e.toCheckSliderWidth()):clearTimeout(e.toLoadTimeout),e.element.classList.contains("ph-slide-loader")&&(e.element.classList.remove("ph-slide-loader"),setTimeout(function(){$(e.element).trigger("resize")},150))):e.toCheckSliderWidth()},150)},t.prototype.goToActiveSlideChanged=function(e){this.element.querySelector("."+this.containerClass)&&$&&$(this.element).find("."+this.containerClass).slick("slickGoTo",e)},t.prototype.slickOverrideAccessbility=function(){var e=this;if(this.sliderOptions.dots){var t=" .slick-dots";this.sliderOptions.appendDots&&(t=this.sliderOptions.appendDots+" .slick-dots");var i=this.element.querySelector(t);this.element.querySelector(this.sliderOptions.appendDots);i&&i.children.length>0&&(clearTimeout(this.toAccessbilityTimeout),this.toAccessbilityTimeout=setTimeout(function(){e.sliderOptions.dotNavArrows&&i.setAttribute("role","tablist");for(var t=0;t<=i.children.length-1;t++){var o=i.children[t],n="",r=e.element.getAttribute("phslide-dot-info-selector");if(r){var a=e.element.querySelectorAll(".slick-slide:not(.slick-cloned)"),s=a[t].querySelectorAll(r);s.length||(s=a[t].querySelectorAll('[component-content-key="heading"]'));for(var l=0;l<s.length;l++)n+=s[l].innerText.trim()}var c="aria-current";!o||"tab"!=o.getAttribute("role")&&"tablist"!=o.parentElement.getAttribute("role")||(c="aria-selected"),-1!=o.className.indexOf("slick-active")?("A"!=o.nodeName&&"BUTTON"!=o.nodeName&&"li"!=o.nodeName||o.setAttribute(c,"true"),"BUTTON"!=o.nodeName&&"li"!=o.nodeName||o.setAttribute(c,"true"),o.setAttribute("aria-label",n+" slide "+(t+1)+" of "+i.children.length),e.sliderOptions.dotNavArrows&&o.setAttribute("tabindex","0")):("A"==o.nodeName&&o.removeAttribute(c),"BUTTON"!=o.nodeName&&"li"!=o.nodeName||o.setAttribute(c,"false"),o.setAttribute("aria-label",n+" slide "+(t+1)+" of "+i.children.length),e.sliderOptions.dotNavArrows&&o.setAttribute("tabindex","-1"))}},100))}},t.prototype.attchSliderTrackingEvents=function(){var t=this,i=this.element.querySelector(".slick-next"),o=this.element.querySelector(".slick-prev"),n=this.element.querySelector(".slick-dots");if(this.sliderOptions&&this.sliderOptions.appendDots){var r=" .slick-dots";this.sliderOptions.appendDots&&(r=this.sliderOptions.appendDots+" .slick-dots");var a=this.element.querySelector(r);n=a||document.querySelector(r)}i&&i.addEventListener("click",function(i){e.prototype.trackWidgetClick.call(t,"next_slider_click",{})}),o&&o.addEventListener("click",function(i){e.prototype.trackWidgetClick.call(t,"previous_slider_click",{})}),n&&n.addEventListener("click",function(i){e.prototype.trackWidgetClick.call(t,"dot_slider_click",{})})},t.prototype.addSlickPlayPauseEvents=function(){var e=this,t=this.element.querySelector(".ph-play-pause-cntr-area");if(t){1==this.sliderOptions.autoplay?(t.classList.remove("slider-pause"),t.classList.add("slider-play")):(t.classList.remove("slider-play"),t.classList.add("slider-pause"));var i=t.querySelector(".slider-play-button"),o=t.querySelector(".slider-pause-button"),n=t.querySelector(".slider-play-pause-button");n&&n.addEventListener("click",function(i){t.classList.contains("slider-play")?e.sliderPause(t):t.classList.contains("slider-pause")&&e.sliderPlay(t)}),i&&i.addEventListener("click",function(i){e.sliderPlay(t)}),o&&o.addEventListener("click",function(i){e.sliderPause(t)})}},t.prototype.sliderPause=function(t){e.prototype.trackWidgetClick.call(this,"slider_pause_click",{}),this.slickElem.slick("slickPause"),t.classList.remove("slider-pause"),t.classList.remove("slider-play"),t.classList.add("slider-pause");var i=this.element.classList.contains("ph-static-slider")?this.element:this.element.querySelector("pha-phslide-autoplay");if(i){if("true"==i.getAttribute("pha-phslide-autoplay")){var o=this.element.parentElement.querySelector(".ph-a11y-readable-content");console.log(o),o.classList.remove("hide"),o.classList.add("sr-only");for(var n=this.element.querySelectorAll(".image"),r=0;r<n.length;r++)n[r].setAttribute("aria-live","assertive")}}},
t.prototype.sliderPlay=function(t){e.prototype.trackWidgetClick.call(this,"slider_play_click",{}),this.slickElem.slick("slickPlay"),t.classList.remove("slider-pause"),t.classList.remove("slider-play"),t.classList.add("slider-play")},t.prototype.getContainerSelector=function(){return"."+this.containerClass},t.prototype.parseBindableAttributes=function(){var t=this;e.prototype.parseBindableAttributes.call(this);for(var i=this.element.attributes,n=0;n<i.length;n++){var a=i[n],s=a.value,l=!1;if(s&&s.length){-1!=a.name.indexOf(o.AppConstants.ATTR_BINDABLE_PARSE_PREFIX)&&(s=JSON.parse(s),l=!0),-1!=a.name.indexOf(o.AppConstants.ATTR_BINDABLE_NUMBER_PREFIX)&&(s=parseInt(s),l=!0);var c=this.kebabCaseToCameCase(a.name);if(s&&!l&&(s.toLowerCase()==o.AppConstants.TRUE?s=!0:s.toLowerCase()==o.AppConstants.FALSE&&(s=!1)),c.startsWith(o.AppConstants.ATTR_SLIDE_PREFIX)||c.startsWith(o.AppConstants.ATTR_BINDABLE_STANDARD_PREFIX+o.AppConstants.ATTR_SLIDE_PREFIX)){var p=c.replace(o.AppConstants.ATTR_BINDABLE_STANDARD_PREFIX+o.AppConstants.ATTR_SLIDE_PREFIX,"");p=c.replace(o.AppConstants.ATTR_BINDABLE_STANDARD_PREFIX+o.AppConstants.ATTR_SLIDE_PREFIX+o.AppConstants.ATTR_BINDABLE_PARSE_PREFIX,""),p=c.replace(o.AppConstants.ATTR_BINDABLE_STANDARD_PREFIX+o.AppConstants.ATTR_SLIDE_PREFIX+o.AppConstants.ATTR_BINDABLE_NUMBER_PREFIX,""),p=c.replace(o.AppConstants.ATTR_SLIDE_PREFIX+o.AppConstants.ATTR_BINDABLE_NUMBER_PREFIX,""),p=c.replace(o.AppConstants.ATTR_SLIDE_PREFIX+o.AppConstants.ATTR_BINDABLE_PARSE_PREFIX,""),p=c.replace(o.AppConstants.ATTR_SLIDE_PREFIX,""),p=p[0].toLowerCase()+p.substring(1),this.sliderOptions[p]=s}}}if(this.sliderOptions&&this.sliderOptions.customPaging){var u=this.sliderOptions.customPaging,d=void 0;this.sliderOptions.customPaging=function(e,i){d=u;var o=t.element.querySelector('[ph-slide-num="'+(i+1)+'"]'),n=void 0,r=void 0,a=(e.slideCount,void 0);if(o&&o.attributes)for(var s=0;s<o.attributes.length;s++)a=o.attributes[s].name,-1!=a.indexOf("thumb")&&(n=o.getAttribute(o.attributes[s].name),r=a.replace("data-ph-thumb-",""),d=d.replace("#"+r+"#",n));return d}}r.logger.debug(this.sliderOptions),this.sliderOptions&&this.sliderOptions.appendDots&&(this.sliderOptions.appendDots="[data-ph-id="+this.element.getAttribute("data-ph-id")+"] "+this.sliderOptions.appendDots),this.sliderOptions&&this.sliderOptions.appendArrows&&(this.sliderOptions.appendArrows="[data-ph-id="+this.element.getAttribute("data-ph-id")+"] "+this.sliderOptions.appendArrows)},t.prototype.loadScript=function(e,t,i){var n=this;return new Promise(function(r,a){var s=!1;if(s=n.isScriptAvailable(i,t))r();else{var l=[],c=!1;if(window&&(window[o.AppConstants.SCRIPTCACHE]=window[o.AppConstants.SCRIPTCACHE]||[],l=window[o.AppConstants.SCRIPTCACHE]),-1!=l.indexOf(e)?c=!0:l.push(e),c)var p=setInterval(function(){(s=n.isScriptAvailable(i,t))&&(clearInterval(p),r())},100);else{var u=document.createElement("script");u.src=e,u.onload=function(){r()};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(u,d)}}})},t.prototype.loadDependencies=function(){var e=this;return new Promise(function(t,i){var n=JSON.parse(JSON.stringify(h)),r=e.commonService.getCdnUrl()+n.shift();e.loadScript(r,o.AppConstants.JQUERY).then(function(){var i=e.commonService.getCdnUrl()+n.shift();e.loadScript(i,"migrateWarnings",!0).then(function(){var i=e.commonService.getCdnUrl()+n.shift();e.loadScript(i,"slick",!0).then(function(){t()})})})})},t}(n.PhenomWidgetAttribute);e.CardSliderAttribute=g=u([(0,t.customAttribute)(f),(0,t.autoinject)(),d("design:paramtypes",[Element,i.EventAggregator,r.CommonService,t.TemplatingEngine])],g)}),define("ph-common/app-constants",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=e.AppConstants=function e(){t(this,e)};i.TRUE="true",i.FALSE="false",i.JQUERY="jQuery",i.SCRIPTCACHE="phAppScriptCache",i.MEDIA_TYPE_IMAGE="image",i.MEDIA_TYPE_VIDEO="video",i.ATTR_BINDABLE_STANDARD_PREFIX="data-",i.ATTR_BINDABLE_PREFIX="pha-",i.ATTR_BINDABLE_PARSE_PREFIX="parse-",i.ATTR_BINDABLE_NUMBER_PREFIX="number-",i.ATTR_AU_TARGET_ID="au-target-id",i.ATTR_SLIDE_PREFIX="phslide",i.ATTR_MEDIA_TYPE="data-media-type",i.ATTR_WIDGET_REF="data-widget-ref",i.ATTR_GALLERY_ITEM_TYPE="data-gallery-item-type",i.ATTR_VIDEO_PROVIDER="data-gallery-video-provider",i.ATTR_VIDEO_ID="data-gallery-video-id",i.ATTR_SRC="src",i.ATTR_DATA_SRC="data-src",i.ATTR_ITEM_ID="data-item-id",i.ATTR_IS_GALLERY_ITEM="pha-gallery-item",i.EVENT_PLAY_VIDEO="PLAY_VIDEO",i.EVENT_PAUSE_VIDEO="PAUSE_VIDEO",i.EVENT_TRASCRIPT_VIDEO="EVENT_TRASCRIPT_VIDEO",i.EVENT_DESCRIPT_VIDEO="EVENT_DESCRIPT_VIDEO",i.EVENT_START_VIDEO="START_VIDEO",i.EVENT_LOAD_POPUP_SLIDER="load-popup-slider",i.EVENT_UNLOAD_POPUP_SLIDER="unload-popup-slider",i.PROVIDER_YOUTUBE="youtube",i.PROVIDER_VIMEO="vimeo",i.PROVIDER_VIDEO="video",i.PROVIDER_HTMLPlyr="native",i.PROVIDER_WISTIA="wistia",i.PROVIDER_PLYR="plyr",i.PROVIDER_BRIGHTCOVE="brightcove",i.PROVIDER_ABLE_PLAYER="ableplayer",i.PROVIDER_KALTURA_PLAYER="kaltura",i.CLASS_SLIDER_CONTAINER="ph-slider-container",i.CLASS_HIDE="hide",i.CLASS_VIDEOJS="ph-video-js",i.CLASS_ALLY_VIDEOJS="ph-a11y-video-js",i.CLASS_ABLE_VIDEOJS="ph-able-video-js",i.SELECTOR_GALLERY_ITEM=".ph-gallery-item",i.SELECTOR_GALLERY_ITEM_CTR=".ph-gallery-item-container",i.SELECTOR_GALLERY_ITEM_LINK=".ph-gallery-item-link",i.SELECTOR_GALLERY_CLOSE=".ph-gallery-close",i.SELECTOR_POPUP_CONTAINER=".popup-container",i.SELECTOR_GALLERY_CONTAINER=".ph-gallery-container"}),define("ph-common/ph-widget-attr",["exports","aurelia-dependency-injection","aurelia-event-aggregator","./ph-modal-dialog","./app-constants"],function(e,t,i,o,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomWidgetAttribute=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(o);e.PhenomWidgetAttribute=function(){function e(o,n,a){r(this,e),this.commonService=n,this.attrName=a,this.eventSubs=[],this.widgetBundle={},this.element=o,this.eventAggregator=t.Container.instance.get(i.EventAggregator);this.eventAggregator}return e.prototype.kebabCaseToCameCase=function(e){return e=e.replace(n.AppConstants.ATTR_BINDABLE_STANDARD_PREFIX+n.AppConstants.ATTR_BINDABLE_PREFIX,""),e=e.replace(n.AppConstants.ATTR_BINDABLE_PREFIX,""),e=e.replace(n.AppConstants.ATTR_BINDABLE_PARSE_PREFIX,""),e=e.replace(n.AppConstants.ATTR_BINDABLE_NUMBER_PREFIX,""),e.replace(/(\-\w)/g,function(e){return e[1].toUpperCase()})},e.prototype.parseBindableAttributes=function(e){for(var t=this.element.attributes,i=0;i<t.length;i++){var o=t[i],r=o.value;if(r&&r.length){var a=!1;-1!=o.name.indexOf(n.AppConstants.ATTR_BINDABLE_PARSE_PREFIX)&&(r=JSON.parse(r),a=!0),-1!=o.name.indexOf(n.AppConstants.ATTR_BINDABLE_NUMBER_PREFIX)&&(r=parseInt(r),a=!0);var s=this.kebabCaseToCameCase(o.name);r&&!a&&(r.toLowerCase()==n.AppConstants.TRUE?r=!0:r.toLowerCase()==n.AppConstants.FALSE&&(r=!1)),e&&(e[s]=r),this[s]=r}}},e.prototype.populateWidgetBundle=function(){var e=this;return this.commonService.getWidgetLangBundle(this.attrName,"","","","",this.getLocalWidgetBundle()).then(function(t){return e.widgetBundle=t})},e.prototype.getLocalWidgetBundle=function(){return null},e.prototype.raiseEvent=function(e,t){e&&e.trim().length>0&&t&&this.eventAggregator.publish(e,t)},e.prototype.subscribeToEvent=function(e,t){e&&e.trim().length>0&&t&&this.eventSubs.push(this.eventAggregator.subscribe(e,t))},e.prototype.openDialogPopup=function(e,t,i,o){"."!=e[0]&&(e="."+e);var n=this.element.querySelectorAll(e)[0];if(i){new a.default.Dialog(n,t,i)}else{new a.default.Dialog(n,t)}},e.prototype.closeDialogPopup=function(){a.default.closeCurrentDialog()},e.prototype.getView=function(e){if(e&&e.getAttribute("data-widget")&&"BODY"!=e.nodeName)return e.getAttribute("original-view")||"default";e&&this.getView(e.parentElement)},e.prototype.getWidgetName=function(e){return this.commonService.getWidgetName(e,this.attrName)},e.prototype.trackWidgetClick=function(e,t){var i={},o=this.commonService.fetchWidget(this.element);i.params={widgetId:this.attrName,widgetName:this.getWidgetName(this.element),widgetview:this.getView(this.element)},o&&(i.params.parentWidgetName=this.getWidgetName(o.elem),i.params.parentWidgetView=this.getView(o.elem),i.params.parentWidgetId=o.elemTag),this.commonService.processTrackingEvent(e,void 0,i,{},t)},e}()}),define("ph-common/ph-media-gallery/v1/ph-media-gallery",["exports","aurelia-framework","aurelia-event-aggregator","./../../ph-widget-attr","./../../app-constants","./../../index"],function(e,t,i,o,n,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.MediaGallery=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d="ph-media-gallery-v1",f=e.MediaGallery=function(e){function t(i,o,l,c){a(this,t);var p=s(this,e.call(this,i,l,d));return p.element=i,p.eventAggregator=o,p.commonService=l,p.templatingEngine=c,p.items=[],p.enablepopup=!0,p.disableSlick=!1,p.handleVideoInlineItemClick=function(e,t){p.galleryPopup.classList.remove(n.AppConstants.CLASS_HIDE);var i=p.element.querySelector(".video-popup"),o=e&&e.target.getAttribute(n.AppConstants.ATTR_ITEM_ID)||t;if(i&&i.classList.add("hide"),p.items.length){var r=p.galleryPopup.querySelector("["+n.AppConstants.ATTR_IS_GALLERY_ITEM+"]");r&&p.raiseEvent(n.AppConstants.EVENT_START_VIDEO,{targetId:p.getAttr(r,n.AppConstants.ATTR_AU_TARGET_ID),autoplay:"1"})}p.raiseEvent(n.AppConstants.EVENT_LOAD_POPUP_SLIDER,{itemIdx:o,targetId:p.getAttr(p.element.querySelector(n.AppConstants.SELECTOR_GALLERY_CONTAINER),n.AppConstants.ATTR_AU_TARGET_ID)})},p.handleGalleryItemClick=function(e){if(p.galleryPopup.classList.remove(n.AppConstants.CLASS_HIDE),p.items.length){var t=p.galleryPopup.querySelector("["+n.AppConstants.ATTR_IS_GALLERY_ITEM+"]");t&&p.raiseEvent(n.AppConstants.EVENT_START_VIDEO,{targetId:p.getAttr(t,n.AppConstants.ATTR_AU_TARGET_ID)});var i=p.galleryPopup.querySelector(".ph-gallery-footer"),o=e.currentTarget?e.currentTarget.querySelector(n.AppConstants.SELECTOR_GALLERY_ITEM):void 0;if(o&&i){var r=p.element.querySelector(".ph-gallery-footer .ph-gallery-transcript"),a=p.element.querySelector(".ph-gallery-footer .ph-gallery-description"),s=o.getAttribute("pha-description-video-id")||o.getAttribute("data-pha-description-video-id"),l=o.getAttribute("pha-transcript-video-id")||o.getAttribute("data-pha-transcript-video-id");s||l?i.classList.remove("hide"):i.classList.add("hide"),a&&(s?a.classList.remove("hide"):a.classList.add("hide"),a.classList.contains("ph-description-audio")&&a.classList.remove("ph-description-audio")),r&&(l?r.classList.remove("hide"):r.classList.add("hide"))}}var c=p.galleryPopup.querySelector(n.AppConstants.SELECTOR_GALLERY_CLOSE);try{p.openDialogPopup(n.AppConstants.SELECTOR_POPUP_CONTAINER,e.currentTarget,c),document.addEventListener("keyup",p.closeGalleryItem)}catch(e){console.error(e)}var u=p.element.querySelector(".popup-container");u&&u.removeAttribute("role");for(var d=p.galleryPopup.querySelectorAll("img"),f=0;f<d.length;f++)d[f].setAttribute("aria-hidden","true");p.raiseEvent(n.AppConstants.EVENT_LOAD_POPUP_SLIDER,{itemIdx:e.target.getAttribute(n.AppConstants.ATTR_ITEM_ID),targetId:p.getAttr(p.element.querySelector(n.AppConstants.SELECTOR_GALLERY_CONTAINER),n.AppConstants.ATTR_AU_TARGET_ID)})},p.closeGalleryItem=function(e){"Escape"!=e.key&&27!==e.keyCode&&27!==e.which||p.closeGallery()},p.handleTranscriptvideo=function(e){if(p.items.length){var t=p.galleryPopup.querySelector("["+n.AppConstants.ATTR_IS_GALLERY_ITEM+"]");t&&p.raiseEvent(n.AppConstants.EVENT_TRASCRIPT_VIDEO,{targetId:p.getAttr(t,n.AppConstants.ATTR_AU_TARGET_ID),eventName:"transcript_click"})}},p.handleDescriptionVideo=function(e){if(p.items.length){var t=e.currentTarget,i=!0,o=void 0;t&&(t.querySelector(".disableDescripton"),t.querySelector(".enableDescripton")),t&&t.classList.contains("ph-description-audio")?(t.classList.remove("ph-description-audio"),i=!1,o="disable_description_video_click"):(t.classList.add("ph-description-audio"),i=!0,o="enable_description_video_click");var r=p.galleryPopup.querySelector("["+n.AppConstants.ATTR_IS_GALLERY_ITEM+"]");r&&p.raiseEvent(n.AppConstants.EVENT_DESCRIPT_VIDEO,{targetId:p.getAttr(r,n.AppConstants.ATTR_AU_TARGET_ID),isDescription:i,eventName:o})}},r.logger.debug("Loaded custom attribtue ... ",i),p}return l(t,e),t.prototype.attached=function(){this.parseBindableAttributes(),this.prepareMediaGalleryViewer()},t.prototype.prepareBindableAttributes=function(e,t,i){e=e||this.element;for(var o=e.attributes,r=0;r<o.length;r++){var a=o[r];if(!i||a.name.startsWith(n.AppConstants.ATTR_BINDABLE_PREFIX)||a.name.startsWith(n.AppConstants.ATTR_BINDABLE_STANDARD_PREFIX+n.AppConstants.ATTR_BINDABLE_PREFIX)){var s=a.name,l=a.value;l&&(l.toLowerCase()==n.AppConstants.TRUE?l=!0:l.toLowerCase()==n.AppConstants.FALSE&&(l=!1)),t&&(t[s]=a.value)}}},t.prototype.isImage=function(e){return e&&e.getAttribute(n.AppConstants.ATTR_GALLERY_ITEM_TYPE)===n.AppConstants.MEDIA_TYPE_IMAGE},t.prototype.isVideo=function(e){return e&&e.getAttribute(n.AppConstants.ATTR_GALLERY_ITEM_TYPE)===n.AppConstants.MEDIA_TYPE_VIDEO},t.prototype.getAttr=function(e,t){return e.getAttribute(t)},t.prototype.closeGallery=function(){if(this.disableSlick||this.raiseEvent(n.AppConstants.EVENT_UNLOAD_POPUP_SLIDER,{targetId:this.getAttr(this.element.querySelector(n.AppConstants.SELECTOR_GALLERY_CONTAINER),n.AppConstants.ATTR_AU_TARGET_ID)}),this.items.length){var e=this.galleryPopup.querySelector(".slick-track .slick-active")||this.element.querySelector(n.AppConstants.SELECTOR_GALLERY_ITEM_CTR),t=e?e.getAttribute(n.AppConstants.ATTR_WIDGET_REF):void 0;if(e&&t){var i=e.querySelector("["+t+"]");i&&this.raiseEvent(n.AppConstants.EVENT_PAUSE_VIDEO,{targetId:this.getAttr(i,n.AppConstants.ATTR_AU_TARGET_ID)})}}var o=this.galleryPopup.parentElement.parentElement.querySelector(".video-popup");o&&o.classList.remove("hide"),this.galleryPopup.classList.add(n.AppConstants.CLASS_HIDE),this.closeDialogPopup(),document.removeEventListener("keyup",this.closeGalleryItem)},t.prototype.parseGalleryItems=function(){for(var e=this,t=this.element.querySelectorAll(n.AppConstants.SELECTOR_GALLERY_ITEM_LINK),i=this.element.querySelectorAll(".ph-slider-container"),o=void 0,r=0;r<t.length;r++){i.length&&(o=i[r]);var a=t[r];a.setAttribute(n.AppConstants.ATTR_ITEM_ID,r+""),this.enablepopup?(a.addEventListener("click",this.handleGalleryItemClick),a.addEventListener("keypress",function(t){13==t.keyCode&&e.handleGalleryItemClick(t)})):(a.addEventListener("click",this.handleVideoInlineItemClick),setTimeout(function(){i.length&&o.classList.remove("ph-slide-loader")},100));var s=a.querySelector(n.AppConstants.SELECTOR_GALLERY_ITEM);if(s){s.setAttribute(n.AppConstants.ATTR_ITEM_ID,r+"");var l={};this.isImage(s)?(l.type=n.AppConstants.MEDIA_TYPE_IMAGE,"true"!=s.getAttribute("data-ph-lazy")?l.src=this.getAttr(s,n.AppConstants.ATTR_SRC):l.src=this.getAttr(s,n.AppConstants.ATTR_DATA_SRC),l.alt=this.getAttr(s,"alt")):this.isVideo(s)&&(l.type=n.AppConstants.MEDIA_TYPE_VIDEO,l.widget=this.getAttr(s,n.AppConstants.ATTR_WIDGET_REF),l.provider=this.getAttr(s,n.AppConstants.ATTR_VIDEO_PROVIDER));var c={};this.prepareBindableAttributes(s,c,!0),c["pha-gallery-item"]=!0,l.attribs=c,this.items.push(l)}}},t.prototype.prepareMediaGalleryViewer=function(){var e=this,t=this.element.querySelector(n.AppConstants.SELECTOR_GALLERY_CLOSE);t&&t.addEventListener("click",function(){e.closeGallery()});var i=this.element.querySelector(".ph-gallery-footer .ph-gallery-transcript");i&&i.addEventListener("click",this.handleTranscriptvideo);var o=this.element.querySelector(".ph-gallery-footer .ph-gallery-description");o&&o.addEventListener("click",this.handleDescriptionVideo),this.galleryPopup=this.element.querySelector(n.AppConstants.SELECTOR_POPUP_CONTAINER),document.addEventListener("keyup",this.closeGalleryItem),this.parseGalleryItems();var r=this.element.querySelector(n.AppConstants.SELECTOR_GALLERY_ITEM_CTR);this.items.forEach(function(t,i){var o=r.cloneNode();if(o.setAttribute(n.AppConstants.ATTR_MEDIA_TYPE,t.type),t.type===n.AppConstants.MEDIA_TYPE_IMAGE){var a=document.createElement("img"),s=e.galleryLazyLoad?"data-lazy":"src";a.setAttribute(s,t.src),a.alt=t.alt,o.appendChild(a)}else if(t.type===n.AppConstants.MEDIA_TYPE_VIDEO){var l=document.createElement("div");if(l.setAttribute(t.widget,t.provider),o.setAttribute(n.AppConstants.ATTR_WIDGET_REF,t.widget),t.attribs)for(var c in t.attribs)t.attribs.hasOwnProperty(c)&&l.setAttribute(c,t.attribs[c]);o.appendChild(l),e.templatingEngine&&e.templatingEngine.enhance&&e.templatingEngine.enhance({element:l})}r.parentElement.appendChild(o);var p=e.element.querySelector("[ph-video-v1]");!e.enablepopup&&p&&"1"==p.getAttribute("pha-autoplay")&&e.handleVideoInlineItemClick(void 0,i)}),r.parentElement.removeChild(r)},t}(o.PhenomWidgetAttribute);p([t.bindable,u("design:type",Boolean)],f.prototype,"disableSlick",void 0),e.MediaGallery=f=p([(0,t.customAttribute)(d),(0,t.autoinject)(),u("design:paramtypes",[Element,i.EventAggregator,r.CommonService,t.TemplatingEngine])],f)}),define("ph-common/ph-video/v1/ph-video",["exports","aurelia-framework","./../../index","./../../app-constants","./../../ph-widget-attr","./video-player-factory"],function(e,t,i,o,n,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.VideoAttribute=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d="ph-video-v1",f=e.VideoAttribute=function(e){function t(n,r,l){a(this,t);var c=s(this,e.call(this,n,r,d));return c.element=n,c.commonService=r,c.videoPlayerFactory=l,c.playerOptions={},c.handleVideoPlayBroadcast=function(e){var t=c.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);e&&e.targetId!=t&&c.player.pause(),e&&e.targetId==t&&c.element&&c.element.classList&&c.element.classList.contains("hide")&&c.element.classList.remove("hide")},c.handleVideoPause=function(e){var t=c.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);e&&e.targetId==t&&c.player.pause()},c.handleLoadVideo=function(e){var t=c.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);e&&e.targetId==t&&(c.playerOptions.autoplay=e.autoplay||c.playerOptions.autoplay,c.player.load())},c.handleTranscriptVideo=function(e){var t=c.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);e&&e.targetId==t&&c.playerOptions.transcriptVideoId&&(c.trackEvent(e.eventName,c.playerOptions.transcriptVideoId),c.handleVideoPause(e),window.open(c.playerOptions.transcriptVideoId))},c.handleDescriptVideo=function(e){var t=c.element.getAttribute(o.AppConstants.ATTR_AU_TARGET_ID);if(e&&e.targetId==t){var i=void 0;i=e.isDescription&&c.playerOptions.descriptionVideoId?c.playerOptions.descriptionVideoId:"video"==c.provider?c.playerOptions.videoUrl:c.playerOptions.videoId,c.player.changeVideo(i),c.trackEvent(e.eventName,i)}},c.trackEvent=function(t,o){var n={};n.videoid=o||c.playerOptions.videoId,n.videotype=c.provider,i.logger.debug(t,n),e.prototype.trackWidgetClick.call(c,t,n)},c}return l(t,e),t.prototype.valueChanged=function(e,t){this.provider=e},t.prototype.attached=function(){this.subscribeToEvent(o.AppConstants.EVENT_PLAY_VIDEO,this.handleVideoPlayBroadcast),this.subscribeToEvent(o.AppConstants.EVENT_PAUSE_VIDEO,this.handleVideoPause),this.subscribeToEvent(o.AppConstants.EVENT_START_VIDEO,this.handleLoadVideo),this.subscribeToEvent(o.AppConstants.EVENT_TRASCRIPT_VIDEO,this.handleTranscriptVideo),this.subscribeToEvent(o.AppConstants.EVENT_DESCRIPT_VIDEO,this.handleDescriptVideo),this.parseBindableAttributes(this.playerOptions),this.initPlayer()},t.prototype.detached=function(){this.eventSubs.forEach(function(e){e.dispose()})},t.prototype.initPlayer=function(){this.player=r.VideoPlayerFactory.createPlayer(this.element,this.provider,this.playerOptions),this.player.setEventAggregator(this.eventAggregator),this.player.setCommonService(this.commonService),this.player.setTrackingManager(this.trackEvent),this.playerOptions.galleryItem||this.player.load()},t}(n.PhenomWidgetAttribute);e.VideoAttribute=f=p([(0,t.customAttribute)(d),(0,t.autoinject)(),u("design:paramtypes",[Element,i.CommonService,r.VideoPlayerFactory])],f)}),define("ph-common/ph-video/v1/video-player-factory",["exports","./../../app-constants","./youtube-player","./vimeo-player","./video-player","./wistia-player","./ally-video-player","./brightcove-player","./able-player","./kaltura-player"],function(e,t,i,o,n,r,a,s,l,c){"use strict";function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.VideoPlayerFactory=void 0;e.VideoPlayerFactory=function(){function e(){p(this,e)}return e.createPlayer=function(e,p,u){return p===t.AppConstants.PROVIDER_YOUTUBE?new i.YoutubePlayer(e,u):p===t.AppConstants.PROVIDER_VIMEO?new o.VimeoPlayer(e,u):p===t.AppConstants.PROVIDER_HTMLPlyr||p===t.AppConstants.PROVIDER_VIDEO?new n.VideoPlayer(e,u):p===t.AppConstants.PROVIDER_WISTIA?new r.WistiaPlayer(e,u):p===t.AppConstants.PROVIDER_PLYR?new a.AllyVideoPlayer(e,u):p===t.AppConstants.PROVIDER_BRIGHTCOVE?new s.BrightcovePlayer(e,u):p===t.AppConstants.PROVIDER_ABLE_PLAYER?new l.AblePlayer(e,u):p===t.AppConstants.PROVIDER_KALTURA_PLAYER?new c.KalturaPlayer(e,u):void 0},e}()}),define("ph-common/ph-video/v1/youtube-player",["exports","./base-video-player"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.YoutubePlayer=void 0;var r="onYouTubeIframeAPIReady";e.YoutubePlayer=function(e){function t(n,a){i(this,t);var s=o(this,e.call(this,n,a));return s.element=n,s.playerOptions={},s.playerLoaded=!1,s.onApiReady=function(){},s.onPlayerReady=function(e,t){s.player=t||e.target,s.pollingInterval=setInterval(function(e){var t=s.player.getPlayerState();s.onPlayerStateChange({data:t},!s.playerLoaded)},240),setTimeout(function(){s.player.addEventListener("onStateChange",function(e){s.onPlayerStateChange(e)})},500),s.playerOptions.volume<=0&&s.mute(),"1"==s.playerOptions.autoplay&&s.play(),"1"==s.playerOptions.loop&&s.loop()},s.onPlayerStateChange=function(t,i){!i&&s.pollingInterval&&(clearInterval(s.pollingInterval),s.pollingInterval=void 0);var o=t.data;o==YT.PlayerState.PLAYING?e.prototype.play.call(s):o==YT.PlayerState.PAUSED&&e.prototype.pause.call(s)},s.playerOptions=a||{},window&&(window[r]=s.onApiReady),s.playerContainer=document.createElement("div"),s.element.innerHTML="",s.element.appendChild(s.playerContainer),s}return n(t,e),t.prototype.isApiRequested=function(){return window?window.YTSCRIPTADDED:void 0},t.prototype.isApiLoaded=function(){return window?window.YT:void 0},t.prototype.initPlayer=function(){var e=this;if(this.player)return this.playerLoaded=!0,void this.onPlayerReady(void 0,this.player);if(this.playerOptions.playerVars=this.playerOptions.playerVars||{},this.playerOptions.playerVars.rel=this.playerOptions.rel||0,isNaN(this.playerOptions.playerVars.rel)&&(this.playerOptions.playerVars.rel=parseInt(this.playerOptions.playerVars.rel,10)),this.playerOptions.loop&&(this.playerOptions.playerVars.loop=parseInt(this.playerOptions.loop,10)),this.playerOptions.width=this.playerOptions.width||"100%",this.playerOptions.height=this.playerOptions.height||"100%",this.playerOptions.playerVars.modestbranding=this.playerOptions.modestbranding||1,isNaN(this.playerOptions.playerVars.modestbranding)&&(this.playerOptions.playerVars.modestbranding=parseInt(this.playerOptions.playerVars.modestbranding,10)),this.playerOptions.events={onReady:this.onPlayerReady},window.YT&&YT.Player){new YT.Player(this.playerContainer,this.playerOptions)}else setTimeout(function(){return e.initPlayer()},300)},t.prototype.load=function(){var e=this;if(!this.isApiRequested()){window.YTSCRIPTADDED=!0;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}this.isApiLoaded()?this.initPlayer():setTimeout(function(){return e.initPlayer()},300)},t.prototype.play=function(){this.player&&this.player.playVideo()},t.prototype.pause=function(){this.player&&this.player.pauseVideo()},t.prototype.stop=function(){e.prototype.stop.call(this),this.player&&this.player.stopVideo()},t.prototype.mute=function(){e.prototype.mute.call(this),this.player&&this.player.mute()},t.prototype.loop=function(){e.prototype.loop.call(this),this.player&&this.player.setLoop(!0)},t.prototype.changeVideo=function(e){e?this.player.loadVideoById(e):this.player.loadVideoById(this.playerOptions.videoId)},t}(t.BaseVideoPlayer)}),define("ph-common/ph-video/v1/base-video-player",["exports","./../../app-constants"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.BaseVideoPlayer=void 0;e.BaseVideoPlayer=function(){function e(t,o,n){i(this,e),this.element=t,this.eventAggregator=n}return e.prototype.setEventAggregator=function(e){this.eventAggregator=e},e.prototype.setCommonService=function(e){this.commonService=e},e.prototype.setTrackingManager=function(e){this.trackEvent=e},e.prototype.load=function(){},e.prototype.play=function(){this.eventAggregator.publish(t.AppConstants.EVENT_PLAY_VIDEO,{targetId:this.element.getAttribute(t.AppConstants.ATTR_AU_TARGET_ID)}),this.trackEvent("play_click")},e.prototype.pause=function(){this.trackEvent("pause_click")},e.prototype.stop=function(){},e.prototype.mute=function(){},e.prototype.loop=function(){},e.prototype.controls=function(){},e.prototype.preload=function(e){},e}()}),define("ph-common/ph-video/v1/vimeo-player",["exports","./base-video-player"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.VimeoPlayer=void 0;e.VimeoPlayer=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.element=n,a.playerOptions={},a.onApiReady=function(){},a.onPlayerReady=function(e){"1"==a.playerOptions.autoplay&&a.play()},a.playerOptions=r||{},a.playerContainer=document.createElement("div"),a.element.innerHTML="",a.element.appendChild(a.playerContainer),a}return n(t,e),t.prototype.isApiRequested=function(){return window?window.VIMEOSCRIPTADDED:void 0},t.prototype.isApiLoaded=function(){return window?window.Vimeo:void 0},t.prototype.initPlayer=function(){var t=this;if(this.player)return void this.onPlayerReady(this.player);if(this.playerOptions.id=this.playerOptions.videoId,this.playerOptions.width=this.playerOptions.width||560,this.playerOptions.autopause=!0,("1"==this.playerOptions.autoplay||this.playerOptions.volume<=0)&&this.mute(),window.Vimeo&&Vimeo.Player){var i=new Vimeo.Player(this.playerContainer,this.playerOptions);i.ready().then(this.onPlayerReady),i.on("play",function(i){e.prototype.play.call(t)}),i.on("pause",function(i){e.prototype.pause.call(t)}),this.player=i}else setTimeout(function(){return t.initPlayer()},300)},t.prototype.load=function(){var e=this;if(!this.isApiRequested())if(window.VIMEOSCRIPTADDED=!0,window.require)window.require(["https://player.vimeo.com/api/player.js"],function(e){window.Vimeo={Player:e}});else{var t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}this.isApiLoaded()?this.initPlayer():setTimeout(function(){return e.initPlayer()},300)},t.prototype.play=function(){this.player&&this.player.play()},t.prototype.pause=function(){this.player&&this.player.pause()},t.prototype.stop=function(){e.prototype.stop.call(this)},t.prototype.mute=function(){e.prototype.mute.call(this),this.playerOptions.muted=!0},t.prototype.loop=function(){e.prototype.loop.call(this),this.player},t.prototype.changeVideo=function(e){e?this.player.loadVideo(e):this.player.loadVideo(this.playerOptions.videoId)},t}(t.BaseVideoPlayer)}),define("ph-common/ph-video/v1/video-player",["exports","./../../app-constants","./base-video-player"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.VideoPlayer=void 0;e.VideoPlayer=function(e){function i(t,r){o(this,i);var a=n(this,e.call(this,t,r));return a.element=t,a.playerOptions={},a.onApiReady=function(){},a.onPlayerReady=function(e){a.playerOptions.volume<=0&&a.mute(),"1"==a.playerOptions.autoplay=="1"&&a.play(),"1"==a.playerOptions.loop&&a.loop(),"0"==a.playerOptions.controls&&a.controls(),a.playerOptions.preload&&a.preload(a.playerOptions.preload)},a.videoControlsHandler=function(){a.videoElem.setAttribute("controls","controls")},a.playerOptions=r||{},a.playerContainer=document.createElement("div"),a.element.innerHTML="",a.element.appendChild(a.playerContainer),a}return r(i,e),i.prototype.isApiRequested=function(){return window?window.VIDEOJSSCRIPTADDED:void 0},i.prototype.isApiLoaded=function(){return window?window.videojs:void 0},i.prototype.initPlayer=function(){var i=this,o={src:this.playerOptions.videoUrl,controlsList:"nodownload",disablepictureinpicture:!0};if(this.player)return void this.onPlayerReady({});if(this.playerOptions.width=this.playerOptions.width||560,this.playerOptions.autopause=!0,this.playerOptions.controls=this.playerOptions.controls||!0,this.playerOptions.preload=this.playerOptions.preload||"auto",this.videoElem=document.createElement("video"),this.videoElem.classList.add(t.AppConstants.CLASS_VIDEOJS),this.videoElem.addEventListener("timeupdate",this.videoControlsHandler,!1),"1"==this.playerOptions.autoplay&&(o.playsinline=!0,o.muted=!0),Object.keys(o).forEach(function(e,t){i.videoElem.setAttribute(e,o[e])}),this.playerOptions.cclist&&"string"==typeof this.playerOptions.cclist){try{this.playerOptions.cclist=JSON.parse(this.playerOptions.cclist)||[]}catch(e){}this.playerOptions.cclist.length&&this.videoElem.setAttribute("crossOrigin","true"),this.playerOptions.cclist.forEach(function(e,t){var o=document.createElement("track");for(var n in e)o.setAttribute(n,e[n]);i.videoElem.appendChild(o)})}this.playerOptions.controls&&this.videoElem.setAttribute("controls",""),this.player=this.videoElem,this.player.addEventListener("playing",function(){e.prototype.play.call(i)}),this.player.addEventListener("pause",function(){e.prototype.pause.call(i)}),this.playerContainer.appendChild(this.videoElem),this.onPlayerReady({})},i.prototype.load=function(){this.initPlayer()},i.prototype.play=function(){var e=this;setTimeout(function(){e.player&&e.player.play()},10)},i.prototype.pause=function(){this.player&&this.player.pause()},i.prototype.stop=function(){e.prototype.stop.call(this)},i.prototype.mute=function(){e.prototype.mute.call(this),this.player&&(this.player.muted=!0)},i.prototype.loop=function(){e.prototype.loop.call(this),this.player&&(this.player.loop=!0)},i.prototype.controls=function(){e.prototype.controls.call(this),this.player&&(this.player.controls=!1)},i.prototype.preload=function(t){e.prototype.preload.call(this,t),this.player&&(this.player.preload=t)},i.prototype.changeVideo=function(e){e?(this.player.setAttribute("src",e),this.player.load(),this.player.play()):(this.player.setAttribute("src",this.playerOptions.videoUrl),this.player.play())},i.prototype.detached=function(){this.videoElem.removeEventListener("timeUpdate",this.videoControlsHandler)},i}(i.BaseVideoPlayer)}),define("ph-common/ph-video/v1/wistia-player",["exports","./base-video-player"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.WistiaPlayer=void 0;e.WistiaPlayer=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.element=n,a.playerOptions={},a.onApiReady=function(){},a.onPlayerReady=function(t,i,o){a.player=i||t,a.playerOptions.volume<=0&&a.mute(),"1"==a.playerOptions.autoplay&&a.play(),o||(a.player.bind("pause",function(){e.prototype.pause.call(a)}),a.player.bind("play",function(){e.prototype.play.call(a)}))},a.playerOptions=r||{},a.playerContainer=document.createElement("div"),a.element.innerHTML="",a.element.appendChild(a.playerContainer),a}return n(t,e),t.prototype.isApiRequested=function(){return window?window.WISTIASCRIPTADDED:void 0},t.prototype.isApiLoaded=function(){return window?window._wq:void 0},t.prototype.initPlayer=function(){if(this.player)return void this.onPlayerReady(void 0,this.player,!0);this.playerOptions.id=this.playerOptions.videoId,this.playerOptions.width=this.playerOptions.width||"100%",this.playerOptions.autopause=!0,window._wq=window._wq||[],window._wq.push({id:"_all",options:this.playerOptions,onReady:this.onPlayerReady})},t.prototype.load=function(){var e=this;if(!this.isApiRequested()){window.WISTIASCRIPTADDED=!0;var t=document.createElement("script");t.src="//fast.wistia.com/assets/external/E-v1.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}this.playerContainer.classList.add("wistia_embed"),this.playerContainer.classList.add("wistia_async_"+this.playerOptions.videoId),this.isApiLoaded()?this.initPlayer():setTimeout(function(){return e.initPlayer()},300)},t.prototype.play=function(){this.player&&this.player.play()},t.prototype.pause=function(){this.player&&this.player.pause()},t.prototype.stop=function(){e.prototype.stop.call(this)},t.prototype.mute=function(){e.prototype.mute.call(this),this.player&&this.player.mute()},t.prototype.loop=function(){e.prototype.loop.call(this),this.player},t.prototype.changeVideo=function(e){e?this.player.replaceWith(e):this.player.replaceWith(this.playerOptions.id)},t}(t.BaseVideoPlayer)}),define("ph-common/ph-video/v1/ally-video-player",["exports","./../../index","./../../app-constants","./base-video-player"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.AllyVideoPlayer=void 0;var s=["play","rewind","fast-forward","progress","current-time","mute","volume","captions","settings","fullscreen"];e.AllyVideoPlayer=function(e){function o(t,i){n(this,o);var a=r(this,e.call(this,t,i));return a.element=t,a.playerOptions={},a.onPlayerReady=function(e){a.playerOptions.volume<=0&&a.mute(),"1"==a.playerOptions.autoplay&&a.play(),"1"==a.playerOptions.loop&&a.loop(),"0"==a.playerOptions.controls&&a.controls(),a.playerOptions.preload&&a.preload(a.playerOptions.preload)},a.playerOptions=i||{},a.element.innerHTML="",a}return a(o,e),o.prototype.isApiRequested=function(){return window?window.PLYRSCRIPTADDED:void 0},o.prototype.isApiLoaded=function(){return window?window.Plyr:void 0},o.prototype.load=function(){var e=this;if(!this.isApiRequested()){if(window.PLYRSCRIPTADDED=!0,window.require)window.require([this.commonService.getCdnUrl()+"/common/js/vendor/polyfill.min.js"],function(){window.require([e.commonService.getCdnUrl()+"/common/js/vendor/plyr.min.3.5.6.js"],function(e){})});else{var t=document.createElement("script");t.src=this.commonService.getCdnUrl()+"/common/js/vendor/plyr.min.3.5.6.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",this.commonService.getCdnUrl()+"/common/js/vendor/plyr.3.5.6.css"),document.head.appendChild(o)}this.isApiLoaded()?this.initPlayer():setTimeout(function(){return e.initPlayer()},300)},o.prototype.initPlayer=function(){var o=this,n={src:this.playerOptions.videoUrl,controlsList:"nodownload",disablepictureinpicture:!0,controls:this.playerOptions.controls||!0,preload:this.playerOptions.preload||"auto",playsinline:"",autopause:!0};if(this.player)return void this.onPlayerReady({});if(window.Plyr){this.playerOptions.width=this.playerOptions.width||560;var r=document.createElement("video");if(r.classList.add(i.AppConstants.CLASS_ALLY_VIDEOJS),Object.keys(n).forEach(function(e,t){r.setAttribute(e,n[e])}),this.playerOptions.cclist&&"string"==typeof this.playerOptions.cclist){try{this.playerOptions.cclist=JSON.parse(this.playerOptions.cclist)||[]}catch(e){t.logger.error("Unable to parse captions")}this.playerOptions.cclist.length&&r.setAttribute("crossOrigin","true"),this.playerOptions.cclist.forEach(function(e,t){var i=document.createElement("track");for(var o in e)i.setAttribute(o,e[o]);r.appendChild(i)})}this.element.appendChild(r),this.player=new Plyr(r,{controls:s}),this.element.style.width=this.playerOptions.width,this.element.style.height=this.playerOptions.height,"absolute"==window.getComputedStyle(r).position&&(r.parentElement.style.paddingBottom="44.25%");var a=void 0,l=void 0,c=void 0,p=void 0;this.player&&this.player.elements&&this.player.elements.container&&(this.player.elements.container.setAttribute("role","region"),this.player.elements.container.setAttribute("type","region"),this.player.elements.container.setAttribute("aria-label","video player"),this.player.elements.container.removeAttribute("tabindex")),this.player&&this.player.elements&&this.player.elements.buttons&&(a=this.player.elements.buttons.play&&this.player.elements.buttons.play[0],l=this.player.elements.buttons.mute,c=this.player.elements.buttons.captions,p=this.player.elements.buttons.fullscreen);for(var u=document.querySelectorAll("button,input"),d=0;d<u.length;d++)u[d].hasAttribute("tabindex")||u[d].setAttribute("tabindex","0");var f=this.commonService.getTranslations(),h=void 0;f&&(h=JSON.parse(JSON.stringify(f.masterData||{})));var g=h.Pause||"Pause";"1"==this.playerOptions.autoplay&&a&&a.setAttribute("aria-label",g),r.addEventListener("playing",function(){a&&a.setAttribute("aria-label",g),e.prototype.play.call(o)}),r.addEventListener("pause",function(){var t=h.Play||"Play";a&&a.setAttribute("aria-label",t),e.prototype.pause.call(o)}),r.onvolumechange=function(){if(o.player.muted){var e=h.Unmute||"Unmute";l&&l.setAttribute("aria-label",e)}else{var t=h.Mute||"Mute";l&&l.setAttribute("aria-label",t)}},c.addEventListener("click",function(){if(c.pressed){var e=h["Disable captions"]||"Disable captions";c.setAttribute("aria-label",e)}else{var t=h["Enable captions"]||"Enable captions";c.setAttribute("aria-label",t)}}),p.addEventListener("click",function(){if(p.pressed){var e=h["Enter fullscreen"]||"Enter fullscreen";p.setAttribute("aria-label",e)}else{var t=h["Exit fullscreen"]||"Exit fullscreen";p.setAttribute("aria-label",t)}}),this.onPlayerReady({})}else setTimeout(function(){return o.initPlayer()},300)},o.prototype.mute=function(){e.prototype.mute.call(this),this.player&&(this.player.muted=!0)},o.prototype.play=function(){var e=this;setTimeout(function(){e.player&&e.player.play()},10)},o.prototype.pause=function(){this.player&&this.player.pause()},o.prototype.loop=function(){e.prototype.loop.call(this),this.player&&(this.player.loop=!0)},o.prototype.controls=function(){e.prototype.controls.call(this),this.player&&(this.player.controls=!1)},o.prototype.preload=function(t){e.prototype.preload.call(this,t),this.player&&(this.player.preload=t)},o}(o.BaseVideoPlayer)}),define("ph-common/ph-video/v1/brightcove-player",["exports","./base-video-player"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BrightcovePlayer=void 0;e.BrightcovePlayer=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.element=n,a.playerOptions={},a.videoQueue=[],a.initPlayer=function(){if(a.player)return void a.onPlayerReady({});a.player=videojs(a.bcplayerId),a.playerOptions.autoplay?a.play():a.pause();var e=a.element.querySelector("video");e.parentElement.style.width="100%",e.parentElement.style.height="100%","absolute"==window.getComputedStyle(e).position&&(e.parentElement.style.position="absolute"),setTimeout(function(){a.videoQueue.length&&a.videoQueue.forEach(function(e){a.bcplayerId==e.bcplayerId&&e.callback(e)})},300),a.onPlayerReady({})},a.onPlayerReady=function(e){a.playerOptions.volume<=0&&a.mute(),"1"==a.playerOptions.autoplay&&a.play(),"1"==a.playerOptions.loop&&a.loop(),"0"==a.playerOptions.controls&&a.controls(),a.playerOptions.preload&&a.preload(a.playerOptions.preload)},a.playerOptions=r||{},a.element.innerHTML="",a}return n(t,e),t.prototype.attached=function(){},t.prototype.load=function(){var e=this;if(this.bcplayerId="phBCVideo-"+(new Date).getMilliseconds(),this.player)this.initPlayer();else{this.loadVideoElem();var t="https://players.brightcove.net/"+this.playerOptions.accountId+"/"+this.playerOptions.playerId+"_default/index.min";if(window.require){window.require.config({paths:{bc:t},context:this.bcplayerId,waitSeconds:30})(["bc"],function(){e.initPlayer()})}else{var i=document.createElement("script");i.src=t;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o),o.onload=function(){e.initPlayer()}}}},t.prototype.loadVideoElem=function(){var e='<video id="'+this.bcplayerId+'" \n                                data-video-id="'+this.playerOptions.videoId+'" \n                                data-account="'+this.playerOptions.accountId+'" \n                                data-player="'+this.playerOptions.playerId+'" \n                                data-embed="default" class="video-js" \n                                controls="'+(this.playerOptions.controls||!0)+'"\n                                preload="'+(this.playerOptions.preload||"auto")+'"\n                                poster="'+(this.playerOptions.poster||"")+'">\n                            </video>',t=document.createElement("div");t.setAttribute("id",this.bcplayerId),t.innerHTML=e,this.element.innerHTML=t.outerHTML},t.prototype.mute=function(){e.prototype.mute.call(this),this.player&&(this.player.muted=!0)},t.prototype.play=function(e){var t=this;setTimeout(function(){t.player&&(!t.player&&e?(e.callback=t.play,t.videoQueue.push(e)):t.player&&t.player.play())},10)},t.prototype.pause=function(e){!this.player&&e?(e.callback=this.pause,this.videoQueue.push(e)):this.player&&this.player.pause()},t.prototype.loop=function(){e.prototype.loop.call(this),this.player&&(this.player.loop=!0)},t.prototype.controls=function(){e.prototype.controls.call(this),this.player&&(this.player.controls=!1)},t.prototype.preload=function(t){e.prototype.preload.call(this,t),this.player&&(this.player.preload=t)},t}(t.BaseVideoPlayer)}),define("ph-common/ph-video/v1/able-player",["exports","./../../index","./../../app-constants","./base-video-player"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.AblePlayer=void 0;var s=["/common/js/vendor/jquery.min.3.2.1.js","/common/js/vendor/js-cookie.js","/common/js/vendor/ableplayer.min.js"];e.AblePlayer=function(e){function o(t,a){n(this,o);var s=r(this,e.call(this,t,a));return s.element=t,s.playerOptions={},s.onApiReady=function(){},s.onPlayerReady=function(e){s.playerOptions.volume<=0&&e.setAttribute("volume",0),"1"==s.playerOptions.autoplay&&(e.setAttribute("autoplay","1"),e.play()),"1"==s.playerOptions.loop&&e.setAttribute("loop","1"),s.playerOptions.preload&&s.preload(s.playerOptions.preload)},s.isScriptAvailable=function(e,t){var o=!1;return window?(e&&window[i.AppConstants.JQUERY]&&(window[i.AppConstants.JQUERY][t]?o=!0:window[i.AppConstants.JQUERY]()[t]&&(o=!0)),window[t]&&(o=!0)):require&&require.defined&&require.defined(t)&&(o=!0),o},s.playerOptions=a||{},s.element.innerHTML="",s}return a(o,e),o.prototype.isApiRequested=function(){return window?window.ABLESCRIPTADDED:void 0},o.prototype.isApiLoaded=function(){return window?window.AblePlayer:void 0},o.prototype.load=function(){var e=this;if(this.isApiRequested())this.initPlayer();else{window.ABLESCRIPTADDED=!0;var t=JSON.parse(JSON.stringify(s)),o=this.commonService.getCdnUrl()+t.shift();this.loadScript(o,i.AppConstants.JQUERY).then(function(){var i=e.commonService.getCdnUrl()+t.shift();window.require&&window.require([i],function(e){window.Cookies=e});var o=e.commonService.getCdnUrl()+t.shift();e.loadScript(o,"AblePlayer").then(function(){var t=document.createElement("link"),i=e.commonService.getCdnUrl()+"/common/js/vendor/ableplayer.min.css";t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",i),document.head.appendChild(t),setTimeout(function(){e.initPlayer()},100)})})}},o.prototype.initPlayer=function(){var o=this;this.playerId="phAbPlVideo-"+(new Date).getMilliseconds();var n={src:this.playerOptions.videoUrl,controlsList:"nodownload",disablepictureinpicture:!0};if(this.player)return void this.onPlayerReady(this.player);if(window.AblePlayer){this.playerOptions.width=this.playerOptions.width,this.playerOptions.autopause=!0,this.playerOptions.controls=this.playerOptions.controls||!0,this.playerOptions.preload=this.playerOptions.preload||"auto";var r=document.createElement("video");if(r.classList.add(i.AppConstants.CLASS_ABLE_VIDEOJS),Object.keys(n).forEach(function(e,t){r.setAttribute(e,n[e])}),this.playerOptions.cclist&&"string"==typeof this.playerOptions.cclist){try{this.playerOptions.cclist=JSON.parse(this.playerOptions.cclist)||[]}catch(e){t.logger.error("Unable to parse captions")}this.playerOptions.cclist.length&&r.setAttribute("crossOrigin","true"),this.playerOptions.cclist.forEach(function(e,t){var i=document.createElement("track");for(var o in e)i.setAttribute(o,e[o]);r.appendChild(i)})}r.setAttribute("id",this.playerId),r.setAttribute("preload","auto"),r.setAttribute("playsinline",""),r.setAttribute("data-include-transcript",this.playerOptions.transcript||"false"),this.onPlayerReady(r),this.element.appendChild(r);var a=new window.AblePlayer(r);this.player=r,setTimeout(function(){o.element.querySelector("#"+a.mediaId);if("absolute"==window.getComputedStyle(r).position){var e=o.element.querySelector("#"+a.mediaId);e&&(e.parentElement.style.paddingBottom="calc(44.25% - 91px)",e.style.width=o.playerOptions.width||"100%",e.style.height=o.playerOptions.height||"100%")}},600),this.player.addEventListener("playing",function(){e.prototype.play.call(o)}),this.player.addEventListener("pause",function(){e.prototype.pause.call(o)})}else setTimeout(function(){return o.initPlayer()},300)},o.prototype.mute=function(){e.prototype.mute.call(this),this.player&&(this.player.muted=!0)},o.prototype.play=function(){var e=this;setTimeout(function(){e.player&&e.player.play()},10)},o.prototype.pause=function(){this.player&&this.player.pause()},o.prototype.loop=function(){e.prototype.loop.call(this),this.player&&(this.player.loop=!0)},o.prototype.preload=function(t){e.prototype.preload.call(this,t),this.player&&(this.player.preload=t)},o.prototype.loadScript=function(e,t,o){var n=this;return new Promise(function(r,a){var s=!1;if(s=n.isScriptAvailable(o,t))r();else{var l=[],c=!1;if(window&&(window[i.AppConstants.SCRIPTCACHE]=window[i.AppConstants.SCRIPTCACHE]||[],l=window[i.AppConstants.SCRIPTCACHE]),-1!=l.indexOf(e)?c=!0:l.push(e),c)var p=setInterval(function(){(s=n.isScriptAvailable(o,t))&&(clearInterval(p),r())},100);else{var u=document.createElement("script");u.src=e,u.onload=function(){r()};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(u,d)}}})},o}(o.BaseVideoPlayer)}),define("ph-common/ph-video/v1/kaltura-player",["exports","./base-video-player"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.KalturaPlayer=void 0;e.KalturaPlayer=function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.element=n,a.playerOptions={},a.playerId="",a.partnerId="",a.onApiReady=function(){},a.onPlayerReady=function(t){a.player=document.getElementById(t),"1"==a.playerOptions.autoplay&&a.play(),a.player.kBind&&a.player.kBind("playerStateChange",function(t){t&&("playing"==t?e.prototype.play.call(a):"paused"==t&&e.prototype.pause.call(a))})},a.playerOptions=r||{},a.playerContainer=document.createElement("div"),a.playerContainer.id="kaltura-player-"+Date.now()+a.playerOptions.videoId,a.element.innerHTML="",a.element.appendChild(a.playerContainer),a}return n(t,e),t.prototype.isApiRequested=function(){return window?window.KALTURASCRIPTADDED:void 0},t.prototype.isApiLoaded=function(){return window?window.kWidget:void 0},t.prototype.initPlayer=function(){var e=this;window.kWidget?window.kWidget.embed({targetId:this.playerContainer.id,wid:"_"+this.partnerId,uiconf_id:this.playerId,flashvars:{},entry_id:this.playerOptions.videoId,readyCallback:this.onPlayerReady}):setTimeout(function(){return e.initPlayer()},300)},t.prototype.load=function(){var e=this,t=this.commonService.getSiteSettings("kalturaConfig");if(t){if(t&&(this.playerId=t.playerId),t&&(this.partnerId=t.partnerId),!this.isApiRequested()){this.commonService.getSite,window.KALTURASCRIPTADDED=!0;var i=document.createElement("script"),o="https://cdnapisec.kaltura.com/p/%PARTNER_ID%/sp/%PARTNER_ID%100/embedIframeJs/uiconf_id/%PLAYER_ID%/partner_id/%PARTNER_ID%",n=new RegExp("%PARTNER_ID%","g");o=o.replace(n,this.partnerId),o=o.replace("%PLAYER_ID%",this.playerId),i.src=o;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}this.isApiLoaded()?this.initPlayer():setTimeout(function(){return e.initPlayer()},300)}},t.prototype.play=function(){var t=this;e.prototype.play.call(this),this.player&&setTimeout(function(){t.player.sendNotification("doPlay")},100)},t.prototype.pause=function(){e.prototype.pause.call(this),this.player&&this.player.sendNotification("doPause")},t.prototype.stop=function(){e.prototype.stop.call(this)},t.prototype.mute=function(){e.prototype.mute.call(this),this.player.sendNotification("changeVolume",0)},t.prototype.loop=function(){e.prototype.loop.call(this),this.player},t.prototype.changeVideo=function(e){e?this.player.sendNotification("changeMedia",{entryId:e}):this.player.sendNotification("changeMedia",{entryId:this.playerOptions.videoId})},t}(t.BaseVideoPlayer)}),define("ph-common/ph-job-count/v1/ph-job-count",["exports","aurelia-framework","aurelia-event-aggregator","./../../index","./../../ph-widget-attr","./../../ph-translation/ph-translation-service"],function(e,t,i,o,n,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.JobCountAttribute=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d="ph-job-count-v1",f=e.JobCountAttribute=function(e){function t(i,o,n,r){a(this,t);var l=s(this,e.call(this,i,o,d));return l.element=i,l.commonService=o,l.eventAggregator=n,l.translationService=r,l.subscriptions=[],l}return l(t,e),t.prototype.attached=function(){var e=this;this.populateWidgetBundle().then(function(t){var i=e.fetchJobCountData();e.commonService.prepareMultiSearchJobCountObj(i,e.element),e.commonService.fetchMultiJobCount(d)}),this.subscriptions.push(this.eventAggregator.subscribe("ph:jobCount:set",function(t){var i=e.element.getAttribute("data-pha-count-idfr"),o=e.element.querySelector("[tkey]"),n=o&&o.getAttribute("tkey")||"multiJobCountTotalHits";t&&t[i]&&t[i].counts&&(t[i].counts.totalHits=t[i].counts.totalHits||0,0==t[i].counts.totalHits?n+="NoResults":1==t[i].counts.totalHits?n+="Singular":t[i].counts.totalHits>1&&(n+="Plural"),e.widgetBundle[n]||(n="multiJobCountTotalHits"),o.setAttribute("tkey",n),e.translationService.parseTemplateAndApplyBundle({totalHits:t[i].counts.totalHits.toString()},e.element,e.widgetBundle),e.element.style.display="block")}))},t.prototype.fetchJobCountData=function(){var t={},i=void 0,o=void 0,n=void 0,r=this.element.attributes;for(i=0;i<r.length;i++)o=r[i],o.name&&o.name.startsWith("data-pha-")&&(n=e.prototype.kebabCaseToCameCase.call(this,o.name),t[n]=o.value);return t},t.prototype.getLocalWidgetBundle=function(){return{multiJobCountTotalHits:"{{totalHits}} jobs",multiJobCountTotalHitsSingular:"{{totalHits}} job",multiJobCountTotalHitsPlural:"{{totalHits}} jobs",multiJobCountTotalHitsNoResults:"No results"}},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t}(n.PhenomWidgetAttribute);e.JobCountAttribute=f=p([(0,t.customAttribute)(d),(0,t.autoinject)(),u("design:paramtypes",[Element,o.CommonService,i.EventAggregator,r.TranslationService])],f)}),define("ph-common/ph-nav/ph-nav-item",["exports","aurelia-framework","./../common-service"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhNavItem=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=e.PhNavItem=function(){function e(t,i){o(this,e),this.element=t,this.commonService=i,this.toggle="show"}return e.prototype.propertyChanged=function(e,t,i){var o=this.element.getAttribute("ph-nav-item-type"),n=this.commonService.getSiteSettings("navItems"),r=n&&n.navMenuItems,a=n&&n.navMenuItemsData,s=this.element;r&&-1!=r.indexOf(o)||!this.element||!this.element.parentElement?r&&-1!=r.indexOf(o)&&this.element.classList.remove("hide"):this.element.parentElement.removeChild(this.element);var l=a&&a[o];l&&l.url&&("A"!=this.element.nodeName&&(s=this.element.querySelector("a")),s.setAttribute("href",l.url))},e}();r([(0,t.bindable)({primaryProperty:!0}),a("design:type",Object)],s.prototype,"toggle",void 0),e.PhNavItem=s=r([(0,t.customAttribute)("ph-nav-item"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],s)}),define("ph-common/ph-a11y/ph-a11y-autocomplete-attribute",["exports","aurelia-framework","../index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.A11yAutoCompleteAttribute=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,SHIFT:16},l=e.A11yAutoCompleteAttribute=function(){function e(t,i){var n=this;o(this,e),this.element=t,this.commonService=i,this.activeIndex=-1,this.results=[],this.isShowResultsOnFocus="true",this.isShowNoResults="true",this.isHideListBox="true",this.validationInfo={listbox:{},input:{},widget:{}},this.keyupHandler=function(e){var t=e.which||e.keyCode;e.target.name;switch(t){case s.UP:case s.DOWN:case s.ESC:case s.RETURN:return void e.preventDefault()}var i=-1;if(i=Object.keys(s).findIndex(function(e){return t==s[e]}),("true"==n.isShowResultsOnFocus||n.element.value&&n.element.value.length&&-1==i)&&n.updateResults(),"both"==n.validationInfo.input.ariaAutocomplete)switch(t){case s.BACKSPACE:return;default:n.widgetViewModel&&n.widgetViewModel.setFieldValue&&n.widgetViewModel.setFieldValue(n.element.name,n.activeIndex)
}else s.BACKSPACE==t&&n.updateResults()},this.keydownHandler=function(e){if(e.target)switch(e.which||e.keyCode){case s.DOWN:n.isListboxHidden()?n.updateResults().then(function(e){n.moveDown()}):n.moveDown();break;case s.UP:n.isListboxHidden()?n.updateResults().then(function(e){n.moveUp()}):n.moveUp();break;case s.ESC:n.clearFieldAndCloseListbox();break;case s.RETURN:return-1!=n.activeIndex&&e.preventDefault(),void n.onEnter()}return!0},this.focusHandler=function(e){"true"==n.isShowResultsOnFocus&&n.updateResults().then(function(e){if(n.listBoxElement)for(var t=n.listBoxElement.querySelectorAll('[role="option"]'),i=n.element.name+"-result-item-",o=0;o<t.length;o++){var r=t[o],a=i+o;r.setAttribute("id",a)}})},this.listBoxClickHandler=function(e){if(e.target&&"LI"==e.target.nodeName){var t=-1;e.target.id&&(t=parseInt(e.target.id.split(n.element.name+"-result-item-")[1])),n.activeIndex=t,n.onEnter()}n.hideListbox()},this.blurHandler=function(e,t){t?e.target&&"LI"!=e.target.nodeName&&(clearTimeout(n.clearTimer),n.showListbox()):n.clearTimer=setTimeout(function(){n.widgetViewModel.getActiveIndexOnBlur&&n.widgetViewModel.getActiveIndexOnBlur(n.activeIndex,n.element.name),n.widgetViewModel&&n.widgetViewModel.focusedField==n.element.name?(n.widgetViewModel.focusedField=void 0,n.activeIndex=-1):n.hideListbox()},300)}}return e.prototype.getWigdetViewModel=function(e){if(e&&e.au)return e.au.controller?e.au.controller.viewModel:{}},e.prototype.init=function(){this.element.type;this.comboBoxElement=this.element.parentElement;var e=void 0,t=void 0,i=void 0,o=void 0,n=void 0,r=void 0;this.comboBoxElement&&(this.comboBoxElement.hasAttribute("aria-haspopup")&&(this.element.setAttribute("aria-haspopup",this.comboBoxElement.getAttribute("aria-haspopup")),this.comboBoxElement.getAttribute("role")),this.comboBoxElement.hasAttribute("aria-owns")&&(this.element.setAttribute("aria-owns",this.comboBoxElement.getAttribute("aria-owns")),this.comboBoxElement.removeAttribute("aria-owns")),this.comboBoxElement.hasAttribute("role")&&(this.element.setAttribute("role",this.comboBoxElement.getAttribute("role")),this.comboBoxElement.removeAttribute("role"))),t=this.element.getAttribute("aria-haspopup"),i=this.element.getAttribute("aria-owns"),e=this.element.getAttribute("role"),this.validationInfo.input.ariaHaspopup=t,this.validationInfo.input.ariaOwns=t,this.validationInfo.input.role=e,o=this.element.getAttribute("aria-autocomplete"),n=this.element.getAttribute("aria-controls"),this.isHideListBox=this.element.getAttribute("data-show-listbox")?this.element.getAttribute("data-show-listbox"):"true",this.isShowResultsOnFocus=this.element.getAttribute("showResultsOnFocus")||this.isShowResultsOnFocus,this.isShowNoResults=this.element.getAttribute("showNoResults")||this.isShowNoResults,this.validationInfo.input.ariaAutocomplete=o,this.validationInfo.input.ariaControls=n,this.listBoxElement=this.comboBoxElement.querySelector("[aria-labelledby="+i+"]"),this.listBoxElement||(this.listBoxElement=this.comboBoxElement.parentElement&&this.comboBoxElement.parentElement.querySelector("[aria-labelledby="+i+"]")||document.querySelector("[aria-labelledby="+i+"]")),this.listBoxElement&&(this.validationInfo.listbox.exists=!0,r=this.listBoxElement.getAttribute("aria-labelledby"),this.validationInfo.listbox.ariaLabelledby=r),this.widgetElement=this.findWidget(),this.validationInfo.widget.exists=this.widgetElement,this.widgetViewModel=this.getWigdetViewModel(this.widgetElement),this.validationInfo.widget.viewModelExist=this.widgetViewModel,this.validationInfo.widget.getFieldOptions=this.widgetViewModel?this.widgetViewModel.getFieldOptions:void 0,this.validationInfo.widget.setFieldValue=this.widgetViewModel?this.widgetViewModel.setFieldValue:void 0,this.validationInfo.widget.clearFieldValue=this.widgetViewModel?this.widgetViewModel.clearFieldValue:void 0,this.validationInfo.widget.getActiveIndex=this.widgetViewModel?this.widgetViewModel.getActiveIndex:void 0,this.validationInfo.widget.getActiveIndexOnBlur=this.widgetViewModel?this.widgetViewModel.getActiveIndexOnFocusOut:void 0},e.prototype.validate=function(){var e=[];return this.validationInfo.input.ariaHaspopup||e.push("Missing aria-haspopup attribute on parent div"),this.validationInfo.input.ariaOwns||e.push("Missing  aria-owns attribute on parent div"),this.validationInfo.input.ariaAutocomplete||e.push("Missing aria-autocomplete attribute on input elem"),this.validationInfo.input.ariaControls||e.push("Missing aria-controls attribute on input elem"),this.validationInfo.listbox.ariaLabelledby||e.push("Missing aria-labelledby attribute on listbox elem"),this.validationInfo.widget.exists||e.push("Missing widget elem"),this.validationInfo.widget.viewModelExist||e.push("Missing widget viewmodel on widget elem"),this.validationInfo.widget.getFieldOptions||e.push("Missing getFieldOptions(fieldName) fn on widget elem"),this.validationInfo.widget.setFieldValue||e.push("Missing setFieldValue(fieldName, selectedItemIndex) fn on widget elem"),this.validationInfo.widget.clearFieldValue||e.push("Missing clearFieldValue(fieldName) fn on widget elem"),this.validationInfo.widget.getActiveIndex||e.push("Missing getActiveIndex(fieldName) fn on widget elem"),this.validationInfo.widget.getActiveIndexOnBlur,e},e.prototype.showListbox=function(){this.setActiveListItem(),this.listBoxElement&&(this.listBoxElement.classList.remove("aurelia-hide"),this.listBoxElement.setAttribute("aria-expanded","true")),this.element&&this.element.setAttribute("aria-expanded","true")},e.prototype.hideListbox=function(){"true"==this.isHideListBox&&(this.listBoxElement&&(this.activeIndex=-1,this.listBoxElement.classList.add("aurelia-hide"),this.listBoxElement.setAttribute("aria-expanded","false")),this.element&&this.element.setAttribute("aria-expanded","false"),this.clearActiveListItem())},e.prototype.isListboxHidden=function(){if(this.listBoxElement)return this.listBoxElement.classList.contains("aurelia-hide")},e.prototype.setActiveListItem=function(e){if(this.listBoxElement){for(var t=this.listBoxElement.querySelectorAll('[role="option"]'),i=this.listBoxElement.querySelectorAll(".ph-a11y-header"),o=this.element.name+"-result-item-",n=0;n<t.length;n++){var r=t[n],a=o+n;r.setAttribute("id",a),e||n!=this.activeIndex?(r.removeAttribute("aria-selected"),r.classList.remove("listitem-focused")):(r.setAttribute("aria-selected","true"),r.classList.add("listitem-focused"),this.element.setAttribute("aria-activedescendant",a))}-1==this.activeIndex&&this.element.setAttribute("aria-activedescendant","");var s=this.listBoxElement,l=this.activeIndex;if(s&&s.querySelector("#"+this.element.name+"-result-item-"+this.activeIndex)){var c=s.querySelector("#"+this.element.name+"-result-item-"+this.activeIndex),p=i.length-1;if(s&&s.offsetHeight-c.offsetHeight<c.offsetTop&&c.offsetTop<s.scrollHeight){var u=0;p>0&&(u=i[0].offsetHeight);var d=c.scrollHeight-(c.offsetHeight*l+u*p);s.scrollTop=d<0?-1*d:d}else s.scrollTop=0}"both"==this.validationInfo.input.ariaAutocomplete&&this.widgetViewModel&&this.widgetViewModel.setFieldValue&&this.widgetViewModel.setFieldValue(this.element.name,this.activeIndex,this.validationInfo.input.ariaAutocomplete)}},e.prototype.clearActiveListItem=function(){this.setActiveListItem(!0)},e.prototype.updateResults=function(){var e=this,t=this.widgetViewModel;return new Promise(function(i,o){if(t&&t.getFieldOptions){var n=t.getFieldOptions(e.element.name);n||n.then?n.then?n.then(function(t){i(t),e.results=t,e.activeIndex=e.widgetViewModel.getActiveIndex(e.element.name),"false"==e.isShowResultsOnFocus&&0==e.element.value.length?e.hideListbox():document.activeElement===e.element&&e.showListbox(),"false"!=e.isShowNoResults||e.results.length||e.hideListbox()}):(i(n||[]),e.results=n,e.activeIndex=e.widgetViewModel.getActiveIndex(e.element.name),"false"==e.isShowResultsOnFocus&&0==e.element.value.length?e.hideListbox():document.activeElement===e.element&&e.showListbox(),"false"!=e.isShowNoResults||e.results.length||e.hideListbox()):(console.warn("getFieldOptions(fieldName) is neither returning anything nor defined as a promise"),i([]))}i([])})},e.prototype.findWidget=function(){for(var e=this.element.parentElement,t=e?e.getAttribute("as-element"):void 0;e&&!t;)e=e.parentElement,t=e?e.getAttribute("as-element"):void 0;return t?e:void 0},e.prototype.moveDown=function(){this.activeIndex=this.activeIndex+1,this.activeIndex>this.results.length-1&&(this.activeIndex=0),this.setActiveListItem()},e.prototype.moveUp=function(){this.activeIndex=this.activeIndex-1,this.activeIndex<0&&(this.activeIndex=this.results.length-1),this.setActiveListItem()},e.prototype.onEnter=function(){return this.widgetViewModel&&this.widgetViewModel.setFieldValue&&this.widgetViewModel.setFieldValue(this.element.name,this.activeIndex),this.widgetViewModel.onEnterCallBack&&this.widgetViewModel.onEnterCallBack(this.element.name,this.activeIndex),this.hideListbox(),!1},e.prototype.clearFieldAndCloseListbox=function(){this.widgetViewModel&&this.widgetViewModel.clearFieldValue&&this.widgetViewModel.clearFieldValue(this.element.name),this.hideListbox()},e.prototype.setupEventListeners=function(){var e=this,t=this.element;t.addEventListener("keyup",this.keyupHandler),t.addEventListener("keydown",this.keydownHandler),t.addEventListener("focus",this.focusHandler),t.addEventListener("blur",this.blurHandler),this.listBoxElement&&(this.listBoxElement.addEventListener("click",this.listBoxClickHandler),this.listBoxElement.addEventListener("focus",function(t){e.blurHandler(t,!0)}),this.listBoxElement.addEventListener("blur",this.blurHandler))},e.prototype.attached=function(){this.init();var e=this.validate();e&&e.length&&console.warn("A11y autocomplete setup is improper.Check errors ",e),this.setupEventListeners()},e.prototype.detached=function(){var e=this.element;e.removeEventListener("keyup",this.keyupHandler),e.removeEventListener("keydown",this.keydownHandler),e.removeEventListener("focus",this.focusHandler),e.removeEventListener("blur",this.blurHandler),this.listBoxElement&&this.listBoxElement.removeEventListener("click",this.listBoxClickHandler)},e}();e.A11yAutoCompleteAttribute=l=r([(0,t.customAttribute)("ph-a11y-autocomplete"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],l)}),define("ph-common/ph-a11y/ph-a11y-listbox-attribute",["exports","aurelia-framework","../index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.A11yListboxAttribute=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},l=e.A11yListboxAttribute=function(){function e(t,i){var n=this;o(this,e),this.element=t,this.commonService=i,this.activeIndex=-1,this.results=[],this.isToggleVar="",this.validationInfo={span:{},listbox:{},button:{},widget:{}},this.keyupHandler=function(e){var t=e.which||e.keyCode;e.target.name;switch(t){case s.UP:case s.DOWN:case s.ESC:case s.RETURN:return void e.preventDefault()}n.updateResults()},this.keydownHandler=function(e){if(e.target)switch(e.which||e.keyCode){case s.DOWN:e.preventDefault(),n.isListboxHidden()?n.updateResults().then(function(e){n.moveDown()}):n.moveDown();break;case s.UP:e.preventDefault(),n.isListboxHidden()?n.updateResults().then(function(e){n.moveUp()}):n.moveUp();break;case s.ESC:n.clearFieldAndCloseListbox();break;case s.RETURN:return e.preventDefault(),void(n.isListboxHidden()?n.updateResults().then(function(e){n.showListbox()}):n.onEnter())}return!0},this.focusHandler=function(e){n.updateResults()},this.listBoxClickHandler=function(e){if(e.target&&"LI"==e.target.nodeName){var t=-1;e.target.id&&(t=parseInt(e.target.id.split(n.name+"-result-item-")[1])),n.activeIndex=t,n.onEnter()}},this.blurHandler=function(e){setTimeout(function(){n.hideListbox()},300)}}return e.prototype.getWigdetViewModel=function(e){if(e&&e.au)return e.au.controller?e.au.controller.viewModel:{}},e.prototype.init=function(){var e=(this.element.type,void 0),t=void 0,i=void 0;if(i=this.element.getAttribute("aria-labelledby")){var o=i.split(" ");o&&o.length>1&&(this.spanElement=document.getElementById(o[0]),this.validationInfo.span.exists=!0)}e=this.element.getAttribute("aria-haspopup"),this.isToggleVar=this.element.getAttribute("is-toggle")||"",this.validationInfo.button.ariaHaspopup=e,this.validationInfo.button.ariaLabelledby=i,this.spanElement&&(this.listBoxElement=document.querySelector("[aria-labelledby="+this.spanElement.getAttribute("id")+"]"),this.listBoxElement&&(this.validationInfo.listbox.exists=!0,t=this.listBoxElement.getAttribute("aria-labelledby"),this.validationInfo.listbox.ariaLabelledby=t)),this.widgetElement=this.findWidget(),this.validationInfo.widget.exists=this.widgetElement,this.widgetViewModel=this.getWigdetViewModel(this.widgetElement),this.validationInfo.widget.viewModelExist=this.widgetViewModel,this.validationInfo.widget.getFieldOptions=this.widgetViewModel?this.widgetViewModel.getFieldOptions:void 0,this.validationInfo.widget.setFieldValue=this.widgetViewModel?this.widgetViewModel.setFieldValue:void 0,this.validationInfo.widget.clearFieldValue=this.widgetViewModel?this.widgetViewModel.clearFieldValue:void 0,this.validationInfo.widget.getActiveIndex=this.widgetViewModel?this.widgetViewModel.getActiveIndex:void 0},e.prototype.validate=function(){var e=[];return this.validationInfo.span.exists||e.push("Missing span"),this.validationInfo.widget.exists||e.push("Missing widget elem"),this.validationInfo.widget.viewModelExist||e.push("Missing widget viewmodel on widget elem"),this.validationInfo.widget.getFieldOptions||e.push("Missing getFieldOptions(fieldName) fn on widget elem"),this.validationInfo.widget.setFieldValue||e.push("Missing setFieldValue(fieldName, selectedItemIndex) fn on widget elem"),this.validationInfo.widget.clearFieldValue||e.push("Missing clearFieldValue(fieldName) fn on widget elem"),e},e.prototype.showListbox=function(){this.listBoxElement&&this.listBoxElement.classList.remove("aurelia-hide"),this.element&&this.element.setAttribute("aria-expanded","true"),this.setActiveListItem(),this.isToggleVar.length&&(this.widgetViewModel[this.isToggleVar]=!0)},e.prototype.hideListbox=function(){this.listBoxElement&&(this.activeIndex=-1,this.listBoxElement.classList.add("aurelia-hide")),this.element&&this.element.setAttribute("aria-expanded","false"),this.clearActiveListItem(),this.isToggleVar.length&&(this.widgetViewModel[this.isToggleVar]=!1)},e.prototype.isListboxHidden=function(){if(this.listBoxElement)return this.listBoxElement.classList.contains("aurelia-hide")},e.prototype.handleListboxClick=function(){this.isListboxHidden()?(this.updateResults(),this.setActiveListItem()):this.hideListbox()},e.prototype.setActiveListItem=function(e){if(this.listBoxElement){for(var t=this.listBoxElement.querySelectorAll('[role="option"]'),i=this.name+"-result-item-",o=0;o<t.length;o++){var n=t[o],r=i+o;n.setAttribute("id",r),e||o!=this.activeIndex?(n.removeAttribute("aria-selected"),n.classList.remove("listitem-focused")):(n.classList.add("listitem-focused"),n.setAttribute("aria-selected","true"),this.element.setAttribute("aria-activedescendant",r))}var a=this.listBoxElement,s=this.activeIndex;if(a&&a.querySelector("#"+this.element.name+"-result-item-"+this.activeIndex)){var l=a.querySelector("#"+this.element.name+"-result-item-"+this.activeIndex);if(a&&a.offsetHeight-l.offsetHeight<l.offsetTop&&l.offsetTop<a.scrollHeight){var c=l.scrollHeight-l.offsetHeight*s;a.scrollTop=c<0?-1*c:c}else a.scrollTop=0}}},e.prototype.clearActiveListItem=function(){this.setActiveListItem(!0)},e.prototype.updateResults=function(){var e=this,t=this.widgetViewModel;return new Promise(function(i,o){if(t&&t.getFieldOptions){var n=t.getFieldOptions(e.name);n||n.then?n.then?n.then(function(t){i(t),e.results=t,e.activeIndex=e.widgetViewModel.getActiveIndex&&e.widgetViewModel.getActiveIndex(e.name),e.showListbox()}):(i(n||[]),e.results=n,e.activeIndex=e.widgetViewModel.getActiveIndex&&e.widgetViewModel.getActiveIndex(e.name),e.showListbox()):(console.warn("getFieldOptions(fieldName) is neither returning anything nor defined as a promise"),i([]))}i([])})},e.prototype.findWidget=function(){for(var e=this.element.parentElement,t=e?e.getAttribute("as-element"):void 0;e&&!t;)e=e.parentElement,t=e?e.getAttribute("as-element"):void 0;return t?e:void 0},e.prototype.moveDown=function(){this.activeIndex=this.activeIndex+1,this.activeIndex>this.results.length-1&&(this.activeIndex=this.results.length-1),this.setActiveListItem()},e.prototype.moveUp=function(){this.activeIndex=this.activeIndex-1,this.activeIndex<0&&(this.activeIndex=0),this.setActiveListItem()},e.prototype.onEnter=function(){this.widgetViewModel&&this.widgetViewModel.setFieldValue&&(this.widgetViewModel.setFieldValue(this.name,this.activeIndex),this.element.focus()),this.hideListbox()},e.prototype.clearFieldAndCloseListbox=function(){this.widgetViewModel&&this.widgetViewModel.clearFieldValue&&this.widgetViewModel.clearFieldValue(this.name),this.hideListbox()},e.prototype.setupEventListeners=function(){this.element&&(this.element.addEventListener("keydown",this.keydownHandler),this.element.addEventListener("blur",this.blurHandler),this.element.addEventListener("click",this.handleListboxClick.bind(this)),this.listBoxElement&&this.listBoxElement.addEventListener("click",this.listBoxClickHandler))},e.prototype.attached=function(){this.init();var e=this.validate();e&&e.length&&console.warn("A11y autocomplete setup is improper.Check errors ",e),this.setupEventListeners()},e}();r([(0,t.bindable)({primaryProperty:!0}),a("design:type",Object)],l.prototype,"name",void 0),e.A11yListboxAttribute=l=r([(0,t.customAttribute)("ph-a11y-listbox"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],l)}),define("ph-common/ph-a11y/ph-a11y-radio-attribute",["exports","aurelia-framework","../index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.A11yRadioAttribute=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,SHIFT:16},l=e.A11yRadioAttribute=function(){function e(t,i){var n=this;o(this,e),this.element=t,this.commonService=i,this.radioButtons=[],this.validationInfo={widget:{}},this.handleKeydown=function(e){var t=(e.currentTarget,!1),i=e.which||e.keyCode,o=n.getCurrentRadioButton();switch(i){case s.SPACE:case s.RETURN:n.setChecked(o),t=!0;break;case s.UP:n.setCheckedToPreviousItem(o),t=!0;break;case s.DOWN:n.setCheckedToNextItem(o),t=!0;break;case s.LEFT:n.setCheckedToPreviousItem(o),t=!0;break;case s.RIGHT:n.setCheckedToNextItem(o),t=!0}t&&(e.stopPropagation(),e.preventDefault())},this.handleFocus=function(e){n.getCurrentRadioButton().classList.add("ph-focus")},this.handleBlur=function(e){n.getCurrentRadioButton().classList.remove("ph-focus")},this.setChecked=function(e){e=e instanceof HTMLElement?e:e.currentTarget;for(var t=n.widgetViewModel,i=0;i<n.radioButtons.length;i++){var o=n.radioButtons[i];o.setAttribute("aria-checked","false"),o.classList.remove("ph-focus")}e.setAttribute("aria-checked","true"),e.classList.add("ph-focus"),n.element.setAttribute("aria-activedescendant",e.id),n.element.focus();for(var r=-1,i=0;i<n.radioButtons.length;i++){var o=n.radioButtons[i];o.id===e.id&&"true"==e.getAttribute("aria-checked")&&(r=i)}t.setRadioCheked(r)},this.setCheckedToPreviousItem=function(e){var t;e.id===n.firstRadioButton.id?n.setChecked(n.lastRadioButton):(t=n.getActiveIndex(e),n.setChecked(n.radioButtons[t-1]))},this.setCheckedToNextItem=function(e){var t;e.id===n.lastRadioButton.id?n.setChecked(n.firstRadioButton):(t=n.getActiveIndex(e),n.setChecked(n.radioButtons[t+1]))},this.getCurrentRadioButton=function(){var e=n.element.getAttribute("aria-activedescendant");if(!e)return n.element.setAttribute("aria-activedescendant",n.firstRadioButton.id),n.firstRadioButton;for(var t=0;t<n.radioButtons.length;t++){var i=n.radioButtons[t];if(i.id===e)return i}return n.element.setAttribute("aria-activedescendant",n.firstRadioButton.id),n.firstRadioButton}}return e.prototype.attached=function(){this.init();var e=this.validate();if(e&&e.length&&console.warn("A11y autocomplete setup is improper.Check errors ",e),this.widgetViewModel){var t=this.widgetViewModel.setActiveRadioChecked(this.element.getAttribute("name"));-1!=t&&this.setChecked(this.radioButtons[t])}this.setupEventListeners()},e.prototype.init=function(){if(this.element){this.element.getAttribute("role")||this.element.setAttribute("role","radiogroup"),this.validationInfo.widget.name=this.element.getAttribute("name");var e=this.element.getAttribute("name")+"-result-item-";this.radioButtons=this.element.querySelectorAll("[role=radio]");for(var t=0;t<this.radioButtons.length;t++){var i=this.radioButtons[t],o=e+t;i.setAttribute("aria-checked","false"),i.setAttribute("aria-activedescendant",o),i.setAttribute("id",o),i.addEventListener("click",this.setChecked)}this.radioButtons.length&&(this.firstRadioButton=this.radioButtons[0],this.lastRadioButton=this.radioButtons[this.radioButtons.length-1])}this.widgetElement=this.findWidget(),this.validationInfo.widget.exists=this.widgetElement,this.widgetViewModel=this.getWigdetViewModel(this.widgetElement),this.validationInfo.widget.viewModelExist=this.widgetViewModel,this.validationInfo.widget.setRadioCheked=this.widgetViewModel?this.widgetViewModel.setRadioCheked:void 0,this.validationInfo.widget.setActiveRadioChecked=this.widgetViewModel?this.widgetViewModel.setActiveRadioChecked:void 0},e.prototype.findWidget=function(){for(var e=this.element.parentElement,t=e?e.getAttribute("as-element"):void 0;e&&!t;)e=e.parentElement,t=e?e.getAttribute("as-element"):void 0;return t?e:void 0},e.prototype.getWigdetViewModel=function(e){if(e&&e.au)return e.au.controller?e.au.controller.viewModel:{}},e.prototype.radioButtonInit=function(e){e.setAttribute("aria-checked","false"),e.addEventListener("click",this.setChecked)},e.prototype.validate=function(){var e=[];return this.validationInfo.widget.setRadioCheked||e.push("Missing setRadioCheked(fieldName) fn on widget elem"),this.validationInfo.widget.exists||e.push("Missing widget elem"),this.validationInfo.widget.name||e.push("Missing ridio group name"),this.validationInfo.widget.setActiveRadioChecked||e.push("Missing setActiveRadioChecked(fieldName) fn on widget elem"),e},e.prototype.setupEventListeners=function(){this.element.addEventListener("keydown",this.handleKeydown),this.element.addEventListener("focus",this.handleFocus),this.element.addEventListener("blur",this.handleBlur)},e.prototype.getActiveIndex=function(e){for(var t=-1,i=0;i<this.radioButtons.length;i++){this.radioButtons[i].id===e.id&&(t=i)}return t},e.prototype.detached=function(){this.element.removeEventListener("keydown",this.handleKeydown),this.element.removeEventListener("focus",this.handleFocus),this.element.removeEventListener("blur",this.handleBlur)},e}();e.A11yRadioAttribute=l=r([(0,t.customAttribute)("ph-a11y-radio"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],l)}),define("ph-common/ph-scroll/ph-scroll-attribute",["exports","aurelia-framework","../index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhScrollAttribute=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=e.PhScrollAttribute=function(){function e(t,i){var n=this;o(this,e),this.speedInPixels=30,this.scrollAlign="top",this.elementClickHandler=function(){if(!n.targetEle)return!0;var e=window.pageYOffset,t=n.commonService.getNearestSectionElemOffsetTop(n.targetEle,n.scrollAlign);e<t?n.commonService.smoothScroll(e,t,!0,n.speedInPixels):n.commonService.smoothScroll(e,t,!1,n.speedInPixels);var i=setTimeout(function(){n.targetEle.focus(),clearTimeout(i)},350)},this.element=t,this.commonService=i,this.init()}return e.prototype.valueChanged=function(e,t){this.selector=e},e.prototype.init=function(){var e=this,t=this.element.getAttribute("ph-scroll-speed"),i=this.element.getAttribute("ph-scroll-align");t&&t.length&&(this.speedInPixels=parseInt(t)),i&&i.length&&(this.scrollAlign=i),this.element.addEventListener("click",function(t){return t.preventDefault(),e.targetEle=document.querySelector(e.selector),e.elementClickHandler(),!0})},e}();e.PhScrollAttribute=s=r([(0,t.customAttribute)("ph-scroll"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],s)}),define("ph-common/ph-object-fit/ph-object-fit-attribute",["exports","aurelia-framework","../index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhObjectFitAttribute=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=e.PhObjectFitAttribute=function(){function e(t,i){var r=this;o(this,e),this.objectFitPolyfill=function(e){if(void 0===e||e instanceof Event)e=document.querySelectorAll("[data-object-fit]");else if(e&&e.nodeName)e=[e];else{if("object"!==(void 0===e?"undefined":n(e))||!e.length||!e[0].nodeName)return!1;e=e}for(var t=0;t<e.length;t++)if(e[t].nodeName){var i=e[t].nodeName.toLowerCase();"img"!==i||r.edgePartialSupport?"video"===i?e[t].readyState>0?r.objectFit(e[t]):e[t].addEventListener("loadedmetadata",function(){r.objectFit(e[0])}):r.objectFit(e[t]):e[t].complete?r.objectFit(e[t]):e[t].addEventListener("load",function(){r.objectFit(e[0])})}return!0},this.element=t,this.commonService=i,this.init()}return e.prototype.valueChanged=function(e,t){},e.prototype.attached=function(){},e.prototype.init=function(){var e=this,t=window.navigator.userAgent.match(/Edge\/(\d{2})\./);this.edgePartialSupport=!!t&&parseInt(t[1],10)>=16,"objectFit"in document.documentElement.style!=!1&&!this.edgePartialSupport||(clearTimeout(this.timer),this.timer=setTimeout(function(){e.objectFitPolyfill(e.element),clearTimeout(e.timer)},3e3))},e.prototype.checkParentContainer=function(e){var t=window.getComputedStyle(e,null),i=t.getPropertyValue("position"),o=t.getPropertyValue("overflow"),n=t.getPropertyValue("display");i&&"static"!==i||(e.style.position="relative"),"hidden"!==o&&(e.style.overflow="hidden"),n&&"inline"!==n||(e.style.display="block"),0===e.clientHeight&&(e.style.height="100%"),-1===e.className.indexOf("object-fit-polyfill")&&(e.className=e.className+" object-fit-polyfill")},e.prototype.checkMediaProperties=function(e){var t=window.getComputedStyle(e,null),i={"max-width":"none","max-height":"none","min-width":"0px","min-height":"0px",top:"auto",right:"auto",bottom:"auto",left:"auto","margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px"};for(var o in i){t.getPropertyValue(o)!==i[o]&&(e.style[o]=i[o])}},e.prototype.setPosition=function(e,t,i){var o=void 0,n=void 0,r=void 0,a=void 0,s=void 0;if(i=i.split(" "),i.length<2&&(i[1]=i[0]),"x"===e)o=i[0],n=i[1],r="left",a="right",s=t.clientWidth;else{if("y"!==e)return;o=i[1],n=i[0],r="top",a="bottom",s=t.clientHeight}return o===r||n===r?void(t.style[r]="0"):o===a||n===a?void(t.style[a]="0"):"center"===o||"50%"===o?(t.style[r]="50%",void(t.style["margin-"+r]=s/-2+"px")):o.indexOf("%")>=0?(o=parseInt(o),void(o<50?(t.style[r]=o+"%",t.style["margin-"+r]=s*(o/-100)+"px"):(o=100-o,t.style[a]=o+"%",t.style["margin-"+a]=s*(o/-100)+"px"))):void(t.style[r]=o)},e.prototype.objectFit=function(e){var t=e.dataset?e.dataset.objectFit:e.getAttribute("data-object-fit"),i=e.dataset?e.dataset.objectPosition:e.getAttribute("data-object-position");t=t||"cover",i=i||"50% 50%";var o=e.parentNode;return this.checkParentContainer(o),this.checkMediaProperties(e),e.style.position="absolute",e.style.width="auto",e.style.height="auto","scale-down"===t&&(t=e.clientWidth<o.clientWidth&&e.clientHeight<o.clientHeight?"none":"contain"),"none"===t?(this.setPosition("x",e,i),void this.setPosition("y",e,i)):"fill"===t?(e.style.width="100%",e.style.height="100%",this.setPosition("x",e,i),void this.setPosition("y",e,i)):(e.style.height="100%",void("cover"===t&&e.clientWidth>o.clientWidth||"contain"===t&&e.clientWidth<o.clientWidth?(e.style.top="0",e.style.marginTop="0",this.setPosition("x",e,i)):(e.style.width="100%",e.style.height="auto",e.style.left="0",e.style.marginLeft="0",this.setPosition("y",e,i))))},e}();e.PhObjectFitAttribute=s=r([(0,t.customAttribute)("ph-object-fit"),(0,t.autoinject)(),a("design:paramtypes",[Element,i.CommonService])],s)}),define("ph-common/ph-value-converters/data-validate-value-converter",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.DataValidateValueConverter=function(){function e(){t(this,e)}return e.prototype.toView=function(e,t,i){if(e&&e.trim().length&&t&&t.length&&i&&i.trim().length>0){return t.filter(function(t){return t&&t[i]&&t[i]===e}).length?e:void 0}},e}()}),
define("ph-common/ph-job-widget",["exports","aurelia-framework","./index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomJobWidget=void 0;var a="none";e.PhenomJobWidget=function(e){function s(r,l,c){o(this,s);var p=n(this,e.call(this,r,l,c));return p.element=r,p.commonService=l,p.elementTag=c,p.jobFields=[],p.jobActions=[],p.jobTags=[],p.jobTagsConfig={},p.jobFitsSettConfig={},p.jobFits={},p.deviceType=p.commonService.getDeviceType(),p.isErrorMsgReqd=!1,p.bulkcart=!1,p.jobsDisplayMode="seeMore",p.slideMode=!1,p.seemoretext=!0,p.showErrorMsg=!1,p.maxDisplayCount=5,p.showExpiredJobs=!1,p.jobsPerSlide=5,p.maxJobs=18,p.clickTojd=!1,p.isBulkcartEnable=!1,p.showTitle=!0,p.showSubTitle=!1,p.showMore=null,p.isKeyPress=!1,p.jobResults=[],p.showReferView=!1,p.referMode="hidePopup",p.referJob={},p.enabledFields={},p.enabledActions={},p.enabledTags={},p.enabledFits={},p.jobTagsData={},p.questionnaireMode=a,p.referralSteps=[{stepName:"referForm"}],p.referralId="",p.newReferFlow=!1,p.jobAdded=!1,p.jobRemoved=!1,p.jobFitPromise=!1,p.bindableValues=[{attrKey:"is-error-msg-reqd",actualKey:"isErrorMsgReqd",type:"boolean"},{attrKey:"bulkcart",actualKey:"bulkcart",type:"boolean"},{attrKey:"jobs-display-mode",actualKey:"jobsDisplayMode",type:"string"},{attrKey:"slide-mode",actualKey:"slideMode",type:"boolean"},{attrKey:"show-error-msg",actualKey:"showErrorMsg",type:"boolean"},{attrKey:"show-expired-jobs",actualKey:"showExpiredJobs",type:"boolean"},{attrKey:"jobs-per-slide",actualKey:"jobsPerSlide",type:"number"},{attrKey:"max-jobs",actualKey:"maxJobs",type:"number"},{attrKey:"click-tojd",actualKey:"clickTojd",type:"boolean"},{attrKey:"max-display-count",actualKey:"maxDisplayCount",type:"number"},{attrKey:"show-title",actualKey:"showTitle",type:"boolean"},{attrKey:"show-sub-title",actualKey:"showSubTitle",type:"boolean"},{attrKey:"questionnaire-mode",actualKey:"questionnaireMode",type:"string"},{attrKey:"new-refer-flow",actualKey:"newReferFlow",type:"boolean"}],p.viewEvenMoreCount=2,p.viewEvenMoreClickcounter=1,p.latLong={},p.subscriptions=[],p.setReferralId=function(e){p.referralId=e},p.geoLocationService=t.Container.instance.get(i.GeoLocationService),p}return r(s,e),s.prototype.attached=function(){e.prototype.attached.call(this),this.getGeoLocationData(),this.fetchBindableValues(),this.jobWidgetSettingsPromise=this.fetchJobWidgetSettings()},s.prototype.addJobContext=function(){i.logger.warn("called no-op implementation of addJobContext.If the widget holds jobs data, provide an implementation"),this.commonService.addJobContext(this.elementTag,this.jobResults)},s.prototype.checkBulkcartStatus=function(){if(this.bulkcart)this.isBulkcartEnable=!0;else for(var e=0;e<this.jobActions.length;e++)if("addToCart"==this.jobActions[e].name||"removeFromCart"==this.jobActions[e].name){this.isBulkcartEnable=!0;break}},s.prototype.decodeStringQuotes=function(e){return e?e.replace(/\\"/g,'"'):e},s.prototype.fetchBindableValues=function(){var e=this;this.bindableValues.forEach(function(t,i){var o=e.element.getAttribute(t.attrKey);o&&("boolean"==t.type?o="true"==o:"number"==t.type&&(o=parseInt(o)),e[t.actualKey]=o)})},s.prototype.fetchJobWidgetSettings=function(){var e=this,t={},i={},o=void 0,n=void 0;return this.commonService.getDDO(this.elementTag,"jobwidgetsettings",{}).then(function(r){t=r.jobwidgetsettings,t&&t.data&&(t.data.widgets&&t.data.widgets[e.elementTag]&&(i=t.data.widgets[e.elementTag],o=i.fields,n=i.actions),e.jobFields=o||t.data.fields||[],e.jobActions=n||t.data.actions||[]),e.getJobFields(),e.getJobActions(),e.checkBulkcartStatus(),e.getReferralSteps(),e.commonService.isCrawlerUserAgent()||(e.jobFitSettingsPromise=e.fetchFitScoreConfig(),e.jobTagSettingsPromise=e.fetchJobTagsConfig()),e.getShowMoreCount=e.maxDisplayCount})},s.prototype.fetchFitScoreConfig=function(){var e=this,t=this.commonService.getSiteSettings("navItems");if(t&&t.fitScore){var i={},o={},n=void 0,r={feature:"fitScore",fieldMap:{fieldName:"jobFits",finalFieldName:"jobWidgetFits"},avoidWidgetHideOnFail:!0};return this.commonService.getDDO(this.elementTag,"fitScoreSettings",r).then(function(t){i=t&&t.fitScoreSettings&&t.fitScoreSettings.data&&t.fitScoreSettings.data.jobWidgetFits,i&&(e.jobFitsSettConfig=i.settings||{},i.widgets&&i.widgets[e.elementTag]&&(o=i.widgets[e.elementTag],n=o.jobFits),e.jobFits=n||i.jobFits||{}),e.getJobFits()})}return new Promise(function(e,t){e({})})},s.prototype.fetchJobTagsConfig=function(){var e=this,t=this.commonService.getSiteSettings("navItems");if(t&&t.jobTags){var i={},o={},n=void 0,r={feature:"jobTags",fieldMap:{fieldName:"jobTags",finalFieldName:"jobWidgetTags"},avoidWidgetHideOnFail:!0};return this.commonService.getDDO(this.elementTag,"jobTagSettings",r).then(function(t){i=t&&t.jobTagSettings&&t.jobTagSettings.data&&t.jobTagSettings.data.jobWidgetTags,i&&(i.widgets&&i.widgets[e.elementTag]&&(o=i.widgets[e.elementTag],n=o.jobTags),e.jobTagsConfig=n||i.jobTags||{}),e.getJobTags()})}return new Promise(function(e,t){e({})})},s.prototype.getGeoLocationData=function(){var e=this,t=this.commonService.getLocalStorageContext("userLocation")||"";t?(t=JSON.parse(t),this.geoLongitude=t.longitude,this.geoLatitude=t.latitude):this.subscriptions.push(this.eventAggregator.subscribe("GeoLocationDetails",function(t){i.logger.debug("payload location ::"+t),e.geoLongitude=t.coords.longitude,e.geoLatitude=t.coords.latitude}))},s.prototype.getJobFieldDrivingTime=function(t,i){var o=this,n=this.commonService.getSiteSettings("maps"),r=n?n.mapbox||{}:{},a=r&&r.apiKey;if(a&&!window.mapboxSdk){var s=this.commonService.getPlatformAssetsBaseUrl(),l=s+"mapbox-sdk.js";e.prototype.loadScript.call(this,l,function(){o.mapboxClient=window.mapboxSdk({accessToken:a}),o.mapboxClient&&o.checkForDuplicateCoordinates(t,i)},["mapboxSdk"])}else a&&(this.mapboxClient=window.mapboxSdk({accessToken:a}),this.mapboxClient&&this.checkForDuplicateCoordinates(t,i))},s.prototype.checkForDuplicateCoordinates=function(e,t){var i=this;this.jobResults.forEach(function(e){if(e.isWellformedAddress&&e.multi_location_array&&e.multi_location_array.length&&e.multi_location_array.length>1)for(var t=0;t<e.multi_location_array.length;t++){var o=e.multi_location_array[t].latlong;o.lat=o.lat||e.multi_location_array[t].latitude,o.lon=o.lon||e.multi_location_array[t].longitude,o&&o.lat&&o.lon&&(i.latLong[o.lat+"_"+o.lon]={})}else if(e.isWellformedAddress){var n=e.latlong||{};n.lat=n.lat||e.latitude,n.lon=n.lon||e.longitude,n&&n.lat&&n.lon&&(i.latLong[n.lat+"_"+n.lon]={})}});var o=Object.keys(this.latLong);o.length?o.forEach(function(o,n){var r=o.split("_"),a=parseFloat(r[0]),s=parseFloat(r[1]);i.makeReqForDrivingTimeToMapBox(e,t,s,a,o,n)}):this.assignDrivingTimeToDuplicateCoords()},s.prototype.makeReqForDrivingTimeToMapBox=function(e,t,o,n,r,a){var s=this;return new Promise(function(l,c){s.mapboxClient.directions.getDirections({profile:"driving-traffic",waypoints:[{coordinates:[e,t],approach:"unrestricted"},{coordinates:[o,n]}]}).send().then(function(e){l(e);var t=e.body&&e.body.routes&&e.body.routes[0]&&e.body.routes[0].duration;if(t){t=Number(t);var i={};i.inHours=Math.floor(t/3600),i.inMinutes=Math.floor(t%3600/60),i.inHours||i.inMinutes||(i.inMinutes=5),s.latLong[r]=i||{}}else if(0==t){var o={};o.inMinutes=5,s.latLong[r]=o}else s.latLong[r]={};a==Object.keys(s.latLong).length-1&&s.assignDrivingTimeToDuplicateCoords()},function(e){s.latLong[r]={},a==Object.keys(s.latLong).length-1&&s.assignDrivingTimeToDuplicateCoords(),i.logger.debug(e),c()})})},s.prototype.assignDrivingTimeToDuplicateCoords=function(){var e=this;this.jobResults.forEach(function(t){if(t.multi_location_array&&t.multi_location_array.length&&t.multi_location_array.length>1)for(var i=0;i<t.multi_location_array.length;i++){var o=t.multi_location_array[i].latlong||{},n=o.lat+"_"+o.lon;t.multi_location_array[i].drivingTime=e.latLong[n]||{}}else{var r=t.latlong||{},a=r.lat+"_"+r.lon;t.drivingTime=e.latLong[a]||{}}})},s.prototype.getJobFields=function(){var e=this;try{this.jobFields=JSON.parse(this.element.getAttribute("job-fields"))||this.jobFields}catch(e){i.logger.error(e)}this.jobFields.forEach(function(t){e.enabledFields[t.name]=t})},s.prototype.getJobActions=function(){var e=this;try{this.jobActions=JSON.parse(this.element.getAttribute("job-actions"))||this.jobActions}catch(e){i.logger.error(e)}this.jobActions.forEach(function(t){e.enabledActions[t.name]=t}),"internal"==this.commonService.getParam("siteType")&&this.getImconfigurations(this.elementTag,"getIMConfigurations").then(function(t){var i=[];if(t&&t.modules&&(i=t.modules.filter(function(e){return e.value}),-1==i.findIndex(function(e){return"referrals"==e.key}))){e.enabledActions&&e.enabledActions.refer&&delete e.enabledActions.refer;var o=e.jobActions.findIndex(function(e){return"refer"==e.name});-1!=o&&e.jobActions.splice(o,1)}},function(e){console.info(e),new Error(e)})},s.prototype.getImconfigurations=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]&&e[t].data&&e[t].data.imTenant?e[t].data.moduleConfig:e[t]},function(e){console.info(e),new Error(e)})},s.prototype.getJobTags=function(){var e=this;try{this.jobTagsConfig=JSON.parse(this.element.getAttribute("job-tags"))||this.jobTagsConfig||{}}catch(e){i.logger.error(e)}this.jobTagsConfig.tags=this.jobTagsConfig.tags||[],this.jobTags=this.jobTagsConfig.tags,this.jobTags.forEach(function(t){e.enabledTags[t.name]=t})},s.prototype.getJobFits=function(){var e=this;try{this.jobFits=JSON.parse(this.element.getAttribute("job-fits"))||this.jobFits||{}}catch(e){i.logger.error(e)}this.jobFits.fits=this.jobFits.fits||[],this.jobFits.fits.forEach(function(t){e.enabledFits[t.name]=t})},s.prototype.getReferralSteps=function(){try{this.referralSteps=JSON.parse(this.element.getAttribute("referral-steps"))||this.referralSteps}catch(e){i.logger.error(e)}},s.prototype.seemore=function(){var t=this;e.prototype.trackWidgetClick.call(this,"see_more_click",{});var i=this.maxDisplayCount;setTimeout(function(){t.element.querySelector('[data-access-list-item="'+i+'"]')&&t.element.querySelector('[data-access-list-item="'+i+'"]').focus()},150),this.maxDisplayCount=this.jobResults.length,this.showMore=!1},s.prototype.seeLess=function(){var t=this;e.prototype.trackWidgetClick.call(this,"see_less_click",{}),this.maxDisplayCount=this.getShowMoreCount,this.showMore=!0,setTimeout(function(){t.element.querySelector('[data-access="showMore"]')&&t.element.querySelector('[data-access="showMore"]').focus(),t.element.querySelector('[data-access="seeNext"]')&&t.element.querySelector('[data-access="seeNext"]').focus(),t.element.querySelector('[data-access="seeEvenMore"]')&&t.element.querySelector('[data-access="seeEvenMore"]').focus()},350)},s.prototype.seeNext=function(){var t=this;e.prototype.trackWidgetClick.call(this,"see_next_click",{});var i=this.maxDisplayCount;this.maxDisplayCount+this.getShowMoreCount<this.jobResults.length?(this.enabledFields.teamList&&this.fetchTeamData(this.jobResults.slice(this.maxDisplayCount,this.maxDisplayCount+this.getShowMoreCount)),this.showMore=!0,this.maxDisplayCount+=this.getShowMoreCount):(this.enabledFields.teamList&&this.fetchTeamData(this.jobResults.slice(this.maxDisplayCount,this.jobResults.length)),this.maxDisplayCount=this.jobResults.length,this.showMore=!1),setTimeout(function(){t.element.querySelector('[data-access-list-item="'+i+'"]')&&t.element.querySelector('[data-access-list-item="'+i+'"]').focus()},150)},s.prototype.seeEvenMore=function(){var t=this;e.prototype.trackWidgetClick.call(this,"see_even_more_click",{});var i=this.viewEvenMoreCount>this.viewEvenMoreClickcounter;this.viewEvenMoreClickcounter++;var o=this.maxDisplayCount;i&&this.maxDisplayCount+this.getShowMoreCount<=this.jobResults.length?(this.showMore=!0,this.maxDisplayCount+=this.getShowMoreCount):(this.maxDisplayCount=this.jobResults.length,this.viewEvenMoreClickcounter=1,this.showMore=!1),setTimeout(function(){t.element.querySelector('[data-access-list-item="'+o+'"]')&&t.element.querySelector('[data-access-list-item="'+o+'"]').focus()},150)},s.prototype.seemoreOnKeyUp=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.seeNext()),!0},s.prototype.handleError=function(t){e.prototype.hideLoader.call(this),this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},s.prototype.onDataChange=function(e,t){var i=this;if(!this.jobResults.length)return void this.handleError("");if(this.jobWidgetSettingsPromise.then(function(e){i.commonService.isCrawlerUserAgent()||i.fetchJobFitWeightage()}),this.jobResults=this.commonService.populateJobResults(this.jobResults,this.clickTojd,e),!this.isGeoLocationSubscribed&&this.jobFields.length&&this.enabledFields.hasOwnProperty("drivingTime"))if(this.geoLongitude&&this.geoLatitude)this.getJobFieldDrivingTime(this.geoLongitude,this.geoLatitude);else{var o=function(e){i.geoLongitude=e&&e.coords&&e.coords.longitude,i.geoLatitude=e&&e.coords&&e.coords.latitude,i.geoLongitude&&i.geoLatitude&&i.getJobFieldDrivingTime(i.geoLongitude,i.geoLatitude)},n=this.geoLocationService.askForLocation();n?o(n):this.geoLocationService.getGeoLocation().then(function(e){o(e)},function(e){})}"all"==this.jobsDisplayMode&&(this.maxDisplayCount=this.jobResults.length),this.seemoretext=this.seemoretext&&this.jobResults.length>this.maxDisplayCount,this.seemoretext?this.showMore=!0:this.maxDisplayCount=this.jobResults.length,this.fetchJobStatus(),this.enabledFields.teamList&&this.fetchTeamData(this.jobResults.slice(0,this.maxDisplayCount))},s.prototype.fetchJobFitWeightage=function(){var e=this,t={jobSeqNo:[],requiredTags:[],size:this.jobResults.length,tagLimit:this.jobTagsConfig.layout&&this.jobTagsConfig.layout.maxDisplayCount||1,avoidWidgetHideOnFail:!0},i={jobIdentifierList:[],outputFields:[],size:this.jobResults.length,avoidWidgetHideOnFail:!0};this.jobResults.forEach(function(e){t.jobSeqNo.push(e.jobSeqNo),i.jobIdentifierList.push(e.jobSeqNo)}),this.jobTagSettingsPromise.then(function(i){e.fetchJobTags(t)}),this.jobFitSettingsPromise.then(function(t){e.fetchFitScore(i)})},s.prototype.fetchJobTags=function(e){var t=this;this.jobTags&&this.jobTags.length&&(this.jobTags.forEach(function(t){e.requiredTags.push(t.name)}),this.commonService.getDDO(this.elementTag,"smartJobTags",e).then(function(e){if(e&&e.smartJobTags&&e.smartJobTags.data&&e.smartJobTags.data.jobTags){var i=e.smartJobTags.data.jobTags;for(var o in i)!function(e){i[e].length&&i[e].forEach(function(i){t.jobTagsData[e]=t.jobTagsData[e]||{},t.jobTagsData[e][i.tag]=i})}(o)}}))},s.prototype.fetchFitScore=function(e){var t=this;this.jobFits&&this.jobFits.fits&&this.jobFits.fits.length&&this.jobFitsSettConfig.allowedWidgets&&-1!=this.jobFitsSettConfig.allowedWidgets.indexOf(this.elementTag)?(this.jobFits&&this.jobFits.requiredFields&&this.jobFits.requiredFields.length&&this.jobFits.requiredFields.forEach(function(t){e.outputFields.push(t)}),this.commonService.getDDO(this.elementTag,"fetchFitScore",e).then(function(e){if(e&&e.fetchFitScore&&e.fetchFitScore.data&&e.fetchFitScore.data.jobFitScores){var i=e.fetchFitScore.data.jobFitScores;t.jobResults.forEach(function(e){i[e.jobSeqNo]&&i[e.jobSeqNo].data&&(e.fitLevel=i[e.jobSeqNo].data.fitLevel,i[e.jobSeqNo].data.skillGap&&(e.matchingSkills=i[e.jobSeqNo].data.skillGap))}),t.jobFitPromise=!0}})):this.jobFitPromise=!0},s.prototype.fetchJobStatus=function(){var t=this;if(this.isBulkcartEnable&&!this.commonService.isCrawlerUserAgent()){for(var i=[],o=this.jobResults,n=Array.isArray(o),r=0,o=n?o:o[Symbol.iterator]();;){var a;if(n){if(r>=o.length)break;a=o[r++]}else{if(r=o.next(),r.done)break;a=r.value}var s=a;this.jobResults.isJobSaved=null,this.jobResults.saveJobInterState=null,this.jobResults.inProgress=!1,i.push(s.jobSeqNo)}var l={jobSeqNos:i};this.commonService.getDDO(this.elementTag,"getJobStatusListV2",l).then(function(i){if(e.prototype.hideLoader.call(t),i&&i.getJobStatusListV2)for(var o=i.getJobStatusListV2.data,n=t.jobResults,r=Array.isArray(n),a=0,n=r?n:n[Symbol.iterator]();;){var s;if(r){if(a>=n.length)break;s=n[a++]}else{if(a=n.next(),a.done)break;s=a.value}var l=s;l.isJobSaved=o[l.jobSeqNo]||!1,l.saveJobInterState=o[l.jobSeqNo]||!1}})}},s.prototype.handleSaveJob=function(e){this.isBulkcartEnable&&!e.inProgress&&(e.inProgress=!0,e.saveJobInterState?this.deleteJobFromCart(e):this.addToJobCart(e))},s.prototype.addToJobCart=function(t){var i=this,o={jobSeqNo:t.jobSeqNo};this.commonService.getDDO(this.elementTag,"addToCartV2",o).then(function(o){var n=o.addToCartV2;if(t.inProgress=!1,"602"==n.status){var r={jobSeqNo:t.jobSeqNo,category:t.category};t.saveJobInterState=!0,i.eventAggregator.publish("jobCartCount","+1"),i.eventAggregator.publish("jobCartUpdatedCount",""),e.prototype.trackWidgetClick.call(i,"job_added_to_jobcart",r),i.jobAdded=!0,setTimeout(function(){i.jobAdded=!1},3e3)}else t.isJobSaved=!1,t.saveJobInterState=!1})},s.prototype.deleteJobFromCart=function(t,i){var o=this;i||(i={jobSeqNo:t.jobSeqNo}),this.commonService.getDDO(this.elementTag,"deleteFromCartV2",i).then(function(i){var n=i.deleteFromCartV2;if(t.inProgress=!1,"605"==n.status){var r={jobSeqNo:t.jobSeqNo,category:t.category};t.isJobSaved=!1,t.saveJobInterState=!1,o.eventAggregator.publish("jobCartCount","-1"),o.eventAggregator.publish("jobCartUpdatedCount",""),e.prototype.trackWidgetClick.call(o,"job_unfavorited",r),o.jobRemoved=!0,setTimeout(function(){o.jobRemoved=!1},3e3)}else t.isJobSaved=!0,t.saveJobInterState=!0})},s.prototype.fetchTeamData=function(e){var t=e.filter(function(e){return(e.teamId||e.hiringManager)&&!e.teamList}).map(function(e){return{teamId:e.teamId,hiringManager:e.hiringManager,jobId:e.jobId}});t.length&&this.commonService.getDDO(this.elementTag,"getTeamMembers",{teamIdList:t}).then(function(t){var i=t.getTeamMembers||{};e.filter(function(e){return!e.teamList}).forEach(function(e){var t=i[e.jobId];e.teamList=[],t&&t.length?(t.length>4?(e.teamMoreSize=t.length-3,e.teamList=t.slice(0,3)):(e.teamMoreSize=0,e.teamList=t),e.teamList.forEach(function(e){e.firstName=e.firstName||"",e.lastName=e.lastName||"",e.initials=((e.firstName.trim()[0]||"")+(e.lastName.trim()[0]||"")).toUpperCase();var t=new Image;t.onerror=function(){e.pictureUrl=null},e.pictureUrl&&(t.src=e.pictureUrl)})):console.info("Team details not fetched for jobId "+e.jobId)})})},s.prototype.handleReferJob=function(e,t,i){var o=this;this.questionnaireMode==a?(this.referMode="showPopup",document.body.classList.add("modal-open"),this.referJob=JSON.parse(JSON.stringify(e)),i&&Object.keys(i).forEach(function(e){o.referJob[e]=i[e]}),e.showReferView=!e.showReferView,e.showReferView||(this.referMode="hidePopup",this.closeRefer(e))):"first"==this.questionnaireMode?t?"ph-questionnaire"==t?(e.showReferView=!0,e.showQuestionnaireView=!1):this.closeRefer(e):(document.body.classList.add("modal-open"),e.showReferView=!1,e.showQuestionnaireView=!0,this.referJob=JSON.parse(JSON.stringify(e)),i&&Object.keys(i).forEach(function(e){o.referJob[e]=i[e]})):"last"==this.questionnaireMode&&(t?"ph-refer-friend"==t?(e.showReferView=!1,e.showQuestionnaireView=!0):this.closeRefer(e):(document.body.classList.add("modal-open"),e.showReferView=!0,e.showQuestionnaireView=!1,this.referJob=JSON.parse(JSON.stringify(e)),i&&Object.keys(i).forEach(function(e){o.referJob[e]=i[e]})))},s.prototype.closeRefer=function(e){e.showReferView=!1,e.showQuestionnaireView=!1,document.body.classList.remove("modal-open"),this.referralId=""},s.prototype.handleJobClick=function(e){var t={params:{widgetId:this.elementTag,widgetview:this.getView(),widgetName:this.getWidgetName(!1)}};e.fitLevel&&(t.params.jobFitLevel=e.fitLevel);var i=(new Date).getTime()+(65536*(1+Math.random())|0).toString(16).substring(0);return this.commonService.storePageTrackEventData(i,e),this.commonService.processTrackingEvent("job_click",i,t,{}),!0},s.prototype.showAllLocations=function(t){var i=this;this.jobResults=this.jobResults||[],this.jobResults.forEach(function(t){t.popUpOpen&&(t.popUpOpen=!1,e.prototype.closeDialogPopup.call(i))}),t.popUpOpen=!0,setTimeout(function(){var o=i.element.querySelector(".multi-location-popup"),n=i.element.querySelector(".ph-a11y-multi-location-"+t.jobId),r=i.element.querySelector(".ph-a11y-close-multi-location");o&&n&&r&&e.prototype.openDialogPopup.call(i,"multi-location-popup",n,r)},50);var o={jobSeqNo:t.jobSeqNo,category:t.category};e.prototype.trackWidgetClick.call(this,"multi_location_click",o)},s.prototype.hideAllLocations=function(t){t.popUpOpen=!1,e.prototype.closeDialogPopup.call(this);var i={jobSeqNo:t.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",i)},s.prototype.showAllCategory=function(t){var i=this;this.jobResults=this.jobResults||[],this.jobResults.forEach(function(t){t.categoryPopUpOpen&&(t.categoryPopUpOpen=!1,e.prototype.closeDialogPopup.call(i))}),t.categoryPopUpOpen=!0,setTimeout(function(){var o=i.element.querySelector(".multi-category-popup"),n=i.element.querySelector(".ph-a11y-multi-category-"+t.jobId),r=i.element.querySelector(".ph-a11y-close-multi-location");o&&n&&r&&e.prototype.openDialogPopup.call(i,"multi-category-popup",n,r)},50);var o={jobSeqNo:t.jobSeqNo,category:t.category};e.prototype.trackWidgetClick.call(this,"multi_category_click",o)},s.prototype.hideAllCategory=function(t){t.categoryPopUpOpen=!1,e.prototype.closeDialogPopup.call(this);var i={jobSeqNo:t.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",i)},s.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},s}(i.PhenomWidget)}),define("ph-common/ph-video-widget",["exports","./index"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.PhenomVideoWidget=void 0;e.PhenomVideoWidget=function(e){function t(n,r,a){return i(this,t),o(this,e.call(this,n,r,a))}return n(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.subscribeToEvent("PLAY_VIDEO",this.playVideo),this.subscribeToEvent("PAUSE_VIDEO",this.pauseVideo)},t.prototype.playVideo=function(e){},t.prototype.pauseVideo=function(e){},t.prototype.changeVolume=function(e){},t}(t.PhenomWidget)}),define("ph-common/ph-modal-dialog-display",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(i){t(this,e),this.bodyOverflow="auto",this.activeElement=null,this.canHideDocumentOverflow=!0,this.keyEventCallback=null,this.updateSelectors(i),this.keyEventCallback=this.handleKeyDown.bind(this),this.indexBasedTabable=[].slice.call(document.querySelectorAll('[tabindex]:not([tabindex="0"]):not([tabindex="-1"])'))}return e.prototype.updateSelectors=function(e){var t=e||{};this.sModalContent=t.sModalContent||".ph-widget-modal-content",this.sPopoverBody=t.sPopoverBody||".popover-body",this.nPopupHide=t.nPopupHide||"popup-hide",this.nPopupShow=t.nPopupShow||"popup-show",this.sFocusToFirstItem=t.sFocusToFirstItem||".popover-main.active .ref-modal-tab-item",this.sTabGaurdEndSrOnly=t.sTabGaurdEndSrOnly||".tabGaurdEndSrOnly",this.sTabGaurdStartSrOnly=t.sTabGaurdStartSrOnly||".tabGaurdStartSrOnly"},e.prototype.show=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector(this.sModalContent),i=t.querySelector(this.sPopoverBody);i&&(1==e?(i.classList.remove(this.nPopupHide),i.classList.add(this.nPopupShow)):0==e&&(i.classList.remove(this.nPopupShow),i.classList.add(this.nPopupHide)),this.handleModalAriaContent(e))},e.prototype.addFocusToFirst=function(e){if(e=e||document.querySelector(this.sModalContent)){var t=e.querySelector(this.sFocusToFirstItem);t&&t.focus()}},e.prototype.handleKeyDown=function(e){var t=document.querySelector(this.sModalContent);if(t){switch(e.keyCode){case 27:this.show(!1);break;case 9:t&&!t.contains(document.activeElement)&&(this.addFocusToFirst(t),e.preventDefault());break;case 33:case 34:case 38:case 40:t.contains(document.activeElement)&&e.preventDefault()}return!0}},e.prototype.handleModalAriaContent=function(e,t){var i=this;try{var o=!!e,n=t||[".ph-header",".ph-inline-nav-bar",".ph-footer",".ph-widget-main-content"];if(!n.length)return!1;n.forEach(function(e){if(e){var t=document.querySelectorAll(e),i=t&&t.length;if(i){for(var n=void 0,r=0;r<i;r++)n=t[r];n&&n.setAttribute("aria-hidden",o+"")}}});var r=document.querySelector(this.sModalContent);r.setAttribute("aria-hidden",!o+""),e?(this.activeElement=document.activeElement,this.handleDocumentOverflow(!0),document.addEventListener("keydown",this.keyEventCallback),r.querySelector(this.sTabGaurdStartSrOnly).addEventListener("focus",function(e){if(e.stopImmediatePropagation(),r){var t=r.querySelectorAll(i.sFocusToFirstItem);t[t.length-1].focus()}},!0),r.querySelector(this.sTabGaurdEndSrOnly).addEventListener("focus",function(e){e.stopImmediatePropagation(),i.addFocusToFirst(r)},!0),setTimeout(function(){i.addFocusToFirst(r)},40)):(document.removeEventListener("keydown",this.keyEventCallback),this.handleDocumentOverflow(!1),this.activeElement&&this.activeElement.focus())}catch(e){console.info(e)}},e.prototype.handleDocumentOverflow=function(e){"hidden"!==document.body.style.overflow&&(this.bodyOverflow=document.body.style.overflow),e&&this.canHideDocumentOverflow?document.body.style.overflow="hidden":document.body.style.overflow=this.bodyOverflow},e.prototype.resetTABindex=function(){this.indexBasedTabable.forEach(function(e){var t=e.getAttribute("tabindex"),i=t.split("-");i.length>0&&(i=i[1]),e.setAttribute("tabindex",i)})},e.prototype.holdTABindex=function(){this.indexBasedTabable.forEach(function(e){var t=e.getAttribute("tabindex");e.setAttribute("tabindex","-"+t)})},e}();e.ModalDailogDisplay=i}),define("ph-common/ph-validation/ph-validation-controller",["exports","validate.js"],function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ValidationController=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(t);e.ValidationController=function(){function e(){i(this,e),this.validationObj={},this.validationRules={},this.validationErrors={},this.recentError="",this._prevProperty="",this.validateTrigger="blur",this.validateApi=o.default,this.validateApi.options={fullMessages:!1},this.addCustomValidationProviders()}return e.prototype.equal=function(e,t){for(var i in e)if(e[i]!==t[i])return!1;return!0},e.prototype.isNestedObject=function(e){if(e&&this.validateApi.isArray(e)&&e.length){for(var t=0;t<e.length;t++){var i=e[t];if(this.validateApi.isObject(i))return!0}return!1}},e.prototype.getNestedObjIdx=function(e,t,i){var o=this,n=-1;return this.isNestedObject(t)&&t.forEach(function(t,r){var a=o.validationObj[e];o.validateApi.isArray(a)&&(a=a[r]),o.equal(i,a)&&(n=r)}),n},e.prototype.setDirty=function(e,t,i,o,n,r){return this.validateApi.isArray[this.validationObj[e]]?e==t&&o==i&&this.equal(n,this.validationObj[e][r]):e==t&&o==i&&this.equal(n,this.validationObj[e])},e.prototype.addCustomValidationProviders=function(){var e=this;this.validateApi.validators.objectArray=function(t,i,o,n){var r=[];t&&e.validateApi.isArray(t)&&t.forEach(function(t){var o=e.validateApi(t,i);r.push(o||{})});var a=!1;if(r.forEach(function(e){a=e}),a)return r},this.validateApi.validators.simpleOject=function(t,i,o,n){var r={key:{}};if(t=t||e.validationObj[o]){var a=e.validateApi(t,i);return r.key=a}return r}},e.prototype.addValidationCtx=function(e,t){this.validationObj=e,this.validationRules=t},e.prototype.setValidateTrigger=function(e){this.validateTrigger=e},e.prototype.validate=function(e,t,i){var o=this,n=this.validateApi(this.validationObj,this.validationRules);for(var r in n)if(n.hasOwnProperty(r)&&this.validateApi.isArray(n[r]))for(var a=0;a<n[r].length;a++)this.validateApi.isEmpty(n[r][a])&&(n[r][a]=void 0);for(var s in n)if(n.hasOwnProperty(s)&&this.validateApi.isArray(n[s])){for(var l=!0,c=0;c<n[s].length;c++)if(void 0!=n[s][c]){l=!1;break}l&&delete n[s]}var p=JSON.parse(JSON.stringify(this.validationErrors)),u="";if(n&&e){var d=e.indexOf(".");if(-1!=d&&(e=e.substring(0,d)),this.isNestedObject(n[e])){var f=this.getNestedObjIdx(e,n[e],t);-1!=f&&(p[e]||(p[e]=[{}]),p[e][f]||(p[e][f]={}),n[e]=n[e]||{},i?(n[e][f]=n[e][f]||{},p[e][f][i]=n[e][f][i],u=n[e][f][i],this._prevProperty=e+f+i+""):(p[e][f]=n[e][f],u=n[e][f],this._prevProperty=e+f))}else u=n[e],p[e]=n[e],this._prevProperty=e;u&&(this.recentError="",this.validateApi.isArray(u)&&(u=u[0]),setTimeout(function(){o.recentError=u},6))}else p=n||{};return this.validationErrors=p,this.validationErrors},e.prototype.hasErrors=function(){var e=this.validate();return Object.keys(e).length>0},e}()}),define("ph-common/ph-validation/ph-validate-binding-behavior",["exports","aurelia-framework","aurelia-dependency-injection","./ph-validation-controller"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhValidateBindingBehavior=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.PhValidateBindingBehavior=function(){function e(t){n(this,e),this.container=t}return e.prototype.bind=function(e,t,i){var n=this;this.validationController=this.container.get(o.ValidationController);for(var r=e.sourceExpression.expression.name,a=e.sourceExpression.expression.object,s=void 0,l=void 0;(!e.source.bindingContext.element||a.object)&&a;){l=r,r=a.name+"."+r;var c=e.source.bindingContext[a.name];!c&&a.object&&(c=e.source.bindingContext[a.object.name][a.name]),s=Object.create(c),a=a.object}var p=this.getTarget(e,t);this.validationController.validateTrigger&&(e.validateBlurHandler=function(){n.validationController.validate(r,s,l)},p.addEventListener("blur",e.validateBlurHandler))},e.prototype.unbind=function(e,t){e.validateBlurHandler&&e.validateTarget&&(e.validateTarget.removeEventListener("blur",e.validateBlurHandler),e.validateBlurHandler=null,e.validateTarget=null)},e.prototype.getTarget=function(e,t){var i=e.target;if(i instanceof Element)return i
;for(var o=0,n=t.controllers.length;o<n;o++){var r=t.controllers[o];if(r.viewModel===i){var a=r.container.get(DOM.Element);if(a)return a;throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')}}throw new Error('Unable to locate target element for "'+e.sourceExpression+'".')},e}();e.PhValidateBindingBehavior=l=a([(0,t.autoinject)(),s("design:paramtypes",[i.Container])],l)}),define("ph-common/ph-translation/ph-translation-value-converter",["exports","aurelia-framework","./../common-service","./ph-translation-service"],function(e,t,i,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PhtValueConverter=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t,i,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(a<3?n(s):a>3?n(t,i,s):n(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=e.PhtValueConverter=function(){function e(t,i){n(this,e),this.commonService=t,this.translationService=i,this.bundle=this.commonService.getLangBundle()}return e.prototype.toView=function(e,t,i,o){if(this.bundle=this.commonService.getLangBundle(),t)return this.translationService.renderLiteral(e,t);var n="";if(e)if(i)for(var r=e.split(i),o=o||" ",a=0;a<r.length;a++){var s=r[a];n+=this.bundle[s]||s,n+=o}else n=this.bundle[e]||e;return n},e}();e.PhtValueConverter=l=a([(0,t.autoinject)(),s("design:paramtypes",[i.CommonService,o.TranslationService])],l)}),define("ph-common/ph-candidate-login-service",["exports","aurelia-framework","./index"],function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CandidateLoginService=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t,i,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,i,s):r(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=e.CandidateLoginService=function(){function e(t){o(this,e),this.commonService=t,this.providerKey={FACEBOOK:"facebook",MICROSOFT:"microsoft",LINKEDIN:"linkedIn",GOOGLE:"google",LOGIN:"google-signin"}}return e.prototype.getValidateJwtToken=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e.prototype.getLocale=function(){var e=this.commonService.getLocale();return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},e.prototype.socialLoginUrl=function(e,t,o,n){var r=this.commonService.getQueryParam("qpage")||"";r=decodeURIComponent(r);var a=o.name,s=o.profileValidation,l=o.redirectUri||window.location.href;a&&"linkedin"==a.toLocaleLowerCase()&&(a="linkedIn");var c=this.commonService.getSiteSettings("oauth");if(c&&c[a]){var p=this.commonService.getQueryParam("page")||"",u=c[a],d=this.getLocale(),f=this.commonService.getLocale(),h=window.location.pathname;r||(h+=window.location.search);var g={page:h,protocol:window.location.protocol,localePath:d,qpage:r,pagename:p,locale:f,siteVariant:t,rurl:encodeURIComponent(l)};if(n&&Object.keys(n).length)for(var y in n)g.hasOwnProperty(y)||(g[y]=n[y]);return s&&(g.profileValidation=!0),(this.commonService.getCsrfToken()&&(g.csrfToken=this.commonService.getCsrfToken()),u)?(u.redirectUriPath=this.commonService.getRootDomain()+u.redirectUri,u.state=JSON.stringify(g),this.redirectToProvider(u,a)):(i.logger.debug("provider doesnt exist"),!1)}},e.prototype.redirectToProvider=function(e,t){var i=this.providerKey,o=e.loginUrl+"?response_type="+e.response_type+"&";switch(t){case i.MICROSOFT:case i.LINKEDIN:o+="client_id="+encodeURIComponent(e.clientId)+"&";break;case i.GOOGLE:case i.LOGIN:o+="client_id="+encodeURIComponent(e.clientId)+"&access_type=offline&approval_prompt=auto&";break;case i.FACEBOOK:o+="client_id="+encodeURIComponent(e.clientId)+"&"}return!!t&&(o+="redirect_uri="+encodeURIComponent(e.redirectUriPath),e.scope&&(o+="&scope="+encodeURIComponent(e.scope)),e.state&&(o+="&state="+encodeURIComponent(e.state)),o)},e.prototype.getMergeProfile=function(e,t,o){return this.commonService.getDDO(e,t,{}).then(function(e){if((e=e[t])&&"success"==e.status){var o=e.data;if(o&&o.allProfiles&&o.allProfiles.length){var n=[];o.linkedAccountList=[],o.mergeProfilesCount=0,o.allProfiles.forEach(function(e){if(e.hasOwnProperty("merge")||(e.merge=!0),e.hasOwnProperty("validation")&&!o.mergeAuthFlow&&(o.mergeAuthFlow="unsuccessfulMerge",e.validation&&(o.mergeAuthFlow="successfulMerge")),e.merge&&e.linkedAccounts&&e.linkedAccounts.length){for(var t=0;t<e.linkedAccounts.length;t++)-1==n.indexOf(e.linkedAccounts[t].email+""+e.linkedAccounts[t].socialProvider)&&(o.linkedAccountList.push(e.linkedAccounts[t]),n.push(e.linkedAccounts[t].email+""+e.linkedAccounts[t].socialProvider));o.mergeProfilesCount++}})}return o}if("failure"==e.status)return i.logger.debug("Failed"),{}})},e.prototype.doLogout=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]})},e.prototype.profileMergeCancel=function(e,t,i){return this.commonService.getDDO(e,t,i).then(function(e){return e[t]})},e}();e.CandidateLoginService=s=r([(0,t.autoinject)(),a("design:paramtypes",[i.CommonService])],s)}),define("ph-common/ph-a11y-autocomplete",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.A11yAutoComplete=function(){function e(){t(this,e)}return e.prototype.init=function(e){if(e){var t=void 0,i=e.querySelector("[data-ph-autocomplete-input]");if(i&&(t=i.getAttribute("data-ph-autocomplete-input"),i.setAttribute("aria-autocomplete","list"),i.setAttribute("aria-controls",t+"-listbox"),i.setAttribute("id",t+"-input")),t){var o=e.querySelector(".ph-autocomplete-input-label");o&&(o.setAttribute("for",t+"-input"),o.setAttribute("id",t+"-label"));var n=e.querySelector(".ph-autocomplete-input-container");n&&(n.setAttribute("aria-expanded","false"),n.setAttribute("aria-owns",t+"-listbox"),n.setAttribute("aria-haspopup","listbox"),n.setAttribute("id",t+"-inputcontainer"));var r=e.querySelector(".ph-autocomplete-input-listbox");r&&(r.setAttribute("aria-labelledby",t+"-label"),r.setAttribute("role","listbox"),r.setAttribute("id",t+"-listbox"))}}},e.prototype.moveDown=function(e,t,i,o,n,r,a){this.handleKeyMove(e,t,i,o,n,r,a)},e.prototype.moveUp=function(e,t,i,o,n,r,a){this.handleKeyMove(e,t,i,o,n,r,a)},e.prototype.handleKeyMove=function(e,t,i,o,n,r,a){if(e[i].activeIndex=n,o[n].aria||(o[n].aria={}),o[n].aria.selected=!0,o[n].aria.id="result-item-"+n,t&&t.setAttribute("aria-activedescendant",o[n].aria.id),r&&a&&r.querySelector("#"+o[n].aria.id)){var s=r.querySelector("#"+o[n].aria.id);if(a&&a.offsetHeight-s.offsetHeight<s.offsetTop&&s.offsetTop<a.scrollHeight){var l=s.scrollHeight-s.offsetHeight*n;a.scrollTop=l<0?-1*l:l}else a.scrollTop=0}},e}()});